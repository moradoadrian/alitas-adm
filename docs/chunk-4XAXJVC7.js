var rM=Object.defineProperty,iM=Object.defineProperties;var oM=Object.getOwnPropertyDescriptors;var iw=Object.getOwnPropertySymbols,sM=Object.getPrototypeOf,aM=Object.prototype.hasOwnProperty,cM=Object.prototype.propertyIsEnumerable,uM=Reflect.get;var ow=(n,e,t)=>e in n?rM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Je=(n,e)=>{for(var t in e||={})aM.call(e,t)&&ow(n,t,e[t]);if(iw)for(var t of iw(e))cM.call(e,t)&&ow(n,t,e[t]);return n},Xe=(n,e)=>iM(n,oM(e));var on=(n,e,t)=>uM(sM(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(l){i(l)}},s=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function rp(n,e){return Object.is(n,e)}var Ge=null,gu=!1,ip=1,Vt=Symbol("SIGNAL");function ce(n){let e=Ge;return Ge=n,e}function op(){return Ge}var ao={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ia(n){if(gu)throw new Error("");if(Ge===null)return;Ge.consumerOnSignalRead(n);let e=Ge.nextProducerIndex++;if(Iu(Ge),e<Ge.producerNode.length&&Ge.producerNode[e]!==n&&ra(Ge)){let t=Ge.producerNode[e];_u(t,Ge.producerIndexOfThis[e])}Ge.producerNode[e]!==n&&(Ge.producerNode[e]=n,Ge.producerIndexOfThis[e]=ra(Ge)?aw(n,Ge,e):0),Ge.producerLastReadVersion[e]=n.version}function sw(){ip++}function sp(n){if(!(ra(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ip)){if(!n.producerMustRecompute(n)&&!vu(n)){np(n);return}n.producerRecomputeValue(n),np(n)}}function ap(n){if(n.liveConsumerNode===void 0)return;let e=gu;gu=!0;try{for(let t of n.liveConsumerNode)t.dirty||lM(t)}finally{gu=e}}function cp(){return Ge?.consumerAllowSignalWrites!==!1}function lM(n){n.dirty=!0,ap(n),n.consumerMarkedDirty?.(n)}function np(n){n.dirty=!1,n.lastCleanEpoch=ip}function oa(n){return n&&(n.nextProducerIndex=0),ce(n)}function yu(n,e){if(ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ra(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)_u(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vu(n){Iu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(sp(t),r!==t.version))return!0}return!1}function sa(n){if(Iu(n),ra(n))for(let e=0;e<n.producerNode.length;e++)_u(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function aw(n,e,t){if(cw(n),n.liveConsumerNode.length===0&&uw(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=aw(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function _u(n,e){if(cw(n),n.liveConsumerNode.length===1&&uw(n))for(let r=0;r<n.producerNode.length;r++)_u(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Iu(i),i.producerIndexOfThis[r]=e}}function ra(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Iu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function cw(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function uw(n){return n.producerNode!==void 0}function up(n,e){let t=Object.create(dM);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(sp(t),ia(t),t.value===mu)throw t.error;return t.value};return r[Vt]=t,r}var ep=Symbol("UNSET"),tp=Symbol("COMPUTING"),mu=Symbol("ERRORED"),dM=Xe(Je({},ao),{value:ep,dirty:!0,error:null,equal:rp,kind:"computed",producerMustRecompute(n){return n.value===ep||n.value===tp},producerRecomputeValue(n){if(n.value===tp)throw new Error("Detected cycle in computations.");let e=n.value;n.value=tp;let t=oa(n),r,i=!1;try{r=n.computation(),ce(null),i=e!==ep&&e!==mu&&r!==mu&&n.equal(e,r)}catch(o){r=mu,n.error=o}finally{yu(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function hM(){throw new Error}var lw=hM;function dw(n){lw(n)}function lp(n){lw=n}var fM=null;function dp(n,e){let t=Object.create(Eu);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(ia(t),t.value);return r[Vt]=t,r}function aa(n,e){cp()||dw(n),n.equal(n.value,e)||(n.value=e,pM(n))}function hp(n,e){cp()||dw(n),aa(n,e(n.value))}var Eu=Xe(Je({},ao),{equal:rp,value:void 0,kind:"signal"});function pM(n){n.version++,sw(),ap(n),fM?.()}function fp(n){let e=ce(null);try{return n()}finally{ce(e)}}var pp;function ca(){return pp}function Rn(n){let e=pp;return pp=n,e}var wu=Symbol("NotFound");function Y(n){return typeof n=="function"}function co(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Tu=co(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Xr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(o){e=o instanceof Tu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{hw(o)}catch(s){e=e??[],s instanceof Tu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Tu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)hw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Xr(t,e)}remove(e){let{_finalizers:t}=this;t&&Xr(t,e),e instanceof n&&e._removeParent(this)}};je.EMPTY=(()=>{let n=new je;return n.closed=!0,n})();var gp=je.EMPTY;function Du(n){return n instanceof je||n&&"closed"in n&&Y(n.remove)&&Y(n.add)&&Y(n.unsubscribe)}function hw(n){Y(n)?n():n.unsubscribe()}var Wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var uo={setTimeout(n,e,...t){let{delegate:r}=uo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=uo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function bu(n){uo.setTimeout(()=>{let{onUnhandledError:e}=Wt;if(e)e(n);else throw n})}function ei(){}var fw=mp("C",void 0,void 0);function pw(n){return mp("E",void 0,n)}function gw(n){return mp("N",n,void 0)}function mp(n,e,t){return{kind:n,value:e,error:t}}var ti=null;function lo(n){if(Wt.useDeprecatedSynchronousErrorHandling){let e=!ti;if(e&&(ti={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ti;if(ti=null,t)throw r}}else n()}function mw(n){Wt.useDeprecatedSynchronousErrorHandling&&ti&&(ti.errorThrown=!0,ti.error=n)}var ni=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Du(e)&&e.add(this)):this.destination=IM}static create(e,t,r){return new ho(e,t,r)}next(e){this.isStopped?vp(gw(e),this):this._next(e)}error(e){this.isStopped?vp(pw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vp(fw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},vM=Function.prototype.bind;function yp(n,e){return vM.call(n,e)}var _p=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Cu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Cu(r)}else Cu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cu(t)}}},ho=class extends ni{constructor(e,t,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Wt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yp(e.next,o),error:e.error&&yp(e.error,o),complete:e.complete&&yp(e.complete,o)}):i=e}this.destination=new _p(i)}};function Cu(n){Wt.useDeprecatedSynchronousErrorHandling?mw(n):bu(n)}function _M(n){throw n}function vp(n,e){let{onStoppedNotification:t}=Wt;t&&uo.setTimeout(()=>t(n,e))}var IM={closed:!0,next:ei,error:_M,complete:ei};var fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lt(n){return n}function Su(...n){return Ip(n)}function Ip(n){return n.length===0?lt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ee=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=wM(t)?t:new ho(t,r,i);return lo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=yw(r),new r((i,o)=>{let s=new ho({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[fo](){return this}pipe(...t){return Ip(t)(this)}toPromise(t){return t=yw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function yw(n){var e;return(e=n??Wt.Promise)!==null&&e!==void 0?e:Promise}function EM(n){return n&&Y(n.next)&&Y(n.error)&&Y(n.complete)}function wM(n){return n&&n instanceof ni||EM(n)&&Du(n)}function Ep(n){return Y(n?.lift)}function te(n){return e=>{if(Ep(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Z(n,e,t,r,i){return new wp(n,e,t,r,i)}var wp=class extends ni{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Tp(){return te((n,e)=>{let t=null;n._refCount++;let r=Z(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Dp=class extends ee{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ep(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let t=this.getSubject();e.add(this.source.subscribe(Z(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return Tp()(this)}};var vw=co(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pn=(()=>{class n extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Au(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new vw}next(t){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gp:(this.currentObservers=null,o.push(t),new je(()=>{this.currentObservers=null,Xr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ee;return t.source=this,t}}return n.create=(e,t)=>new Au(e,t),n})(),Au=class extends Pn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:gp}};var ua=class extends Pn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var bp={now(){return(bp.delegate||Date).now()},delegate:void 0};var Nu=class extends je{constructor(e,t){super()}schedule(e,t=0){return this}};var la={setInterval(n,e,...t){let{delegate:r}=la;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=la;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var po=class extends Nu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return la.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&la.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Xr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var go=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};go.now=bp.now;var mo=class extends go{constructor(e,t=go.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ru=new mo(po),Cp=Ru;var Pu=class extends po{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Mu=class extends mo{};var Sp=new Mu(Pu);var da=new ee(n=>n.complete());function ku(n){return n&&Y(n.schedule)}function _w(n){return n[n.length-1]}function xu(n){return Y(_w(n))?n.pop():void 0}function or(n){return ku(_w(n))?n.pop():void 0}function Ou(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Ew(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{l(r.next(d))}catch(f){s(f)}}function c(d){try{l(r.throw(d))}catch(f){s(f)}}function l(d){d.done?o(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Iw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ri(n){return this instanceof ri?(this.v=n,this):new ri(n)}function ww(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(w){return Promise.resolve(w).then(m,f)}}function a(m,w){r[m]&&(i[m]=function(R){return new Promise(function(P,O){o.push([m,R,P,O])>1||c(m,R)})},w&&(i[m]=w(i[m])))}function c(m,w){try{l(r[m](w))}catch(R){g(o[0][3],R)}}function l(m){m.value instanceof ri?Promise.resolve(m.value.v).then(d,f):g(o[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function g(m,w){m(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Tw(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Iw=="function"?Iw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Fu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Lu(n){return Y(n?.then)}function Vu(n){return Y(n[fo])}function ju(n){return Symbol.asyncIterator&&Y(n?.[Symbol.asyncIterator])}function Bu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function TM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Uu=TM();function $u(n){return Y(n?.[Uu])}function Hu(n){return ww(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ri(t.read());if(i)return yield ri(void 0);yield yield ri(r)}}finally{t.releaseLock()}})}function qu(n){return Y(n?.getReader)}function Me(n){if(n instanceof ee)return n;if(n!=null){if(Vu(n))return DM(n);if(Fu(n))return bM(n);if(Lu(n))return CM(n);if(ju(n))return Dw(n);if($u(n))return SM(n);if(qu(n))return AM(n)}throw Bu(n)}function DM(n){return new ee(e=>{let t=n[fo]();if(Y(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function bM(n){return new ee(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function CM(n){return new ee(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,bu)})}function SM(n){return new ee(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Dw(n){return new ee(e=>{NM(n,e).catch(t=>e.error(t))})}function AM(n){return Dw(Hu(n))}function NM(n,e){var t,r,i,o;return Ew(this,void 0,void 0,function*(){try{for(t=Tw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function vt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function sr(n,e=0){return te((t,r)=>{t.subscribe(Z(r,i=>vt(r,n,()=>r.next(i),e),()=>vt(r,n,()=>r.complete(),e),i=>vt(r,n,()=>r.error(i),e)))})}function ar(n,e=0){return te((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function bw(n,e){return Me(n).pipe(ar(e),sr(e))}function Cw(n,e){return Me(n).pipe(ar(e),sr(e))}function Sw(n,e){return new ee(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Aw(n,e){return new ee(t=>{let r;return vt(t,e,()=>{r=n[Uu](),vt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function zu(n,e){if(!n)throw new Error("Iterable cannot be null");return new ee(t=>{vt(t,e,()=>{let r=n[Symbol.asyncIterator]();vt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Nw(n,e){return zu(Hu(n),e)}function Rw(n,e){if(n!=null){if(Vu(n))return bw(n,e);if(Fu(n))return Sw(n,e);if(Lu(n))return Cw(n,e);if(ju(n))return zu(n,e);if($u(n))return Aw(n,e);if(qu(n))return Nw(n,e)}throw Bu(n)}function jt(n,e){return e?Rw(n,e):Me(n)}function RM(...n){let e=or(n);return jt(n,e)}function PM(n,e){let t=Y(n)?n:()=>n,r=i=>i.error(t());return new ee(e?i=>e.schedule(r,0,i):r)}function MM(n){return!!n&&(n instanceof ee||Y(n.lift)&&Y(n.subscribe))}var ii=co(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Pw(n){return n instanceof Date&&!isNaN(n)}function dt(n,e){return te((t,r)=>{let i=0;t.subscribe(Z(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:kM}=Array;function xM(n,e){return kM(e)?n(...e):n(e)}function Wu(n){return dt(e=>xM(n,e))}var{isArray:OM}=Array,{getPrototypeOf:FM,prototype:LM,keys:VM}=Object;function Gu(n){if(n.length===1){let e=n[0];if(OM(e))return{args:e,keys:null};if(jM(e)){let t=VM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function jM(n){return n&&typeof n=="object"&&FM(n)===LM}function Ku(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function BM(...n){let e=or(n),t=xu(n),{args:r,keys:i}=Gu(n);if(r.length===0)return jt([],e);let o=new ee(UM(r,e,i?s=>Ku(i,s):lt));return t?o.pipe(Wu(t)):o}function UM(n,e,t=lt){return r=>{Mw(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Mw(e,()=>{let l=jt(n[c],e),d=!1;l.subscribe(Z(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Mw(n,e,t){n?vt(t,n,e):e()}function kw(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},m=R=>l<r?w(R):c.push(R),w=R=>{o&&e.next(R),l++;let P=!1;Me(t(R,d++)).subscribe(Z(e,O=>{i?.(O),o?m(O):e.next(O)},()=>{P=!0},void 0,()=>{if(P)try{for(l--;c.length&&l<r;){let O=c.shift();s?vt(e,s,()=>w(O)):w(O)}g()}catch(O){e.error(O)}}))};return n.subscribe(Z(e,m,()=>{f=!0,g()})),()=>{a?.()}}function oi(n,e,t=1/0){return Y(e)?oi((r,i)=>dt((o,s)=>e(r,o,i,s))(Me(n(r,i))),t):(typeof e=="number"&&(t=e),te((r,i)=>kw(r,i,n,t)))}function xw(n=1/0){return oi(lt,n)}function Ow(){return xw(1)}function Qu(...n){return Ow()(jt(n,or(n)))}function $M(n){return new ee(e=>{Me(n()).subscribe(e)})}function HM(...n){let e=xu(n),{args:t,keys:r}=Gu(n),i=new ee(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;Me(t[d]).subscribe(Z(o,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?Ku(r,a):a),o.complete())}))}});return e?i.pipe(Wu(e)):i}function Ap(n=0,e,t=Cp){let r=-1;return e!=null&&(ku(e)?t=e:r=e),new ee(i=>{let o=Pw(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function cr(n,e){return te((t,r)=>{let i=0;t.subscribe(Z(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Fw(n){return te((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Z(t,void 0,void 0,s=>{o=Me(n(s,Fw(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Lw(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(Z(s,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Np(n,e){return Y(e)?oi(n,e,1):oi(n,1)}function ha(n){return te((e,t)=>{let r=!1;e.subscribe(Z(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Rp(n){return n<=0?()=>da:te((e,t)=>{let r=0;e.subscribe(Z(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Pp(n,e){return te((t,r)=>{let i=new Set;t.subscribe(Z(r,o=>{let s=n?n(o):o;i.has(s)||(i.add(s),r.next(o))})),e&&Me(e).subscribe(Z(r,()=>i.clear(),ei))})}function Mp(n,e=lt){return n=n??qM,te((t,r)=>{let i,o=!0;t.subscribe(Z(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function qM(n,e){return n===e}function Yu(n=zM){return te((e,t)=>{let r=!1;e.subscribe(Z(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zM(){return new ii}function WM(n){return te((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function GM(n,e){let t=arguments.length>=2;return r=>r.pipe(n?cr((i,o)=>n(i,o,r)):lt,Rp(1),t?ha(e):Yu(()=>new ii))}function kp(n){return n<=0?()=>da:te((e,t)=>{let r=[];e.subscribe(Z(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function KM(n,e){let t=arguments.length>=2;return r=>r.pipe(n?cr((i,o)=>n(i,o,r)):lt,kp(1),t?ha(e):Yu(()=>new ii))}function xp(){return te((n,e)=>{let t,r=!1;n.subscribe(Z(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Zu(n,e){return te(Lw(n,e,arguments.length>=2,!0))}function Op(...n){let e=or(n);return te((t,r)=>{(e?Qu(n,t,e):Qu(n,t)).subscribe(r)})}function Vw(n,e){return te((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Z(r,c=>{i?.unsubscribe();let l=0,d=o++;Me(n(c,d)).subscribe(i=Z(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function QM(n){return te((e,t)=>{Me(n).subscribe(Z(t,()=>t.complete(),ei)),!t.closed&&e.subscribe(t)})}function YM(n,e,t){let r=Y(n)||e||t?{next:n,error:e,complete:t}:n;return r?te((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Z(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):lt}var ZM="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ie=class extends Error{code;constructor(e,t){super(XM(e,t)),this.code=e}};function JM(n){return`NG0${Math.abs(n)}`}function XM(n,e){return`${JM(n)}${e?": "+e:""}`}var DT=Symbol("InputSignalNode#UNSET"),ek=Xe(Je({},Eu),{transformFn:void 0,applyValueToInputSignal(n,e){aa(n,e)}});function bT(n,e){let t=Object.create(ek);t.value=n,t.transformFn=e?.transform;function r(){if(ia(t),t.value===DT){let i=null;throw new ie(-950,i)}return t.value}return r[Vt]=t,r}function Ca(n){return{toString:n}.toString()}var Ju="__parameters__";function tk(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function CT(n,e,t){return Ca(()=>{let r=tk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(Ju)?c[Ju]:Object.defineProperty(c,Ju,{value:[]})[Ju];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Xu=globalThis;function Ee(n){for(let e in n)if(n[e]===Ee)return e;throw Error("Could not find renamed property on target object.")}function nk(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function It(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(It).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function jw(n,e){return n?e?`${n} ${e}`:n:e||""}var rk=Ee({__forward_ref__:Ee});function ST(n){return n.__forward_ref__=ST,n.toString=function(){return It(this())},n}function ht(n){return AT(n)?n():n}function AT(n){return typeof n=="function"&&n.hasOwnProperty(rk)&&n.__forward_ref__===ST}function De(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xl(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ol(n){return Bw(n,NT)||Bw(n,RT)}function K8(n){return Ol(n)!==null}function Bw(n,e){return n.hasOwnProperty(e)?n[e]:null}function ik(n){let e=n&&(n[NT]||n[RT]);return e||null}function Uw(n){return n&&(n.hasOwnProperty($w)||n.hasOwnProperty(ok))?n[$w]:null}var NT=Ee({\u0275prov:Ee}),$w=Ee({\u0275inj:Ee}),RT=Ee({ngInjectableDef:Ee}),ok=Ee({ngInjectorDef:Ee}),oe=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=De({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function PT(n){return n&&!!n.\u0275providers}var sk=Ee({\u0275cmp:Ee}),ak=Ee({\u0275dir:Ee}),ck=Ee({\u0275pipe:Ee}),uk=Ee({\u0275mod:Ee}),sl=Ee({\u0275fac:Ee}),ma=Ee({__NG_ELEMENT_ID__:Ee}),Hw=Ee({__NG_ENV_ID__:Ee});function ai(n){return typeof n=="string"?n:n==null?"":String(n)}function lk(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ai(n)}function MT(n,e){throw new ie(-200,n)}function jg(n,e){throw new ie(-201,!1)}var re=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(re||{}),Zp;function kT(){return Zp}function _t(n){let e=Zp;return Zp=n,e}function xT(n,e,t){let r=Ol(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&re.Optional)return null;if(e!==void 0)return e;jg(n,"Injector")}var dk={},ci=dk,Jp="__NG_DI_FLAG__",al=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?wu:ci,r)}},cl="ngTempTokenPath",hk="ngTokenPath",fk=/\n/gm,pk="\u0275",qw="__source";function gk(n,e=re.Default){if(ca()===void 0)throw new ie(-203,!1);if(ca()===null)return xT(n,void 0,e);{let t=ca(),r;return t instanceof al?r=t.injector:r=t,r.get(n,e&re.Optional?null:void 0,e)}}function ft(n,e=re.Default){return(kT()||gk)(ht(n),e)}function Q(n,e=re.Default){return ft(n,Fl(e))}function Fl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Xp(n){let e=[];for(let t=0;t<n.length;t++){let r=ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let i,o=re.Default;for(let s=0;s<r.length;s++){let a=r[s],c=mk(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ft(i,o))}else e.push(ft(r))}return e}function OT(n,e){return n[Jp]=e,n.prototype[Jp]=e,n}function mk(n){return n[Jp]}function yk(n,e,t,r){let i=n[cl];throw e[qw]&&i.unshift(e[qw]),n.message=vk(`
`+n.message,i,t,r),n[hk]=i,n[cl]=null,n}function vk(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==pk?n.slice(2):n;let i=It(e);if(Array.isArray(e))i=e.map(It).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):It(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(fk,`
  `)}`}var Rt=OT(CT("Optional"),8);var _k=OT(CT("SkipSelf"),4);function li(n,e){let t=n.hasOwnProperty(sl);return t?n[sl]:null}function Bg(n,e){n.forEach(t=>Array.isArray(t)?Bg(t,e):e(t))}function FT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ul(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Ik(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Ek(n,e,t){let r=Sa(n,e);return r>=0?n[r|1]=t:(r=~r,Ik(n,r,e,t)),r}function Fp(n,e){let t=Sa(n,e);if(t>=0)return n[t|1]}function Sa(n,e){return wk(n,e,1)}function wk(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var di={},Bt=[],ll=new oe(""),LT=new oe("",-1),VT=new oe(""),dl=class{get(e,t=ci){if(t===ci){let r=new Error(`NullInjectorError: No provider for ${It(e)}!`);throw r.name="NullInjectorError",r}return t}};function jT(n,e){let t=n[uk]||null;if(!t&&e===!0)throw new Error(`Type ${It(n)} does not have '\u0275mod' property.`);return t}function Eo(n){return n[sk]||null}function Tk(n){return n[ak]||null}function Dk(n){return n[ck]||null}function Po(n){return{\u0275providers:n}}function bk(...n){return{\u0275providers:BT(!0,n),\u0275fromNgModule:!0}}function BT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Bg(e,s=>{let a=s;eg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&UT(i,o),t}function UT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ug(i,o=>{e(o,r)})}}function eg(n,e,t,r){if(n=ht(n),!n)return!1;let i=null,o=Uw(n),s=!o&&Eo(n);if(!o&&!s){let c=n.ngModule;if(o=Uw(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)eg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Bg(o.imports,d=>{eg(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&UT(l,e)}if(!a){let l=li(i)||(()=>new i);e({provide:i,useFactory:l,deps:Bt},i),e({provide:VT,useValue:i,multi:!0},i),e({provide:ll,useValue:()=>ft(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Ug(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Ug(n,e){for(let t of n)PT(t)&&(t=t.\u0275providers),Array.isArray(t)?Ug(t,e):e(t)}var Ck=Ee({provide:String,useValue:Ee});function $T(n){return n!==null&&typeof n=="object"&&Ck in n}function Sk(n){return!!(n&&n.useExisting)}function Ak(n){return!!(n&&n.useFactory)}function wo(n){return typeof n=="function"}function Nk(n){return!!n.useClass}var HT=new oe(""),tl={},zw={},Lp;function $g(){return Lp===void 0&&(Lp=new dl),Lp}var an=class{},ya=class extends an{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ng(e,s=>this.processProvider(s)),this.records.set(LT,yo(void 0,this)),i.has("environment")&&this.records.set(an,yo(void 0,this));let o=this.records.get(HT);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(VT,Bt,re.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?wu:ci,r)}destroy(){pa(this),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return pa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){pa(this);let t=Rn(this),r=_t(void 0),i;try{return e()}finally{Rn(t),_t(r)}}get(e,t=ci,r=re.Default){if(pa(this),e.hasOwnProperty(Hw))return e[Hw](this);r=Fl(r);let i,o=Rn(this),s=_t(void 0);try{if(!(r&re.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=xk(e)&&Ol(e);l&&this.injectableDefInScope(l)?c=yo(tg(e),tl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&re.Self?$g():this.parent;return t=r&re.Optional&&t===ci?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[cl]=a[cl]||[]).unshift(It(e)),o)throw a;return yk(a,e,"R3InjectorError",this.source)}else throw a}finally{_t(s),Rn(o)}}resolveInjectorInitializers(){let e=ce(null),t=Rn(this),r=_t(void 0),i;try{let o=this.get(ll,Bt,re.Self);for(let s of o)s()}finally{Rn(t),_t(r),ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(It(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ht(e);let t=wo(e)?e:ht(e&&e.provide),r=Pk(e);if(!wo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=yo(void 0,tl,!0),i.factory=()=>Xp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ce(null);try{return t.value===zw?MT(It(e)):t.value===tl&&(t.value=zw,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&kk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ce(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function tg(n){let e=Ol(n),t=e!==null?e.factory:li(n);if(t!==null)return t;if(n instanceof oe)throw new ie(204,!1);if(n instanceof Function)return Rk(n);throw new ie(204,!1)}function Rk(n){if(n.length>0)throw new ie(204,!1);let t=ik(n);return t!==null?()=>t.factory(n):()=>new n}function Pk(n){if($T(n))return yo(void 0,n.useValue);{let e=qT(n);return yo(e,tl)}}function qT(n,e,t){let r;if(wo(n)){let i=ht(n);return li(i)||tg(i)}else if($T(n))r=()=>ht(n.useValue);else if(Ak(n))r=()=>n.useFactory(...Xp(n.deps||[]));else if(Sk(n))r=(i,o)=>ft(ht(n.useExisting),o!==void 0&&o&re.Optional?re.Optional:void 0);else{let i=ht(n&&(n.useClass||n.provide));if(Mk(n))r=()=>new i(...Xp(n.deps));else return li(i)||tg(i)}return r}function pa(n){if(n.destroyed)throw new ie(205,!1)}function yo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Mk(n){return!!n.deps}function kk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function xk(n){return typeof n=="function"||typeof n=="object"&&n instanceof oe}function ng(n,e){for(let t of n)Array.isArray(t)?ng(t,e):t&&PT(t)?ng(t.\u0275providers,e):e(t)}function Mo(n,e){let t;n instanceof ya?(pa(n),t=n):t=new al(n);let r,i=Rn(t),o=_t(void 0);try{return e()}finally{Rn(i),_t(o)}}function zT(){return kT()!==void 0||ca()!=null}function Hg(n){if(!zT())throw new ie(-203,!1)}function Ok(n){return typeof n=="function"}var Mn=0,he=1,J=2,pt=3,Kt=4,Qt=5,hl=6,fl=7,Et=8,To=9,hr=10,Ke=11,va=12,Ww=13,ko=14,cn=15,Do=16,vo=17,bo=18,Ll=19,WT=20,lr=21,Vp=22,hi=23,Ut=24,jp=25,Nt=26,GT=1;var fi=7,pl=8,gl=9,$t=10;function dr(n){return Array.isArray(n)&&typeof n[GT]=="object"}function kn(n){return Array.isArray(n)&&n[GT]===!0}function qg(n){return(n.flags&4)!==0}function xo(n){return n.componentOffset>-1}function Vl(n){return(n.flags&1)===1}function un(n){return!!n.template}function ml(n){return(n[J]&512)!==0}function Oo(n){return(n[J]&256)===256}var rg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function KT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Fk=(()=>{let n=()=>QT;return n.ngInherit=!0,n})();function QT(n){return n.type.prototype.ngOnChanges&&(n.setInput=Vk),Lk}function Lk(){let n=ZT(this),e=n?.current;if(e){let t=n.previous;if(t===di)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Vk(n,e,t,r,i){let o=this.declaredInputs[r],s=ZT(n)||jk(n,{previous:di,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new rg(l&&l.currentValue,t,c===di),KT(n,e,i,t)}var YT="__ngSimpleChanges__";function ZT(n){return n[YT]||null}function jk(n,e){return n[YT]=e}var Gw=null;var we=function(n,e=null,t){Gw?.(n,e,t)},Bk="svg",Uk="math";function ln(n){for(;Array.isArray(n);)n=n[Mn];return n}function JT(n,e){return ln(e[n])}function xn(n,e){return ln(e[n.index])}function XT(n,e){return n.data[e]}function eD(n,e){return n[e]}function $k(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function dn(n,e){let t=e[n];return dr(t)?t:t[Mn]}function zg(n){return(n[J]&128)===128}function Hk(n){return kn(n[pt])}function Co(n,e){return e==null?null:n[e]}function tD(n){n[vo]=0}function nD(n){n[J]&1024||(n[J]|=1024,zg(n)&&Aa(n))}function qk(n,e){for(;n>0;)e=e[ko],n--;return e}function jl(n){return!!(n[J]&9216||n[Ut]?.dirty)}function ig(n){n[hr].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),jl(n)&&Aa(n)}function Aa(n){n[hr].changeDetectionScheduler?.notify(0);let e=pi(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!zg(e)));)e=pi(e)}function rD(n,e){if(Oo(n))throw new ie(911,!1);n[lr]===null&&(n[lr]=[]),n[lr].push(e)}function zk(n,e){if(n[lr]===null)return;let t=n[lr].indexOf(e);t!==-1&&n[lr].splice(t,1)}function pi(n){let e=n[pt];return kn(e)?e[pt]:e}function iD(n){return n[fl]??=[]}function oD(n){return n.cleanup??=[]}var ne={lFrame:pD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var og=!1;function Wk(){return ne.lFrame.elementDepthCount}function Gk(){ne.lFrame.elementDepthCount++}function Kk(){ne.lFrame.elementDepthCount--}function Wg(){return ne.bindingsEnabled}function Qk(){return ne.skipHydrationRootTNode!==null}function Yk(n){return ne.skipHydrationRootTNode===n}function Zk(){ne.skipHydrationRootTNode=null}function me(){return ne.lFrame.lView}function gt(){return ne.lFrame.tView}function Q8(n){return ne.lFrame.contextLView=n,n[Et]}function Y8(n){return ne.lFrame.contextLView=null,n}function Tt(){let n=sD();for(;n!==null&&n.type===64;)n=n.parent;return n}function sD(){return ne.lFrame.currentTNode}function Jk(){let n=ne.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ii(n,e){let t=ne.lFrame;t.currentTNode=n,t.isParent=e}function Gg(){return ne.lFrame.isParent}function aD(){ne.lFrame.isParent=!1}function Xk(){return ne.lFrame.contextLView}function cD(){return og}function yl(n){let e=og;return og=n,e}function uD(){let n=ne.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function lD(){return ne.lFrame.bindingIndex}function ex(n){return ne.lFrame.bindingIndex=n}function Kg(){return ne.lFrame.bindingIndex++}function Qg(n){let e=ne.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function tx(){return ne.lFrame.inI18n}function nx(n,e){let t=ne.lFrame;t.bindingIndex=t.bindingRootIndex=n,sg(e)}function rx(){return ne.lFrame.currentDirectiveIndex}function sg(n){ne.lFrame.currentDirectiveIndex=n}function ix(n){let e=ne.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function dD(n){ne.lFrame.currentQueryIndex=n}function ox(n){let e=n[he];return e.type===2?e.declTNode:e.type===1?n[Qt]:null}function hD(n,e,t){if(t&re.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&re.Host);)if(i=ox(o),i===null||(o=o[ko],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ne.lFrame=fD();return r.currentTNode=e,r.lView=n,!0}function Yg(n){let e=fD(),t=n[he];ne.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function fD(){let n=ne.lFrame,e=n===null?null:n.child;return e===null?pD(n):e}function pD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function gD(){let n=ne.lFrame;return ne.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var mD=gD;function Zg(){let n=gD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function sx(n){return(ne.lFrame.contextLView=qk(n,ne.lFrame.contextLView))[Et]}function fr(){return ne.lFrame.selectedIndex}function gi(n){ne.lFrame.selectedIndex=n}function yD(){let n=ne.lFrame;return XT(n.tView,n.selectedIndex)}function ax(){return ne.lFrame.currentNamespace}var vD=!0;function Bl(){return vD}function Ul(n){vD=n}function cx(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=QT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Jg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function nl(n,e,t){_D(n,e,3,t)}function rl(n,e,t,r){(n[J]&3)===t&&_D(n,e,t,r)}function Bp(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function _D(n,e,t,r){let i=r!==void 0?n[vo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[vo]+=65536),(a<o||o==-1)&&(ux(n,t,e,c),n[vo]=(n[vo]&4294901760)+c+2),c++}function Kw(n,e){we(4,n,e);let t=ce(null);try{e.call(n)}finally{ce(t),we(5,n,e)}}function ux(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[vo]>>16&&(n[J]&3)===e&&(n[J]+=16384,Kw(a,o)):Kw(a,o)}var Io=-1,mi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function lx(n){return(n.flags&8)!==0}function dx(n){return(n.flags&16)!==0}function hx(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];px(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function fx(n){return n===3||n===4||n===6}function px(n){return n.charCodeAt(0)===64}function So(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Qw(n,t,i,null,e[++r]):Qw(n,t,i,null,null))}}return n}function Qw(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function ID(n){return n!==Io}function vl(n){return n&32767}function gx(n){return n>>16}function _l(n,e){let t=gx(n),r=e;for(;t>0;)r=r[ko],t--;return r}var ag=!0;function Il(n){let e=ag;return ag=n,e}var mx=256,ED=mx-1,wD=5,yx=0,sn={};function vx(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ma)&&(r=t[ma]),r==null&&(r=t[ma]=yx++);let i=r&ED,o=1<<i;e.data[n+(i>>wD)]|=o}function El(n,e){let t=TD(n,e);if(t!==-1)return t;let r=e[he];r.firstCreatePass&&(n.injectorIndex=e.length,Up(r.data,n),Up(e,null),Up(r.blueprint,null));let i=Xg(n,e),o=n.injectorIndex;if(ID(i)){let s=vl(i),a=_l(i,e),c=a[he].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Up(n,e){n.push(0,0,0,0,0,0,0,0,e)}function TD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Xg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=AD(i),r===null)return Io;if(t++,i=i[ko],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Io}function cg(n,e,t){vx(n,e,t)}function DD(n,e,t){if(t&re.Optional||n!==void 0)return n;jg(e,"NodeInjector")}function bD(n,e,t,r){if(t&re.Optional&&r===void 0&&(r=null),(t&(re.Self|re.Host))===0){let i=n[To],o=_t(void 0);try{return i?i.get(e,r,t&re.Optional):xT(e,r,t&re.Optional)}finally{_t(o)}}return DD(r,e,t)}function CD(n,e,t,r=re.Default,i){if(n!==null){if(e[J]&2048&&!(r&re.Self)){let s=Tx(n,e,t,r,sn);if(s!==sn)return s}let o=SD(n,e,t,r,sn);if(o!==sn)return o}return bD(e,t,r,i)}function SD(n,e,t,r,i){let o=Ex(t);if(typeof o=="function"){if(!hD(e,n,r))return r&re.Host?DD(i,t,r):bD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&re.Optional))jg(t);else return s}finally{mD()}}else if(typeof o=="number"){let s=null,a=TD(n,e),c=Io,l=r&re.Host?e[cn][Qt]:null;for((a===-1||r&re.SkipSelf)&&(c=a===-1?Xg(n,e):e[a+8],c===Io||!Zw(r,!1)?a=-1:(s=e[he],a=vl(c),e=_l(c,e)));a!==-1;){let d=e[he];if(Yw(o,a,d.data)){let f=_x(a,e,t,s,r,l);if(f!==sn)return f}c=e[a+8],c!==Io&&Zw(r,e[he].data[a+8]===l)&&Yw(o,a,e)?(s=d,a=vl(c),e=_l(c,e)):a=-1}}return i}function _x(n,e,t,r,i,o){let s=e[he],a=s.data[n+8],c=r==null?xo(a)&&ag:r!=s&&(a.type&3)!==0,l=i&re.Host&&o===a,d=Ix(a,s,t,c,l);return d!==null?wl(e,s,d,a,i):sn}function Ix(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let m=f;m<g;m++){let w=s[m];if(m<c&&t===w||m>=c&&w.type===t)return m}if(i){let m=s[c];if(m&&un(m)&&m.type===t)return c}return null}function wl(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof mi){let a=o;a.resolving&&MT(lk(s[t]));let c=Il(a.canSeeViewProviders);a.resolving=!0;let l,d=a.injectImpl?_t(a.injectImpl):null,f=hD(n,r,re.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&cx(t,s[t],e)}finally{d!==null&&_t(d),Il(c),a.resolving=!1,mD()}}return o}function Ex(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ma)?n[ma]:void 0;return typeof e=="number"?e>=0?e&ED:wx:e}function Yw(n,e,t){let r=1<<n;return!!(t[e+(n>>wD)]&r)}function Zw(n,e){return!(n&re.Self)&&!(n&re.Host&&e)}var ui=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return CD(this._tNode,this._lView,e,Fl(r),t)}};function wx(){return new ui(Tt(),me())}function Z8(n){return Ca(()=>{let e=n.prototype.constructor,t=e[sl]||ug(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[sl]||ug(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ug(n){return AT(n)?()=>{let e=ug(ht(n));return e&&e()}:li(n)}function Tx(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!ml(s);){let a=SD(o,s,t,r|re.Self,sn);if(a!==sn)return a;let c=o.parent;if(!c){let l=s[WT];if(l){let d=l.get(t,sn,r);if(d!==sn)return d}c=AD(s),s=s[ko]}o=c}return i}function AD(n){let e=n[he],t=e.type;return t===2?e.declTNode:t===1?n[Qt]:null}function Jw(n,e=null,t=null,r){let i=ND(n,e,t,r);return i.resolveInjectorInitializers(),i}function ND(n,e=null,t=null,r,i=new Set){let o=[t||Bt,bk(n)];return r=r||(typeof n=="object"?void 0:It(n)),new ya(o,e||$g(),r||null,i)}var wt=class n{static THROW_IF_NOT_FOUND=ci;static NULL=new dl;static create(e,t){if(Array.isArray(e))return Jw({name:""},t,e,"");{let r=e.name??"";return Jw({name:r},e.parent,e.providers,r)}}static \u0275prov=De({token:n,providedIn:"any",factory:()=>ft(LT)});static __NG_ELEMENT_ID__=-1};var Dx=new oe("");Dx.__NG_ELEMENT_ID__=n=>{let e=Tt();if(e===null)throw new ie(204,!1);if(e.type&2)return e.value;if(n&re.Optional)return null;throw new ie(204,!1)};var RD=!1,$l=(()=>{class n{static __NG_ELEMENT_ID__=bx;static __NG_ENV_ID__=t=>t}return n})(),Tl=class extends $l{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Oo(t)?(e(),()=>{}):(rD(t,e),()=>zk(t,e))}};function bx(){return new Tl(me())}var yi=class{},PD=new oe("",{providedIn:"root",factory:()=>!1});var MD=new oe(""),kD=new oe(""),Na=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new ua(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=De({token:n,providedIn:"root",factory:()=>new n})}return n})(),Hl=(()=>{class n{internalPendingTasks=Q(Na);scheduler=Q(yi);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return v(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=De({token:n,providedIn:"root",factory:()=>new n})}return n})(),lg=class extends Pn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,zT()&&(this.destroyRef=Q($l,{optional:!0})??void 0,this.pendingTasks=Q(Na,{optional:!0})??void 0)}emit(e){let t=ce(null);try{super.next(e)}finally{ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ur=lg;function _a(...n){}function xD(n){let e,t;function r(){n=_a;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Xw(n){return queueMicrotask(()=>n()),()=>{n=_a}}var em="isAngularZone",Dl=em+"_ID",Cx=0,xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ur(!1);onMicrotaskEmpty=new ur(!1);onStable=new ur(!1);onError=new ur(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=RD}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Nx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(em)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Sx,_a,_a);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Sx={};function tm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ax(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){xD(()=>{n.callbackScheduled=!1,dg(n),n.isCheckStableRunning=!0,tm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),dg(n)}function Nx(n){let e=()=>{Ax(n)},t=Cx++;n._inner=n._inner.fork({name:"angular",properties:{[em]:!0,[Dl]:t,[Dl+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Rx(c))return r.invokeTask(o,s,a,c);try{return eT(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),tT(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return eT(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Px(c)&&e(),tT(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,dg(n),tm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function dg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function eT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tT(n){n._nesting--,tm(n)}var hg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ur;onMicrotaskEmpty=new ur;onStable=new ur;onError=new ur;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Rx(n){return OD(n,"__ignore_ng_zone__")}function Px(n){return OD(n,"__scheduler_tick__")}function OD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ao=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Mx=new oe("",{providedIn:"root",factory:()=>{let n=Q(xe),e=Q(Ao);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function nT(n,e){return bT(n,e)}function kx(n){return bT(DT,n)}var J8=(nT.required=kx,nT);function xx(){return ql(Tt(),me())}function ql(n,e){return new nm(xn(n,e))}var nm=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=xx}return n})();function Ox(n){return typeof n=="function"&&n[Vt]!==void 0}function Fx(n,e){let t=dp(n,e?.equal),r=t[Vt];return t.set=i=>aa(r,i),t.update=i=>hp(r,i),t.asReadonly=Lx.bind(t),t}function Lx(){let n=this[Vt];if(n.readonlyFn===void 0){let e=()=>this();e[Vt]=n,n.readonlyFn=e}return n.readonlyFn}function FD(n){return Ox(n)&&typeof n.set=="function"}function LD(n){return(n.flags&128)===128}var VD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(VD||{}),jD=new Map,Vx=0;function jx(){return Vx++}function Bx(n){jD.set(n[Ll],n)}function fg(n){jD.delete(n[Ll])}var rT="__ngContext__";function Fo(n,e){dr(e)?(n[rT]=e[Ll],Bx(e)):n[rT]=e}function BD(n){return $D(n[va])}function UD(n){return $D(n[Kt])}function $D(n){for(;n!==null&&!kn(n);)n=n[Kt];return n}var pg;function X8(n){pg=n}function Ux(){if(pg!==void 0)return pg;if(typeof document<"u")return document;throw new ie(210,!1)}var e5=new oe("",{providedIn:"root",factory:()=>$x}),$x="ng",Hx=new oe(""),HD=new oe("",{providedIn:"platform",factory:()=>"unknown"});var t5=new oe("",{providedIn:"root",factory:()=>Ux().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var qx="h",zx="b";var qD=!1,Wx=new oe("",{providedIn:"root",factory:()=>qD});var zD=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(zD||{}),WD=new oe(""),iT=new Set;function Gx(n){iT.has(n)||(iT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var GD=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Kx}return n})();function Kx(){return new GD(me(),Tt())}var Qx=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=De({token:n,providedIn:"root",factory:()=>new n})}return n})();var Yx=(n,e,t,r)=>{};function Zx(n,e,t,r){Yx(n,e,t,r)}var Jx=()=>null;function KD(n,e,t=!1){return Jx(n,e,t)}function QD(n,e){let t=n.contentQueries;if(t!==null){let r=ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];dD(o),a.contentQueries(2,e[s],s)}}}finally{ce(r)}}}function gg(n,e,t){dD(0);let r=ce(null);try{e(n,t)}finally{ce(r)}}function rm(n,e,t){if(qg(e)){let r=ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ce(r)}}}var Ia=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ia||{});var mg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ZM})`}};function Xx(n){return n instanceof mg?n.changingThisBreaksApplicationSecurity:n}var e1=/^>|^->|<!--|-->|--!>|<!-$/g,t1=/(<|>)/g,n1="\u200B$1\u200B";function r1(n){return n.replace(e1,e=>e.replace(t1,n1))}function YD(n){return n instanceof Function?n():n}function i1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var ZD="ng-template";function o1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&i1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(im(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function im(n){return n.type===4&&n.value!==ZD}function s1(n,e,t){let r=n.type===4&&!t?ZD:n.value;return e===r}function a1(n,e,t){let r=4,i=n.attrs,o=i!==null?l1(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Gt(r)&&!Gt(c))return!1;if(s&&Gt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!s1(n,c,t)||c===""&&e.length===1){if(Gt(r))return!1;s=!0}}else if(r&8){if(i===null||!o1(n,i,c,t)){if(Gt(r))return!1;s=!0}}else{let l=e[++a],d=c1(c,i,im(n),t);if(d===-1){if(Gt(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Gt(r))return!1;s=!0}}}}return Gt(r)||s}function Gt(n){return(n&1)===0}function c1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return d1(e,n)}function u1(n,e,t=!1){for(let r=0;r<e.length;r++)if(a1(n,e[r],t))return!0;return!1}function l1(n){for(let e=0;e<n.length;e++){let t=n[e];if(fx(t))return e}return n.length}function d1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function oT(n,e){return n?":not("+e.trim()+")":e}function h1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gt(s)&&(e+=oT(o,i),i=""),r=s,o=o||!Gt(r);t++}return i!==""&&(e+=oT(o,i)),e}function f1(n){return n.map(h1).join(",")}function p1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Gt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ht={};function g1(n,e){return n.createText(e)}function m1(n,e,t){n.setValue(e,t)}function y1(n,e){return n.createComment(r1(e))}function JD(n,e,t){return n.createElement(e,t)}function bl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function XD(n,e,t){n.appendChild(e,t)}function sT(n,e,t,r,i){r!==null?bl(n,e,t,r,i):XD(n,e,t)}function v1(n,e,t){n.removeChild(null,e,t)}function _1(n,e,t){n.setAttribute(e,"style",t)}function I1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function eb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&hx(n,e,r),i!==null&&I1(n,e,i),o!==null&&_1(n,e,o)}function om(n,e,t,r,i,o,s,a,c,l,d){let f=Nt+r,g=f+i,m=E1(f,g),w=typeof l=="function"?l():l;return m[he]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function E1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ht);return t}function w1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=om(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sm(n,e,t,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[Mn]=i,f[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(f[J]|=2048),tD(f),f[pt]=f[ko]=n,f[Et]=t,f[hr]=s||n&&n[hr],f[Ke]=a||n&&n[Ke],f[To]=c||n&&n[To]||null,f[Qt]=o,f[Ll]=jx(),f[hl]=d,f[WT]=l,f[cn]=e.type==2?n[cn]:f,f}function T1(n,e,t){let r=xn(e,n),i=w1(t),o=n[hr].rendererFactory,s=am(n,sm(n,i,null,tb(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function tb(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function nb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function am(n,e){return n[va]?n[Ww][Kt]=e:n[va]=e,n[Ww]=e,e}function n5(n=1){rb(gt(),me(),fr()+n,!1)}function rb(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&nl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&rl(e,o,0,t)}gi(t)}var zl=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(zl||{});function yg(n,e,t,r){let i=ce(null);try{let[o,s,a]=n.inputs[t],c=null;(s&zl.SignalBased)!==0&&(c=e[o][Vt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):KT(e,c,o,r)}finally{ce(i)}}function ib(n,e,t,r,i){let o=fr(),s=r&2;try{gi(-1),s&&e.length>Nt&&rb(n,e,Nt,!1),we(s?2:0,i),t(r,i)}finally{gi(o),we(s?3:1,i)}}function Wl(n,e,t){N1(n,e,t),(t.flags&64)===64&&R1(n,e,t)}function cm(n,e,t=xn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function D1(n,e,t,r){let o=r.get(Wx,qD)||t===Ia.ShadowDom,s=n.selectRootElement(e,o);return b1(s),s}function b1(n){C1(n)}var C1=()=>null;function S1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ob(n,e,t,r,i,o,s,a){if(!a&&lm(e,n,t,r,i)){xo(e)&&A1(t,e.index);return}if(e.type&3){let c=xn(e,t);r=S1(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function A1(n,e){let t=dn(e,n);t[J]&16||(t[J]|=64)}function N1(n,e,t){let r=t.directiveStart,i=t.directiveEnd;xo(t)&&T1(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||El(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=wl(e,n,s,t);if(Fo(c,e),o!==null&&M1(e,s-r,c,a,t,o),un(a)){let l=dn(t.index,e);l[Et]=wl(e,n,s,t)}}}function R1(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=rx();try{gi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];sg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&P1(c,l)}}finally{gi(-1),sg(s)}}function P1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function um(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];u1(e,o.selectors,!1)&&(r??=[],un(o)?r.unshift(o):r.push(o))}return r}function M1(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];yg(r,t,c,l)}}function k1(n,e){let t=n[To],r=t?t.get(Ao,null):null;r&&r.handleError(e)}function lm(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],d=s[c+1],f=e.data[l];yg(f,t[l],d,i),a=!0}if(o)for(let c of o){let l=t[c],d=e.data[c];yg(d,l,r,i),a=!0}return a}function x1(n,e){let t=dn(e,n),r=t[he];O1(r,t);let i=t[Mn];i!==null&&t[hl]===null&&(t[hl]=KD(i,t[To])),we(18),dm(r,t,t[Et]),we(19,t[Et])}function O1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function dm(n,e,t){Yg(e);try{let r=n.viewQuery;r!==null&&gg(1,r,t);let i=n.template;i!==null&&ib(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[bo]?.finishViewCreation(n),n.staticContentQueries&&QD(n,e),n.staticViewQueries&&gg(2,n.viewQuery,t);let o=n.components;o!==null&&F1(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,Zg()}}function F1(n,e){for(let t=0;t<e.length;t++)x1(n,e[t])}function L1(n,e,t,r){let i=ce(null);try{let o=e.tView,a=n[J]&4096?4096:16,c=sm(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Do]=l;let d=n[bo];return d!==null&&(c[bo]=d.createEmbeddedView(o)),dm(o,c,t),c}finally{ce(i)}}function aT(n,e){return!e||e.firstChild===null||LD(n)}var V1;function hm(n,e){return V1(n,e)}var Cl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Cl||{});function sb(n){return(n.flags&32)===32}function _o(n,e,t,r,i){if(r!=null){let o,s=!1;kn(r)?o=r:dr(r)&&(s=!0,r=r[Mn]);let a=ln(r);n===0&&t!==null?i==null?XD(e,t,a):bl(e,t,a,i||null,!0):n===1&&t!==null?bl(e,t,a,i||null,!0):n===2?v1(e,a,s):n===3&&e.destroyNode(a),o!=null&&Y1(e,n,o,t,i)}}function j1(n,e){ab(n,e),e[Mn]=null,e[Qt]=null}function B1(n,e,t,r,i,o){r[Mn]=i,r[Qt]=e,Kl(n,r,t,1,i,o)}function ab(n,e){e[hr].changeDetectionScheduler?.notify(9),Kl(n,e,e[Ke],2,null,null)}function U1(n){let e=n[va];if(!e)return $p(n[he],n);for(;e;){let t=null;if(dr(e))t=e[va];else{let r=e[$t];r&&(t=r)}if(!t){for(;e&&!e[Kt]&&e!==n;)dr(e)&&$p(e[he],e),e=e[pt];e===null&&(e=n),dr(e)&&$p(e[he],e),t=e&&e[Kt]}e=t}}function fm(n,e){let t=n[gl],r=t.indexOf(e);t.splice(r,1)}function cb(n,e){if(Oo(e))return;let t=e[Ke];t.destroyNode&&Kl(n,e,t,3,null,null),U1(e)}function $p(n,e){if(Oo(e))return;let t=ce(null);try{e[J]&=-129,e[J]|=256,e[Ut]&&sa(e[Ut]),H1(n,e),$1(n,e),e[he].type===1&&e[Ke].destroy();let r=e[Do];if(r!==null&&kn(e[pt])){r!==e[pt]&&fm(r,e);let i=e[bo];i!==null&&i.detachView(n)}fg(e)}finally{ce(t)}}function $1(n,e){let t=n.cleanup,r=e[fl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[fl]=null);let i=e[lr];if(i!==null){e[lr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[hi];if(o!==null){e[hi]=null;for(let s of o)s.destroy()}}function H1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof mi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];we(4,a,c);try{c.call(a)}finally{we(5,a,c)}}else{we(4,i,o);try{o.call(i)}finally{we(5,i,o)}}}}}function q1(n,e,t){return z1(n,e.parent,t)}function z1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Mn];if(xo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ia.None||i===Ia.Emulated)return null}return xn(r,t)}function W1(n,e,t){return K1(n,e,t)}function G1(n,e,t){return n.type&40?xn(n,t):null}var K1=G1,cT;function Gl(n,e,t,r){let i=q1(n,r,e),o=e[Ke],s=r.parent||e[Qt],a=W1(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)sT(o,i,t[c],a,!1);else sT(o,i,t,a,!1);cT!==void 0&&cT(o,r,e,t,i)}function ga(n,e){if(e!==null){let t=e.type;if(t&3)return xn(e,n);if(t&4)return vg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ga(n,r);{let i=n[e.index];return kn(i)?vg(-1,i):ln(i)}}else{if(t&128)return ga(n,e.next);if(t&32)return hm(e,n)()||ln(n[e.index]);{let r=ub(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=pi(n[cn]);return ga(i,r)}else return ga(n,e.next)}}}return null}function ub(n,e){if(e!==null){let r=n[cn][Qt],i=e.projection;return r.projection[i]}return null}function vg(n,e){let t=$t+n+1;if(t<e.length){let r=e[t],i=r[he].firstChild;if(i!==null)return ga(r,i)}return e[fi]}function pm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Fo(ln(a),r),t.flags|=2),!sb(t))if(c&8)pm(n,e,t.child,r,i,o,!1),_o(e,n,i,a,o);else if(c&32){let l=hm(t,r),d;for(;d=l();)_o(e,n,i,d,o);_o(e,n,i,a,o)}else c&16?Q1(n,e,r,t,i,o):_o(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Kl(n,e,t,r,i,o){pm(t,r,n.firstChild,e,i,o,!1)}function Q1(n,e,t,r,i,o){let s=t[cn],c=s[Qt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];_o(e,n,i,d,o)}else{let l=c,d=s[pt];LD(r)&&(l.flags|=128),pm(n,e,l,d,i,o,!0)}}function Y1(n,e,t,r,i){let o=t[fi],s=ln(t);o!==s&&_o(e,n,r,o,i);for(let a=$t;a<t.length;a++){let c=t[a];Kl(c[he],c,n,e,r,o)}}function Z1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Cl.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Cl.Important),n.setStyle(t,r,i,o))}}function Sl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ln(o)),kn(o)&&J1(o,r);let s=t.type;if(s&8)Sl(n,e,t.child,r);else if(s&32){let a=hm(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=ub(e,t);if(Array.isArray(a))r.push(...a);else{let c=pi(e[cn]);Sl(c[he],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function J1(n,e){for(let t=$t;t<n.length;t++){let r=n[t],i=r[he].firstChild;i!==null&&Sl(r[he],r,i,e)}n[fi]!==n[Mn]&&e.push(n[fi])}function lb(n){if(n[jp]!==null){for(let e of n[jp])e.impl.addSequence(e);n[jp].length=0}}var db=[];function X1(n){return n[Ut]??eO(n)}function eO(n){let e=db.pop()??Object.create(nO);return e.lView=n,e}function tO(n){n.lView[Ut]!==n&&(n.lView=null,db.push(n))}var nO=Xe(Je({},ao),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Aa(n.lView)},consumerOnSignalRead(){this.lView[Ut]=this}});function rO(n){let e=n[Ut]??Object.create(iO);return e.lView=n,e}var iO=Xe(Je({},ao),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=pi(n.lView);for(;e&&!hb(e[he]);)e=pi(e);e&&nD(e)},consumerOnSignalRead(){this.lView[Ut]=this}});function hb(n){return n.type!==2}function fb(n){if(n[hi]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[hi])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var oO=100;function pb(n,e=!0,t=0){let i=n[hr].rendererFactory,o=!1;o||i.begin?.();try{sO(n,t)}catch(s){throw e&&k1(n,s),s}finally{o||i.end?.()}}function sO(n,e){let t=cD();try{yl(!0),_g(n,e);let r=0;for(;jl(n);){if(r===oO)throw new ie(103,!1);r++,_g(n,1)}}finally{yl(t)}}function aO(n,e,t,r){if(Oo(e))return;let i=e[J],o=!1,s=!1;Yg(e);let a=!0,c=null,l=null;o||(hb(n)?(l=X1(e),c=oa(l)):op()===null?(a=!1,l=rO(e),c=oa(l)):e[Ut]&&(sa(e[Ut]),e[Ut]=null));try{tD(e),ex(n.bindingStartIndex),t!==null&&ib(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&nl(e,m,null)}else{let m=n.preOrderHooks;m!==null&&rl(e,m,0,null),Bp(e,0)}if(s||cO(e),fb(e),gb(e,0),n.contentQueries!==null&&QD(n,e),!o)if(d){let m=n.contentCheckHooks;m!==null&&nl(e,m)}else{let m=n.contentHooks;m!==null&&rl(e,m,1),Bp(e,1)}lO(n,e);let f=n.components;f!==null&&yb(e,f,0);let g=n.viewQuery;if(g!==null&&gg(2,g,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&nl(e,m)}else{let m=n.viewHooks;m!==null&&rl(e,m,2),Bp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Vp]){for(let m of e[Vp])m();e[Vp]=null}o||(lb(e),e[J]&=-73)}catch(d){throw o||Aa(e),d}finally{l!==null&&(yu(l,c),a&&tO(l)),Zg()}}function gb(n,e){for(let t=BD(n);t!==null;t=UD(t))for(let r=$t;r<t.length;r++){let i=t[r];mb(i,e)}}function cO(n){for(let e=BD(n);e!==null;e=UD(e)){if(!(e[J]&2))continue;let t=e[gl];for(let r=0;r<t.length;r++){let i=t[r];nD(i)}}}function uO(n,e,t){we(18);let r=dn(e,n);mb(r,t),we(19,r[Et])}function mb(n,e){zg(n)&&_g(n,e)}function _g(n,e){let r=n[he],i=n[J],o=n[Ut],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&vu(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)aO(r,n,r.template,n[Et]);else if(i&8192){fb(n),gb(n,1);let a=r.components;a!==null&&yb(n,a,1),lb(n)}}function yb(n,e,t){for(let r=0;r<e.length;r++)uO(n,e[r],t)}function lO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)gi(~i);else{let o=i,s=t[++r],a=t[++r];nx(s,o);let c=e[o];we(24,c),a(2,c),we(25,c)}}}finally{gi(-1)}}function gm(n,e){let t=cD()?64:1088;for(n[hr].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=pi(n);if(ml(n)&&!r)return n;n=r}return null}function vb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function dO(n,e,t,r=!0){let i=e[he];if(hO(i,e,n,t),r){let s=vg(t,n),a=e[Ke],c=a.parentNode(n[fi]);c!==null&&B1(i,n[Qt],a,e,c,s)}let o=e[hl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ig(n,e){if(n.length<=$t)return;let t=$t+e,r=n[t];if(r){let i=r[Do];i!==null&&i!==n&&fm(i,r),e>0&&(n[t-1][Kt]=r[Kt]);let o=ul(n,$t+e);j1(r[he],r);let s=o[bo];s!==null&&s.detachView(o[he]),r[pt]=null,r[Kt]=null,r[J]&=-129}return r}function hO(n,e,t,r){let i=$t+r,o=t.length;r>0&&(t[i-1][Kt]=e),r<o-$t?(e[Kt]=t[i],FT(t,$t+r,e)):(t.push(e),e[Kt]=null),e[pt]=t;let s=e[Do];s!==null&&t!==s&&_b(s,e);let a=e[bo];a!==null&&a.insertView(n),ig(e),e[J]|=128}function _b(n,e){let t=n[gl],r=e[pt];if(dr(r))n[J]|=2;else{let i=r[pt][cn];e[cn]!==i&&(n[J]|=2)}t===null?n[gl]=[e]:t.push(e)}var Ea=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[he];return Sl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Et]}set context(e){this._lView[Et]=e}get destroyed(){return Oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pt];if(kn(e)){let t=e[pl],r=t?t.indexOf(this):-1;r>-1&&(Ig(e,r),ul(t,r))}this._attachedToViewContainer=!1}cb(this._lView[he],this._lView)}onDestroy(e){rD(this._lView,e)}markForCheck(){gm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){ig(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,pb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ml(this._lView),t=this._lView[Do];t!==null&&!e&&fm(t,this._lView),ab(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let t=ml(this._lView),r=this._lView[Do];r!==null&&!t&&_b(r,this._lView),ig(this._lView)}};var Ql=(()=>{class n{static __NG_ELEMENT_ID__=gO}return n})(),fO=Ql,pO=class extends fO{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=L1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ea(i)}};function gO(){return Ib(Tt(),me())}function Ib(n,e){return n.type&4?new pO(e,n,ql(n,e)):null}function Yl(n,e,t,r,i){let o=n.data[e];if(o===null)o=mO(n,e,t,r,i),tx()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Jk();o.injectorIndex=s===null?-1:s.injectorIndex}return Ii(o,!0),o}function mO(n,e,t,r,i){let o=sD(),s=Gg(),a=s?o:o&&o.parent,c=n.data[e]=vO(n,a,t,e,r,i);return yO(n,c,o,s),c}function yO(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function vO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Qk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var o5=new RegExp(`^(\\d+)*(${zx}|${qx})*(.*)`);var _O=()=>null;function uT(n,e){return _O(n,e)}var IO=class{},Eb=class{},Eg=class{resolveComponentFactory(e){throw Error(`No component factory found for ${It(e)}.`)}},Zl=class{static NULL=new Eg},Al=class{},wb=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>EO()}return n})();function EO(){let n=me(),e=Tt(),t=dn(e.index,n);return(dr(t)?t:n)[Ke]}var wO=(()=>{class n{static \u0275prov=De({token:n,providedIn:"root",factory:()=>null})}return n})();var Hp={},wg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Fl(r);let i=this.injector.get(e,Hp,r);return i!==Hp||t===Hp?i:this.parentInjector.get(e,t,r)}};function Tg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=jw(i,a);else if(o==2){let c=a,l=e[++s];r=jw(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Dt(n,e=re.Default){let t=me();if(t===null)return ft(n,e);let r=Tt();return CD(r,t,ht(n),e)}function mm(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,l=null,d=DO(s);d===null?a=s:[a,c,l]=d,SO(n,e,t,a,o,c,l)}o!==null&&r!==null&&TO(t,r,o)}function TO(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ie(-301,!1);r.push(e[i],o)}}function DO(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&un(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,bO(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function bO(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function CO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function SO(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let g=0;g<a;g++){let m=r[g];!c&&un(m)&&(c=!0,CO(n,t,g)),cg(El(t,e),n,m.type)}kO(t,n.data.length,a);for(let g=0;g<a;g++){let m=r[g];m.providersResolver&&m.providersResolver(m)}let l=!1,d=!1,f=nb(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let m=r[g];if(t.mergedAttrs=So(t.mergedAttrs,m.hostAttrs),NO(n,t,e,f,m),MO(f,m,i),s!==null&&s.has(m)){let[R,P]=s.get(m);t.directiveToIndex.set(m.type,[f,R+t.directiveStart,P+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let w=m.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!d&&(w.ngOnChanges||w.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}AO(n,t,o)}function AO(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))lT(0,e,i,r),lT(1,e,i,r),hT(e,r,!1);else{let o=t.get(i);dT(0,e,o,r),dT(1,e,o,r),hT(e,r,!0)}}}function lT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Tb(e,o)}}function dT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Tb(e,s)}}function Tb(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function hT(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||im(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let d of l)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let d=0;d<l.length;d+=2)if(l[d]===e){s??=[],s.push(l[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function NO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=li(i.type,!0)),s=new mi(o,un(i),Dt);n.blueprint[r]=s,t[r]=s,RO(n,e,r,nb(n,t,i.hostVars,Ht),i)}function RO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;PO(s)!=a&&s.push(a),s.push(t,r,o)}}function PO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function MO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;un(e)&&(t[""]=n)}}function kO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Db(n,e,t,r,i,o,s,a){let c=e.consts,l=Co(c,s),d=Yl(e,n,2,r,l);return o&&mm(e,t,d,Co(c,a),i),d.mergedAttrs=So(d.mergedAttrs,d.attrs),d.attrs!==null&&Tg(d,d.attrs,!1),d.mergedAttrs!==null&&Tg(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function bb(n,e){Jg(n,e),qg(e)&&n.queries.elementEnd(e)}var Nl=class extends Zl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Eo(e);return new wa(t,this.ngModule)}};function xO(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&zl.SignalBased)!==0};return i&&(o.transform=i),o})}function OO(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function FO(n,e,t){let r=e instanceof an?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new wg(t,r):t}function LO(n){let e=n.get(Al,null);if(e===null)throw new ie(407,!1);let t=n.get(wO,null),r=n.get(yi,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function VO(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return JD(e,t,t==="svg"?Bk:t==="math"?Uk:null)}var wa=class extends Eb{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=xO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=OO(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=f1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){we(22);let o=ce(null);try{let s=this.componentDef,a=r?["ng-version","19.2.14"]:p1(this.componentDef.selectors[0]),c=om(0,null,null,1,0,null,null,null,null,[a],null),l=FO(s,i||this.ngModule,e),d=LO(l),f=d.rendererFactory.createRenderer(null,s),g=r?D1(f,r,s.encapsulation,l):VO(s,f),m=sm(null,c,null,512|tb(s),null,null,d,f,l,null,KD(g,l,!0));m[Nt]=g,Yg(m);let w=null;try{let R=Db(Nt,c,m,"#host",()=>[this.componentDef],!0,0);g&&(eb(f,g,R),Fo(g,m)),Wl(c,m,R),rm(c,R,m),bb(c,R),t!==void 0&&jO(R,this.ngContentSelectors,t),w=dn(R.index,m),m[Et]=w[Et],dm(c,m,null)}catch(R){throw w!==null&&fg(w),fg(m),R}finally{we(23),Zg()}return new Dg(this.componentType,m)}finally{ce(o)}}},Dg=class extends IO{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=XT(t[he],Nt),this.location=ql(this._tNode,t),this.instance=dn(this._tNode.index,t)[Et],this.hostView=this.changeDetectorRef=new Ea(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=lm(r,i[he],i,e,t);this.previousInputValues.set(e,t);let s=dn(r.index,i);gm(s,1)}get injector(){return new ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function jO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Jl=(()=>{class n{static __NG_ELEMENT_ID__=BO}return n})();function BO(){let n=Tt();return $O(n,me())}var UO=Jl,Cb=class extends UO{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ql(this._hostTNode,this._hostLView)}get injector(){return new ui(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xg(this._hostTNode,this._hostLView);if(ID(e)){let t=_l(e,this._hostLView),r=vl(e),i=t[he].data[r+8];return new ui(i,t)}else return new ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=fT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-$t}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=uT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,aT(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!Ok(e),a;if(s)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let c=s?e:new wa(Eo(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let R=(s?l:this.parentInjector).get(an,null);R&&(o=R)}let d=Eo(c.componentType??{}),f=uT(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(l,i,g,o);return this.insertImpl(m.hostView,a,aT(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Hk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[pt],l=new Cb(c,c[Qt],c[pt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return dO(s,i,o,r),e.attachToViewContainerRef(),FT(qp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=fT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ig(this._lContainer,t);r&&(ul(qp(this._lContainer),t),cb(r[he],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ig(this._lContainer,t);return r&&ul(qp(this._lContainer),t)!=null?new Ea(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function fT(n){return n[pl]}function qp(n){return n[pl]||(n[pl]=[])}function $O(n,e){let t,r=e[n.index];return kn(r)?t=r:(t=vb(r,e,null,n),e[n.index]=t,am(e,t)),qO(t,e,n,r),new Cb(t,n,e)}function HO(n,e){let t=n[Ke],r=t.createComment(""),i=xn(e,n),o=t.parentNode(i);return bl(t,o,r,t.nextSibling(i),!1),r}var qO=GO,zO=()=>!1;function WO(n,e,t){return zO(n,e,t)}function GO(n,e,t,r){if(n[fi])return;let i;t.type&8?i=ln(r):i=HO(e,t),n[fi]=i}var No=class{},KO=class{};var bg=class extends No{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Nl(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=jT(e);this._bootstrapComponents=YD(o.bootstrap),this._r3Injector=ND(e,t,[{provide:No,useValue:this},{provide:Zl,useValue:this.componentFactoryResolver},...r],It(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cg=class extends KO{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new bg(this.moduleType,e,[])}};var Rl=class extends No{injector;componentFactoryResolver=new Nl(this);instance=null;constructor(e){super();let t=new ya([...e.providers,{provide:No,useValue:this},{provide:Zl,useValue:this.componentFactoryResolver}],e.parent||$g(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function QO(n,e,t=null){return new Rl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var YO=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=BT(!1,t.type),i=r.length>0?QO([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=De({token:n,providedIn:"environment",factory:()=>new n(ft(an))})}return n})();function h5(n){return Ca(()=>{let e=Ab(n),t=Xe(Je({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===VD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(YO).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ia.Emulated,styles:n.styles||Bt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Gx("NgStandalone"),Nb(t);let r=n.dependencies;return t.directiveDefs=pT(r,!1),t.pipeDefs=pT(r,!0),t.id=tF(t),t})}function ZO(n){return Eo(n)||Tk(n)}function JO(n){return n!==null}function Xl(n){return Ca(()=>({type:n.type,bootstrap:n.bootstrap||Bt,declarations:n.declarations||Bt,imports:n.imports||Bt,exports:n.exports||Bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function XO(n,e){if(n==null)return di;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=zl.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function eF(n){if(n==null)return di;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ed(n){return Ca(()=>{let e=Ab(n);return Nb(e),e})}function Sb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ab(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||di,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:XO(n.inputs,e),outputs:eF(n.outputs),debugInfo:null}}function Nb(n){n.features?.forEach(e=>e(n))}function pT(n,e){if(!n)return null;let t=e?Dk:ZO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(JO)}function tF(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nF(n){return Object.getPrototypeOf(n.prototype).constructor}function rF(n){let e=nF(n.type),t=!0,r=[n];for(;e;){let i;if(un(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=zp(n.inputs),s.declaredInputs=zp(n.declaredInputs),s.outputs=zp(n.outputs);let a=i.hostBindings;a&&cF(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&sF(n,c),l&&aF(n,l),iF(n,i),nk(n.outputs,i.outputs),un(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===rF&&(t=!1)}}e=Object.getPrototypeOf(e)}oF(r)}function iF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function oF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=So(i.hostAttrs,t=So(t,i.hostAttrs))}}function zp(n){return n===di?{}:n===Bt?[]:n}function sF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function aF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function cF(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Rb(n){return lF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function uF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function lF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Pb(n,e,t){return n[e]=t}function dF(n,e){return n[e]}function vi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Mb(n,e,t,r){let i=vi(n,e,t);return vi(n,e+1,r)||i}function kb(n,e,t,r,i){let o=Mb(n,e,t,r);return vi(n,e+2,i)||o}function hF(n,e,t,r,i,o,s,a,c){let l=e.consts,d=Yl(e,n,4,s||null,a||null);Wg()&&mm(e,t,d,Co(l,c),um),d.mergedAttrs=So(d.mergedAttrs,d.attrs),Jg(e,d);let f=d.tView=om(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function fF(n,e,t,r,i,o,s,a,c,l){let d=t+Nt,f=e.firstCreatePass?hF(d,e,n,r,i,o,s,a,c):e.data[d];Ii(f,!1);let g=gF(e,n,f,t);Bl()&&Gl(e,n,g,f),Fo(g,n);let m=vb(g,n,g,f);return n[d]=m,am(n,m),WO(m,f,n),Vl(f)&&Wl(e,n,f),c!=null&&cm(n,f,l),f}function pF(n,e,t,r,i,o,s,a){let c=me(),l=gt(),d=Co(l.consts,o);return fF(c,l,n,e,t,r,i,d,s,a),pF}var gF=mF;function mF(n,e,t,r){return Ul(!0),e[Ke].createComment("")}var f5=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var yF=new oe("");var xb=(()=>{class n{static \u0275prov=De({token:n,providedIn:"root",factory:()=>new Sg})}return n})(),Sg=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function ym(n){return!!n&&typeof n.then=="function"}function Ob(n){return!!n&&typeof n.subscribe=="function"}var vF=new oe("");var Fb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Q(vF,{optional:!0})??[];injector=Q(wt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Mo(this.injector,i);if(ym(o))t.push(o);else if(Ob(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_F=new oe("");function IF(){lp(()=>{throw new ie(600,!1)})}function EF(n){return n.isBoundToModule}var wF=10;var Ta=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Q(Mx);afterRenderManager=Q(Qx);zonelessEnabled=Q(PD);rootEffectScheduler=Q(xb);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Pn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=Q(Na).hasPendingTasks.pipe(dt(t=>!t));constructor(){Q(WD,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Q(an);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=wt.NULL){we(10);let o=t instanceof Eb;if(!this._injector.get(Fb).done){let m="";throw new ie(405,m)}let a;o?a=t:a=this._injector.get(Zl).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=EF(a)?void 0:this._injector.get(No),l=r||a.selector,d=a.create(i,[],l,c),f=d.location.nativeElement,g=d.injector.get(yF,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),il(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),we(11,d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){we(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(zD.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ie(101,!1);let t=ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ce(t),this.afterTick.next(),we(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Al,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<wF;)we(14),this.synchronizeOnce(),we(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)TF(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>jl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;il(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(_F,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>il(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ie(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function il(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function TF(n,e,t,r){if(!t&&!jl(n))return;pb(n,e,t&&!r?0:1)}function DF(n,e,t,r){return vi(n,Kg(),t)?e+ai(t)+r:Ht}function bF(n,e,t,r,i,o){let s=lD(),a=Mb(n,s,t,i);return Qg(2),a?e+ai(t)+r+ai(i)+o:Ht}function CF(n,e,t,r,i,o,s,a){let c=lD(),l=kb(n,c,t,i,s);return Qg(3),l?e+ai(t)+r+ai(i)+o+ai(s)+a:Ht}function el(n,e){return n<<17|e<<2}function _i(n){return n>>17&32767}function SF(n){return(n&2)==2}function AF(n,e){return n&131071|e<<17}function Ag(n){return n|2}function Ro(n){return(n&131068)>>2}function Wp(n,e){return n&-131069|e<<2}function NF(n){return(n&1)===1}function Ng(n){return n|1}function RF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=_i(s),c=Ro(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Sa(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=_i(n[a+1]);n[r+1]=el(g,a),g!==0&&(n[g+1]=Wp(n[g+1],r)),n[a+1]=AF(n[a+1],r)}else n[r+1]=el(a,0),a!==0&&(n[a+1]=Wp(n[a+1],r)),a=r;else n[r+1]=el(c,0),a===0?a=r:n[c+1]=Wp(n[c+1],r),c=r;l&&(n[r+1]=Ag(n[r+1])),gT(n,d,r,!0),gT(n,d,r,!1),PF(e,d,n,r,o),s=el(a,c),o?e.classBindings=s:e.styleBindings=s}function PF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Sa(o,e)>=0&&(t[r+1]=Ng(t[r+1]))}function gT(n,e,t,r){let i=n[t+1],o=e===null,s=r?_i(i):Ro(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];MF(c,e)&&(a=!0,n[s+1]=r?Ng(l):Ag(l)),s=r?_i(l):Ro(l)}a&&(n[t+1]=r?Ag(i):Ng(i))}function MF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Sa(n,e)>=0:!1}function kF(n,e,t){let r=me(),i=Kg();if(vi(r,i,e)){let o=gt(),s=yD();ob(o,s,r,n,e,r[Ke],t,!1)}return kF}function mT(n,e,t,r,i){lm(e,n,t,i?"class":"style",r)}function xF(n,e,t){return Lb(n,e,t,!1),xF}function OF(n,e){return Lb(n,e,null,!0),OF}function Lb(n,e,t,r){let i=me(),o=gt(),s=Qg(2);if(o.firstUpdatePass&&LF(o,n,s,r),e!==Ht&&vi(i,s,e)){let a=o.data[fr()];$F(o,a,i,i[Ke],n,i[s+1]=HF(e,t),r,s)}}function FF(n,e){return e>=n.expandoStartIndex}function LF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[fr()],s=FF(n,t);qF(o,r)&&e===null&&!s&&(e=!1),e=VF(i,o,e,r),RF(i,o,e,t,s,r)}}function VF(n,e,t,r){let i=ix(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Gp(null,n,e,t,r),t=Da(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Gp(i,n,e,t,r),o===null){let c=jF(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Gp(null,n,e,c[1],r),c=Da(c,e.attrs,r),BF(n,e,r,c))}else o=UF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function jF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ro(r)!==0)return n[_i(r)]}function BF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[_i(i)]=r}function UF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Da(r,s,t)}return Da(r,e.attrs,t)}function Gp(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Da(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Da(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Ek(n,s,t?!0:e[++o]))}return n===void 0?null:n}function $F(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=NF(l)?yT(c,e,t,i,Ro(l),s):void 0;if(!Pl(d)){Pl(o)||SF(l)&&(o=yT(c,null,t,i,a,s));let f=JT(fr(),t);Z1(r,s,f,i,o)}}function yT(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Ht&&(g=f?Bt:void 0);let m=f?Fp(g,r):d===r?g:void 0;if(l&&!Pl(m)&&(m=Fp(c,r)),Pl(m)&&(a=m,s))return a;let w=n[i+1];i=s?_i(w):Ro(w)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Fp(c,r))}return a}function Pl(n){return n!==void 0}function HF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=It(Xx(n)))),n}function qF(n,e){return(n.flags&(e?8:16))!==0}function Vb(n,e,t,r){let i=me(),o=gt(),s=Nt+n,a=i[Ke],c=o.firstCreatePass?Db(s,o,i,e,um,Wg(),t,r):o.data[s],l=WF(o,i,c,a,e,n);i[s]=l;let d=Vl(c);return Ii(c,!0),eb(a,l,c),!sb(c)&&Bl()&&Gl(o,i,l,c),(Wk()===0||d)&&Fo(l,i),Gk(),d&&(Wl(o,i,c),rm(o,c,i)),r!==null&&cm(i,c),Vb}function jb(){let n=Tt();Gg()?aD():(n=n.parent,Ii(n,!1));let e=n;Yk(e)&&Zk(),Kk();let t=gt();return t.firstCreatePass&&bb(t,e),e.classesWithoutHost!=null&&lx(e)&&mT(t,e,me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&dx(e)&&mT(t,e,me(),e.stylesWithoutHost,!1),jb}function zF(n,e,t,r){return Vb(n,e,t,r),jb(),zF}var WF=(n,e,t,r,i,o)=>(Ul(!0),JD(r,i,ax()));function GF(n,e,t,r,i){let o=e.consts,s=Co(o,r),a=Yl(e,n,8,"ng-container",s);s!==null&&Tg(a,s,!0);let c=Co(o,i);return Wg()&&mm(e,t,a,c,um),a.mergedAttrs=So(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function KF(n,e,t){let r=me(),i=gt(),o=n+Nt,s=i.firstCreatePass?GF(o,i,r,e,t):i.data[o];Ii(s,!0);let a=YF(i,r,s,n);return r[o]=a,Bl()&&Gl(i,r,a,s),Fo(a,r),Vl(s)&&(Wl(i,r,s),rm(i,s,r)),t!=null&&cm(r,s),KF}function QF(){let n=Tt(),e=gt();return Gg()?aD():(n=n.parent,Ii(n,!1)),e.firstCreatePass&&(Jg(e,n),qg(n)&&e.queries.elementEnd(n)),QF}var YF=(n,e,t,r)=>(Ul(!0),y1(e[Ke],""));function p5(){return me()}var si=void 0;function ZF(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var JF=["en",[["a","p"],["AM","PM"],si],[["AM","PM"],si,si],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],si,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],si,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",si,"{1} 'at' {0}",si],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",ZF],Kp={};function td(n){let e=XF(n),t=vT(e);if(t)return t;let r=e.split("-")[0];if(t=vT(r),t)return t;if(r==="en")return JF;throw new ie(701,!1)}function vT(n){return n in Kp||(Kp[n]=Xu.ng&&Xu.ng.common&&Xu.ng.common.locales&&Xu.ng.common.locales[n]),Kp[n]}var Ei=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ei||{});function XF(n){return n.toLowerCase().replace(/_/g,"-")}var Ml="en-US",eL="USD";var tL=Ml;function nL(n){typeof n=="string"&&(tL=n.toLowerCase().replace(/_/g,"-"))}function _T(n,e,t){return function r(i){if(i===Function)return t;let o=xo(n)?dn(n.index,e):e;gm(o,5);let s=e[Et],a=IT(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=IT(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function IT(n,e,t,r){let i=ce(null);try{return we(6,e,t),t(r)!==!1}catch(o){return rL(n,o),!1}finally{we(7,e,t),ce(i)}}function rL(n,e){let t=n[To],r=t?t.get(Ao,null):null;r&&r.handleError(e)}function ET(n,e,t,r,i,o){let s=e[t],a=e[he],l=a.data[t].outputs[r],d=s[l],f=a.firstCreatePass?oD(a):null,g=iD(e),m=d.subscribe(o),w=g.length;g.push(o,m),f&&f.push(i,n.index,w,-(w+1))}function iL(n,e,t,r){let i=me(),o=gt(),s=Tt();return Bb(o,i,i[Ke],s,n,e,r),iL}function oL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[fl],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Bb(n,e,t,r,i,o,s){let a=Vl(r),l=n.firstCreatePass?oD(n):null,d=iD(e),f=!0;if(r.type&3||s){let g=xn(r,e),m=s?s(g):g,w=d.length,R=s?O=>s(ln(O[r.index])):r.index,P=null;if(!s&&a&&(P=oL(n,e,i,r.index)),P!==null){let O=P.__ngLastListenerFn__||P;O.__ngNextListenerFn__=o,P.__ngLastListenerFn__=o,f=!1}else{o=_T(r,e,o),Zx(e,m,i,o);let O=t.listen(m,i,o);d.push(o,O),l&&l.push(i,R,w,w+1)}}else o=_T(r,e,o);if(f){let g=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let w=0;w<m.length;w+=2){let R=m[w],P=m[w+1];ET(r,e,R,P,i,o)}if(g&&g.length)for(let w of g)ET(r,e,w,i,i,o)}}function g5(n=1){return sx(n)}function m5(n){let e=Xk();return eD(e,Nt+n)}function y5(n,e=""){let t=me(),r=gt(),i=n+Nt,o=r.firstCreatePass?Yl(r,i,1,e,null):r.data[i],s=sL(r,t,o,e,n);t[i]=s,Bl()&&Gl(r,t,s,o),Ii(o,!1)}var sL=(n,e,t,r,i)=>(Ul(!0),g1(e[Ke],r));function aL(n){return Ub("",n,""),aL}function Ub(n,e,t){let r=me(),i=DF(r,n,e,t);return i!==Ht&&vm(r,fr(),i),Ub}function cL(n,e,t,r,i){let o=me(),s=bF(o,n,e,t,r,i);return s!==Ht&&vm(o,fr(),s),cL}function uL(n,e,t,r,i,o,s){let a=me(),c=CF(a,n,e,t,r,i,o,s);return c!==Ht&&vm(a,fr(),c),uL}function vm(n,e,t){let r=JT(e,n);m1(n[Ke],r,t)}function lL(n,e,t){FD(e)&&(e=e());let r=me(),i=Kg();if(vi(r,i,e)){let o=gt(),s=yD();ob(o,s,r,n,e,r[Ke],t,!1)}return lL}function v5(n,e){let t=FD(n);return t&&n.set(e),t}function dL(n,e){let t=me(),r=gt(),i=Tt();return Bb(r,t,t[Ke],i,n,e),dL}function hL(n,e,t){let r=gt();if(r.firstCreatePass){let i=un(n);Rg(t,r.data,r.blueprint,i,!0),Rg(e,r.data,r.blueprint,i,!1)}}function Rg(n,e,t,r,i){if(n=ht(n),Array.isArray(n))for(let o=0;o<n.length;o++)Rg(n[o],e,t,r,i);else{let o=gt(),s=me(),a=Tt(),c=wo(n)?n:ht(n.provide),l=qT(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(wo(n)||!n.multi){let m=new mi(l,i,Dt),w=Yp(c,e,i?d:d+g,f);w===-1?(cg(El(a,s),o,c),Qp(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[w]=m,s[w]=m)}else{let m=Yp(c,e,d+g,f),w=Yp(c,e,d,d+g),R=m>=0&&t[m],P=w>=0&&t[w];if(i&&!P||!i&&!R){cg(El(a,s),o,c);let O=gL(i?pL:fL,t.length,i,r,l);!i&&P&&(t[w].providerFactory=O),Qp(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),s.push(O)}else{let O=$b(t[i?w:m],l,!i&&r);Qp(o,n,m>-1?m:w,O)}!i&&r&&P&&t[w].componentProviders++}}}function Qp(n,e,t,r){let i=wo(e),o=Nk(e);if(i||o){let c=(o?ht(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function $b(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Yp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function fL(n,e,t,r,i){return Pg(this.multi,[])}function pL(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=wl(r,r[he],this.providerFactory.index,i);s=c.slice(0,a),Pg(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Pg(o,s);return s}function Pg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function gL(n,e,t,r,i){let o=new mi(n,t,Dt);return o.multi=[],o.index=e,o.componentProviders=0,$b(o,i,r&&!t),o}function _5(n,e=[]){return t=>{t.providersResolver=(r,i)=>hL(r,i?i(n):n,e)}}function I5(n,e,t){let r=uD()+n,i=me();return i[r]===Ht?Pb(i,r,t?e.call(t):e()):dF(i,r)}function mL(n,e){let t=n[e];return t===Ht?void 0:t}function yL(n,e,t,r,i,o,s,a){let c=e+t;return kb(n,c,i,o,s)?Pb(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):mL(n,c+3)}function E5(n,e){let t=gt(),r,i=n+Nt;t.firstCreatePass?(r=vL(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=li(r.type,!0)),s,a=_t(Dt);try{let c=Il(!1),l=o();return Il(c),$k(t,me(),i,l),l}finally{_t(a)}}function vL(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function w5(n,e,t,r,i){let o=n+Nt,s=me(),a=eD(s,o);return _L(s,o)?yL(s,uD(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function _L(n,e){return n[he].data[e].pure}function T5(n,e){return Ib(n,e)}var ba=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Hb=new ba("19.2.14"),Mg=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},D5=(()=>{class n{compileModuleSync(t){return new Cg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=jT(t),o=YD(i.declarations).reduce((s,a)=>{let c=Eo(a);return c&&s.push(new wa(c)),s},[]);return new Mg(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var IL=(()=>{class n{zone=Q(xe);changeDetectionScheduler=Q(yi);applicationRef=Q(Ta);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new xe(Xe(Je({},wL()),{scheduleInRootZone:t})),[{provide:xe,useFactory:n},{provide:ll,multi:!0,useFactory:()=>{let r=Q(IL,{optional:!0});return()=>r.initialize()}},{provide:ll,multi:!0,useFactory:()=>{let r=Q(TL);return()=>{r.initialize()}}},e===!0?{provide:MD,useValue:!0}:[],{provide:kD,useValue:t??RD}]}function wL(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var TL=(()=>{class n{subscription=new je;initialized=!1;zone=Q(xe);pendingTasks=Q(Na);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var DL=(()=>{class n{appRef=Q(Ta);taskService=Q(Na);ngZone=Q(xe);zonelessEnabled=Q(PD);tracing=Q(WD,{optional:!0});disableScheduling=Q(MD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Dl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Q(kD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof hg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Xw:xD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Dl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Xw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bL(){return typeof $localize<"u"&&$localize.locale||Ml}var nd=new oe("",{providedIn:"root",factory:()=>Q(nd,re.Optional|re.SkipSelf)||bL()}),qb=new oe("",{providedIn:"root",factory:()=>eL});var kg=new oe(""),CL=new oe("");function fa(n){return!n.moduleRef}function SL(n){let e=fa(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xe);return t.run(()=>{fa(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Ao,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),fa(n)){let o=()=>e.destroy(),s=n.platformInjector.get(kg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(kg);s.add(o),n.moduleRef.onDestroy(()=>{il(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return NL(r,t,()=>{let o=e.get(Fb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(nd,Ml);if(nL(s||Ml),!e.get(CL,!0))return fa(n)?e.get(Ta):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(fa(n)){let c=e.get(Ta);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return AL(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function AL(n,e){let t=n.injector.get(Ta);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ie(-403,!1);e.push(n)}function NL(n,e,t){try{let r=t();return ym(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ol=null;function RL(n=[],e){return wt.create({name:e,providers:[{provide:HT,useValue:"platform"},{provide:kg,useValue:new Set([()=>ol=null])},...n]})}function PL(n=[]){if(ol)return ol;let e=RL(n);return ol=e,IF(),ML(e),e}function ML(n){let e=n.get(Hx,null);Mo(n,()=>{e?.forEach(t=>t())})}function _m(){return!1}var kL=(()=>{class n{static __NG_ELEMENT_ID__=xL}return n})();function xL(n){return OL(Tt(),me(),(n&16)===16)}function OL(n,e,t){if(xo(n)&&!t){let r=dn(n.index,e);return new Ea(r,r)}else if(n.type&175){let r=e[cn];return new Ea(r,e)}return null}var xg=class{constructor(){}supports(e){return Rb(e)}create(e){return new Og(e)}},FL=(n,e)=>e,Og=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||FL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<wT(r,i,o)?t:r,a=wT(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let m=g<o.length?o[g]:o[g]=0,w=m+g;d<=w&&w<l&&(o[g]=m+1)}let f=s.previousIndex;o[f]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Rb(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,uF(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Fg(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new kl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new kl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Fg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Lg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},kl=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Lg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function wT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function TT(){return new Im([new xg])}var Im=(()=>{class n{factories;static \u0275prov=De({token:n,providedIn:"root",factory:TT});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||TT()),deps:[[n,new _k,new Rt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ie(901,!1)}}return n})();function b5(n){we(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=PL(r),o=[EL({}),{provide:yi,useExisting:DL},...t||[]],s=new Rl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return SL({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{we(9)}}function C5(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function zb(n){return fp(n)}function LL(n,e){return up(n,e?.equal)}var Vg=class{[Vt];constructor(e){this[Vt]=e}destroy(){this[Vt].destroy()}};function Wb(n,e){!e?.injector&&Hg(Wb);let t=e?.injector??Q(wt),r=e?.manualCleanup!==!0?t.get($l):null,i,o=t.get(GD,null,{optional:!0}),s=t.get(yi);return o!==null&&!e?.forceRoot?(i=BL(o.view,s,n),r instanceof Tl&&r._lView===o.view&&(r=null)):i=UL(n,t.get(xb),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Vg(i)}var Gb=Xe(Je({},ao),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:_a,run(){if(this.dirty=!1,this.hasRun&&!vu(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=oa(this),t=yl(!1);try{this.maybeCleanup(),this.fn(n)}finally{yl(t),yu(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),VL=Xe(Je({},Gb),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){sa(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),jL=Xe(Je({},Gb),{consumerMarkedDirty(){this.view[J]|=8192,Aa(this.view),this.notifier.notify(13)},destroy(){sa(this),this.onDestroyFn(),this.maybeCleanup(),this.view[hi]?.delete(this)}});function BL(n,e,t){let r=Object.create(jL);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[hi]??=new Set,n[hi].add(r),r.consumerMarkedDirty(r),r}function UL(n,e,t){let r=Object.create(VL);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(12),r}var Kb=()=>{};var Zb=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},$L=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},id={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,m=l&63;c||(m=64,s||(g=64)),r.push(t[d],t[f],t[g],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Zb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):$L(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||f==null)throw new wm;let g=o<<2|a>>4;if(r.push(g),l!==64){let m=a<<4&240|l>>2;if(r.push(m),f!==64){let w=l<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},wm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},HL=function(n){let e=Zb(n);return id.encodeByteArray(e,!0)},Pa=function(n){return HL(n).replace(/\./g,"")},od=function(n){try{return id.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function sd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var qL=()=>sd().__FIREBASE_DEFAULTS__,zL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},WL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&od(n[1]);return e&&JSON.parse(e)},ad=()=>{try{return Kb()||qL()||zL()||WL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Dm=n=>{var e,t;return(t=(e=ad())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Jb=n=>{let e=Dm(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bm=()=>{var n;return(n=ad())===null||n===void 0?void 0:n.config},Cm=n=>{var e;return(e=ad())===null||e===void 0?void 0:e[`_${n}`]};var wi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function On(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ma(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function Xb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Pa(JSON.stringify(t)),Pa(JSON.stringify(s)),""].join(".")}var Ra={};function GL(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ra))Ra[e]?n.emulator.push(e):n.prod.push(e);return n}function KL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Qb=!1;function cd(n,e){if(typeof window>"u"||typeof document>"u"||!On(window.location.host)||Ra[n]===e||Ra[n]||Qb)return;Ra[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=GL().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Qb=!0,s()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){let g=KL(r),m=t("text"),w=document.getElementById(m)||document.createElement("span"),R=t("learnmore"),P=document.getElementById(R)||document.createElement("a"),O=t("preprendIcon"),B=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let U=g.element;a(U),d(P,R);let W=l();c(B,O),U.append(B,w,P,W),document.body.appendChild(U)}o?(w.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Oe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function tC(){var n;let e=(n=ad())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rC(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oC(){let n=Oe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Sm(){return!tC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Am(){return!tC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Lo(){try{return typeof indexedDB=="object"}catch{return!1}}function sC(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var QL="FirebaseError",Pt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=QL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}},Yt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?YL(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Pt(i,a,r)}};function YL(n,e){return n.replace(ZL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var ZL=/\{\$([^}]+)}/g;function aC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(Yb(o)&&Yb(s)){if(!bt(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Yb(n){return n!==null&&typeof n=="object"}function Vo(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cC(n,e){let t=new Tm(n,e);return t.subscribe.bind(t)}var Tm=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");JL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Em),i.error===void 0&&(i.error=Em),i.complete===void 0&&(i.complete=Em);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function JL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Em(){}var R5=4*60*60*1e3;function ge(n){return n&&n._delegate?n._delegate:n}var mt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ti="[DEFAULT]";var Nm=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new wi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eV(e))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ti){return this.instances.has(e)}getOptions(e=Ti){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ti){return this.component?this.component.multipleInstances?e:Ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function XL(n){return n===Ti?void 0:n}function eV(n){return n.instantiationMode==="EAGER"}var ud=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Nm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var tV=[],se=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(se||{}),nV={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},rV=se.INFO,iV={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},oV=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=iV[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},hn=class{constructor(e){this.name=e,this._logLevel=rV,this._logHandler=oV,this._userLogHandler=null,tV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}};var sV=(n,e)=>e.some(t=>n instanceof t),uC,lC;function aV(){return uC||(uC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cV(){return lC||(lC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var dC=new WeakMap,Pm=new WeakMap,hC=new WeakMap,Rm=new WeakMap,km=new WeakMap;function uV(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(fn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&dC.set(t,n)}).catch(()=>{}),km.set(e,n),e}function lV(n){if(Pm.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Pm.set(n,e)}var Mm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Pm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function fC(n){Mm=n(Mm)}function dV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(ld(this),e,...t);return hC.set(r,e.sort?e.sort():[e]),fn(r)}:cV().includes(n)?function(...e){return n.apply(ld(this),e),fn(dC.get(this))}:function(...e){return fn(n.apply(ld(this),e))}}function hV(n){return typeof n=="function"?dV(n):(n instanceof IDBTransaction&&lV(n),sV(n,aV())?new Proxy(n,Mm):n)}function fn(n){if(n instanceof IDBRequest)return uV(n);if(Rm.has(n))return Rm.get(n);let e=hV(n);return e!==n&&(Rm.set(n,e),km.set(e,n)),e}var ld=n=>km.get(n);function gC(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=fn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(fn(s.result),c.oldVersion,c.newVersion,fn(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var fV=["get","getKey","getAll","getAllKeys","count"],pV=["put","add","delete","clear"],xm=new Map;function pC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xm.get(e))return xm.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=pV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fV.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return xm.set(e,o),o}fC(n=>Xe(Je({},n),{get:(e,t,r)=>pC(e,t)||n.get(e,t,r),has:(e,t)=>!!pC(e,t)||n.has(e,t)}));var Fm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(gV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function gV(n){let e=n.getComponent();return e?.type==="VERSION"}var Lm="@firebase/app",mC="0.13.2";var Fn=new hn("@firebase/app"),mV="@firebase/app-compat",yV="@firebase/analytics-compat",vV="@firebase/analytics",_V="@firebase/app-check-compat",IV="@firebase/app-check",EV="@firebase/auth",wV="@firebase/auth-compat",TV="@firebase/database",DV="@firebase/data-connect",bV="@firebase/database-compat",CV="@firebase/functions",SV="@firebase/functions-compat",AV="@firebase/installations",NV="@firebase/installations-compat",RV="@firebase/messaging",PV="@firebase/messaging-compat",MV="@firebase/performance",kV="@firebase/performance-compat",xV="@firebase/remote-config",OV="@firebase/remote-config-compat",FV="@firebase/storage",LV="@firebase/storage-compat",VV="@firebase/firestore",jV="@firebase/ai",BV="@firebase/firestore-compat",UV="firebase",$V="11.10.0";var dd="[DEFAULT]",HV={[Lm]:"fire-core",[mV]:"fire-core-compat",[vV]:"fire-analytics",[yV]:"fire-analytics-compat",[IV]:"fire-app-check",[_V]:"fire-app-check-compat",[EV]:"fire-auth",[wV]:"fire-auth-compat",[TV]:"fire-rtdb",[DV]:"fire-data-connect",[bV]:"fire-rtdb-compat",[CV]:"fire-fn",[SV]:"fire-fn-compat",[AV]:"fire-iid",[NV]:"fire-iid-compat",[RV]:"fire-fcm",[PV]:"fire-fcm-compat",[MV]:"fire-perf",[kV]:"fire-perf-compat",[xV]:"fire-rc",[OV]:"fire-rc-compat",[FV]:"fire-gcs",[LV]:"fire-gcs-compat",[VV]:"fire-fst",[BV]:"fire-fst-compat",[jV]:"fire-vertex","fire-js":"fire-js",[UV]:"fire-js-all"};var ka=new Map,qV=new Map,Vm=new Map;function yC(n,e){try{n.container.addComponent(e)}catch(t){Fn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zt(n){let e=n.name;if(Vm.has(e))return Fn.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,n);for(let t of ka.values())yC(t,n);for(let t of qV.values())yC(t,n);return!0}function gr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function EC(n,e,t=dd){gr(n,e).clearInstance(t)}function Mt(n){return n==null?!1:n.settings!==void 0}var zV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new Yt("app","Firebase",zV);var jm=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}};var mr=$V;function $m(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:dd,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw pr.create("bad-app-name",{appName:String(i)});if(t||(t=bm()),!t)throw pr.create("no-options");let o=ka.get(i);if(o){if(bt(t,o.options)&&bt(r,o.config))return o;throw pr.create("duplicate-app",{appName:i})}let s=new ud(i);for(let c of Vm.values())s.addComponent(c);let a=new jm(t,r,s);return ka.set(i,a),a}function yr(n=dd){let e=ka.get(n);if(!e&&n===dd&&bm())return $m();if(!e)throw pr.create("no-app",{appName:n});return e}function hd(){return Array.from(ka.values())}function Ne(n,e,t){var r;let i=(r=HV[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fn.warn(a.join(" "));return}Zt(new mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var WV="firebase-heartbeat-database",GV=1,xa="firebase-heartbeat-store",Om=null;function wC(){return Om||(Om=gC(WV,GV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xa)}catch(t){console.warn(t)}}}}).catch(n=>{throw pr.create("idb-open",{originalErrorMessage:n.message})})),Om}function KV(n){return v(this,null,function*(){try{let t=(yield wC()).transaction(xa),r=yield t.objectStore(xa).get(TC(n));return yield t.done,r}catch(e){if(e instanceof Pt)Fn.warn(e.message);else{let t=pr.create("idb-get",{originalErrorMessage:e?.message});Fn.warn(t.message)}}})}function vC(n,e){return v(this,null,function*(){try{let r=(yield wC()).transaction(xa,"readwrite");yield r.objectStore(xa).put(e,TC(n)),yield r.done}catch(t){if(t instanceof Pt)Fn.warn(t.message);else{let r=pr.create("idb-set",{originalErrorMessage:t?.message});Fn.warn(r.message)}}})}function TC(n){return`${n.name}!${n.options.appId}`}var QV=1024,YV=30,Bm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Um(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=_C();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>YV){let s=JV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fn.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=_C(),{heartbeatsToSend:r,unsentEntries:i}=ZV(this._heartbeatsCache.heartbeats),o=Pa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Fn.warn(t),""}})}};function _C(){return new Date().toISOString().substring(0,10)}function ZV(n,e=QV){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),IC(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),IC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Um=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Lo()?sC().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield KV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return vC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return vC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function IC(n){return Pa(JSON.stringify({version:2,heartbeats:n})).length}function JV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function XV(n){Zt(new mt("platform-logger",e=>new Fm(e),"PRIVATE")),Zt(new mt("heartbeat",e=>new Bm(e),"PRIVATE")),Ne(Lm,mC,n),Ne(Lm,mC,"esm2017"),Ne("fire-js","")}XV("");var e2="firebase",t2="11.10.0";Ne(e2,t2,"app");function Hm(n){n===void 0&&(Hg(Hm),n=Q(wt));let e=n.get(Hl);return t=>new ee(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Ln=new ba("ANGULARFIRE2_VERSION");function Oa(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var bi=(n,e)=>{let t=e?[e]:hd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},jo=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(jo||{}),DC=_m()&&typeof Zone<"u"?jo.WARN:jo.SILENT;var fd=class{zone;delegate;constructor(e,t=Sp){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},vr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Q(xe);this.outsideAngular=t.runOutsideAngular(()=>new fd(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new fd(typeof Zone>"u"?void 0:Zone.current,Ru))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bC=!1;function n2(n,e){!bC&&(DC>jo.SILENT||_m())&&(bC=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),DC>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function r2(n){let e=Q(xe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Di(n){let e=Q(xe,{optional:!0});return e?e.run(()=>n()):n()}var i2=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Mo(t,()=>Di(()=>n.apply(void 0,r)))),j=(n,e,t)=>(t||=e?jo.WARN:jo.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=Q(vr),s=Q(Hl),a=Q(an)}catch{return n2(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Di(()=>s.add())),i[l]=i2(i[l],r,a));let c=r2(()=>n.apply(this,i));return e?c instanceof ee?c.pipe(ar(o.outsideAngular),sr(o.insideAngular),Hm(a)):c instanceof Promise?Di(()=>{let l=s.add();return new Promise((d,f)=>{c.then(g=>Mo(a,()=>Di(()=>d(g))),g=>Mo(a,()=>Di(()=>f(g)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Di(()=>c):c instanceof ee?c.pipe(ar(o.outsideAngular),sr(o.insideAngular)):Di(()=>c)});var Vn=class{constructor(e){return e}},Ci=class{constructor(){return hd()}};function o2(n){return n&&n.length===1?n[0]:new Vn(yr())}var qm=new oe("angularfire2._apps"),s2={provide:Vn,useFactory:o2,deps:[[new Rt,qm]]},a2={provide:Ci,deps:[[new Rt,qm]]};function c2(n){return(e,t)=>{let r=t.get(HD);Ne("angularfire",Ln.full,"core"),Ne("angularfire",Ln.full,"app"),Ne("angular",Hb.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Vn(i)}}function SW(n,...e){return Po([s2,a2,{provide:qm,useFactory:c2(n),multi:!0,deps:[xe,wt,vr,...e]}])}var AW=j(yr,!0);var NW=j($m,!0);var pd=new oe("");var AC=null;function gd(){return AC}function u2(n){AC??=n}var zm=class{},Wm=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:()=>Q(NC),providedIn:"platform"})}return n})();var NC=(()=>{class n extends Wm{_location;_history;_doc=Q(pd);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gd().getBaseHref(this._doc)}onPopState(t){let r=gd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=gd().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function RC(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function CC(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function _r(n){return n&&n[0]!=="?"?`?${n}`:n}var md=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=De({token:n,factory:()=>Q(MC),providedIn:"root"})}return n})(),PC=new oe(""),MC=(()=>{class n extends md{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Q(pd).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return RC(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+_r(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+_r(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+_r(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ft(Wm),ft(PC,8))};static \u0275prov=De({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kC=(()=>{class n{_subject=new Pn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=h2(CC(SC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+_r(r))}normalize(t){return n.stripTrailingSlash(d2(this._basePath,SC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_r(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+_r(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=_r;static joinWithSlash=RC;static stripTrailingSlash=CC;static \u0275fac=function(r){return new(r||n)(ft(md))};static \u0275prov=De({token:n,factory:()=>l2(),providedIn:"root"})}return n})();function l2(){return new kC(ft(md))}function d2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SC(n){return n.replace(/\/index.html$/,"")}function h2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var jC={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Ym=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Ym||{});var pn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Bo(n,e){let t=td(n),r=t[Ei.NumberSymbols][e];if(typeof r>"u"){if(e===pn.CurrencyDecimal)return t[Ei.NumberSymbols][pn.Decimal];if(e===pn.CurrencyGroup)return t[Ei.NumberSymbols][pn.Group]}return r}function BC(n,e){return td(n)[Ei.NumberFormats][e]}function f2(n){return td(n)[Ei.Currencies]}function UC(n,e,t="en"){let r=f2(t)[n]||jC[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var p2=2;function $C(n){let e,t=jC[n];return t&&(e=t[2]),typeof e=="number"?e:p2}var g2=/^(\d+)?\.((\d+)(-(\d+))?)?$/,xC=22,yd=".",Fa="0",m2=";",y2=",",Gm="#",OC="\xA4";function v2(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=Bo(t,pn.Infinity);else{let l=E2(n);s&&(l=I2(l));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(o){let B=o.match(g2);if(B===null)throw new Error(`${o} is not a valid digit info`);let U=B[1],W=B[3],de=B[5];U!=null&&(d=Km(U)),W!=null&&(f=Km(W)),de!=null?g=Km(de):W!=null&&f>g&&(g=f)}w2(l,f,g);let m=l.digits,w=l.integerLen,R=l.exponent,P=[];for(c=m.every(B=>!B);w<d;w++)m.unshift(0);for(;w<0;w++)m.unshift(0);w>0?P=m.splice(w,m.length):(P=m,m=[0]);let O=[];for(m.length>=e.lgSize&&O.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)O.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&O.unshift(m.join("")),a=O.join(Bo(t,r)),P.length&&(a+=Bo(t,i)+P.join("")),R&&(a+=Bo(t,pn.Exponential)+"+"+R)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function HC(n,e,t,r,i){let o=BC(e,Ym.Currency),s=_2(o,Bo(e,pn.MinusSign));return s.minFrac=$C(r),s.maxFrac=s.minFrac,v2(n,s,e,pn.CurrencyGroup,pn.CurrencyDecimal,i).replace(OC,t).replace(OC,"").trim()}function _2(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(m2),i=r[0],o=r[1],s=i.indexOf(yd)!==-1?i.split(yd):[i.substring(0,i.lastIndexOf(Fa)+1),i.substring(i.lastIndexOf(Fa)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(Gm));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===Fa?t.minFrac=t.maxFrac=d+1:f===Gm?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(y2);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(Gm);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function I2(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function E2(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(yd))>-1&&(e=e.replace(yd,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Fa;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Fa;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>xC&&(r=r.splice(0,xC-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function w2(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,d=r.reduceRight(function(f,g,m,w){return g=g+f,w[m]=g<10?g:g-10,c&&(w[m]===0&&m>=l?w.pop():c=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function Km(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var Qm=/\s+/,FC=[],T2=(()=>{class n{_ngEl;_renderer;initialClasses=FC;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Qm):FC}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Qm):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Qm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Dt(nm),Dt(wb))};static \u0275dir=ed({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var vd=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qC=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new vd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),LC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);LC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Dt(Jl),Dt(Ql),Dt(Im))};static \u0275dir=ed({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function LC(n,e){n.context.$implicit=e.item}var D2=(()=>{class n{_viewContainer;_context=new _d;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){VC(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){VC(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Dt(Jl),Dt(Ql))};static \u0275dir=ed({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),_d=class{$implicit=null;ngIf=null};function VC(n,e){if(n&&!n.createEmbeddedView)throw new ie(2020,!1)}function b2(n,e){return new ie(2100,!1)}var C2=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!S2(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=UC(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=A2(t);return HC(c,s,a,r,o)}catch(c){throw b2(n,c.message)}}static \u0275fac=function(r){return new(r||n)(Dt(nd,16),Dt(qb,16))};static \u0275pipe=Sb({name:"currency",type:n,pure:!0})}return n})();function S2(n){return!(n==null||n===""||n!==n)}function A2(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var N2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xl({type:n});static \u0275inj=xl({})}return n})();function R2(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var P2="browser",zC="server";function M2(n){return n===zC}var Zm=class{};var k2=new Map,x2={activated:!1,tokenObservers:[]},O2={initialized:!1,enabled:!1};function Jt(n){return k2.get(n)||Object.assign({},x2)}function QC(){return O2}var F2="https://content-firebaseappcheck.googleapis.com/v1";var L2="exchangeDebugToken",WC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},p7=24*60*60*1e3;var ey=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new wi,this.pending.promise.catch(t=>{}),yield V2(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new wi,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function V2(n){return new Promise(e=>{setTimeout(e,n)})}var j2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ir=new Yt("appCheck","AppCheck",j2);function YC(n){if(!Jt(n).activated)throw Ir.create("use-before-activation",{appName:n.name})}function ZC(r,i){return v(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(m){throw Ir.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Ir.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw Ir.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ir.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function JC(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${F2}/projects/${t}/apps/${r}:${L2}?key=${i}`,body:{debug_token:e}}}var B2="firebase-app-check-database",U2=1,ty="firebase-app-check-store";var Id=null;function $2(){return Id||(Id=new Promise((n,e)=>{try{let t=indexedDB.open(B2,U2);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ir.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ty,{keyPath:"compositeKey"})}}}catch(t){e(Ir.create("storage-open",{originalErrorMessage:t?.message}))}}),Id)}function H2(n,e){return q2(z2(n),e)}function q2(n,e){return v(this,null,function*(){let r=(yield $2()).transaction(ty,"readwrite"),o=r.objectStore(ty).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Ir.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function z2(n){return`${n.options.appId}-${n.name}`}var La=new hn("@firebase/app-check");function Jm(n,e){return Lo()?H2(n,e).catch(t=>{La.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function XC(){return QC().enabled}function eS(){return v(this,null,function*(){let n=QC();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var W2={error:"UNKNOWN_ERROR"};function G2(n){return id.encodeString(JSON.stringify(n),!1)}function ny(n,e=!1,t=!1){return v(this,null,function*(){let r=n.app;YC(r);let i=Jt(r),o=i.token,s;if(o&&!Va(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Va(l)?o=l:yield Jm(r,void 0))}if(!e&&o&&Va(o))return{token:o.token};let a=!1;if(XC())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=ZC(JC(r,yield eS()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Jm(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?La.warn(l.message):t&&La.error(l),Xm(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Jt(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?La.warn(l.message):t&&La.error(l),s=l}let c;return o?s?Va(o)?c={token:o.token,internalError:s}:c=Xm(s):(c={token:o.token},i.token=o,yield Jm(r,o)):c=Xm(s),a&&Z2(r,c),c})}function K2(n){return v(this,null,function*(){let e=n.app;YC(e);let{provider:t}=Jt(e);if(XC()){let r=yield eS(),{token:i}=yield ZC(JC(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Q2(n,e,t,r){let{app:i}=n,o=Jt(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Va(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),GC(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>GC(n))}function tS(n,e){let t=Jt(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function GC(n){let{app:e}=n,t=Jt(e),r=t.tokenRefresher;r||(r=Y2(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Y2(n){let{app:e}=n;return new ey(()=>v(null,null,function*(){let t=Jt(e),r;if(t.token?r=yield ny(n,!0):r=yield ny(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Jt(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},WC.RETRIAL_MIN_WAIT,WC.RETRIAL_MAX_WAIT)}function Z2(n,e){let t=Jt(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Va(n){return n.expireTimeMillis-Date.now()>0}function Xm(n){return{token:G2(W2),error:n}}var ry=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Jt(this.app);for(let t of e)tS(this.app,t.next);return Promise.resolve()}};function J2(n,e){return new ry(n,e)}function X2(n){return{getToken:e=>ny(n,e),getLimitedUseToken:()=>K2(n),addTokenListener:e=>Q2(n,"INTERNAL",e),removeTokenListener:e=>tS(n.app,e)}}var ej="@firebase/app-check",tj="0.10.1";var nj="app-check",KC="app-check-internal";function rj(){Zt(new mt(nj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return J2(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(KC).initialize()})),Zt(new mt(KC,n=>{let e=n.getProvider("app-check").getImmediate();return X2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ne(ej,tj)}rj();var ij="app-check";var Uo=class{constructor(){return bi(ij)}};var oj=["localhost","0.0.0.0","127.0.0.1"],S7=typeof window<"u"&&oj.includes(window.location.hostname);function mS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var yS=mS,vS=new Yt("auth","Firebase",mS());var Cd=new hn("@firebase/auth");function sj(n,...e){Cd.logLevel<=se.WARN&&Cd.warn(`Auth (${mr}): ${n}`,...e)}function wd(n,...e){Cd.logLevel<=se.ERROR&&Cd.error(`Auth (${mr}): ${n}`,...e)}function mn(n,...e){throw Ey(n,...e)}function Xt(n,...e){return Ey(n,...e)}function Iy(n,e,t){let r=Object.assign(Object.assign({},yS()),{[e]:t});return new Yt("auth","Firebase",r).create(e,{appName:n.name})}function Si(n){return Iy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aj(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&mn(n,"argument-error"),Iy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ey(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vS.create(n,...e)}function G(n,e,...t){if(!n)throw Ey(e,...t)}function jn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw wd(e),new Error(e)}function Un(n,e){n||jn(e)}function sy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function cj(){return nS()==="http:"||nS()==="https:"}function nS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function uj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cj()||rC()||"connection"in navigator)?navigator.onLine:!0}function lj(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ai=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Un(t>e,"Short delay should be less than long delay!"),this.isMobile=eC()||iC()}get(){return uj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function wy(n,e){Un(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Sd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var dj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var hj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fj=new Ai(3e4,6e4);function Ty(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ho(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){return _S(n,i,()=>v(null,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=Vo(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:g},l);return nC()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&On(n.emulatorConfig.host)&&(m.credentials="include"),Sd.fetch()(yield IS(n,n.config.apiHost,t,f),m)}))})}function _S(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},dj),e);try{let i=new ay(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Ed(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Ed(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Ed(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Iy(n,d,l);mn(n,d)}}catch(i){if(i instanceof Pt)throw i;mn(n,"network-request-failed",{message:String(i)})}})}function pj(o,s,a,c){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Ho(n,e,t,r,i);return"mfaPendingCredential"in l&&mn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function IS(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?wy(n.config,i):`${n.config.apiScheme}://${i}`;return hj.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var ay=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xt(this.auth,"network-request-failed")),fj.get())})}};function Ed(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Xt(n,e,r);return i.customData._tokenResponse=t,i}function gj(n,e){return v(this,null,function*(){return Ho(n,"POST","/v1/accounts:delete",e)})}function Ad(n,e){return v(this,null,function*(){return Ho(n,"POST","/v1/accounts:lookup",e)})}function ja(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Dy(n,e=!1){return v(this,null,function*(){let t=ge(n),r=yield t.getIdToken(e),i=by(r);G(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ja(iy(i.auth_time)),issuedAtTime:ja(iy(i.iat)),expirationTime:ja(iy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function iy(n){return Number(n)*1e3}function by(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{let i=od(t);return i?JSON.parse(i):(wd("Failed to decode base64 JWT payload"),null)}catch(i){return wd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rS(n){let e=by(n);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ua(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Pt&&mj(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function mj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var cy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var $a=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ja(this.lastLoginAt),this.creationTime=ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Nd(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ua(n,Ad(t,{idToken:r}));G(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?ES(o.providerUserInfo):[],a=yj(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,d=c?l:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new $a(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function Cy(n){return v(this,null,function*(){let e=ge(n);yield Nd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function yj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ES(n){return n.map(e=>{var{providerId:t}=e,r=Ou(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function vj(n,e){return v(this,null,function*(){let t=yield _S(n,{},()=>v(null,null,function*(){let r=Vo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield IS(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&On(n.emulatorConfig.host)&&(c.credentials="include"),Sd.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function _j(n,e){return v(this,null,function*(){return Ho(n,"POST","/v2/accounts:revokeToken",Ty(n,e))})}var Ba=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){G(e.length!==0,"internal-error");let t=rS(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield vj(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(G(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(G(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return jn("not implemented")}};function Er(n,e){G(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var wr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ou(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $a(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Ua(this,this.stsTokenManager.getToken(this.auth,e));return G(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Dy(this,e)}reload(){return Cy(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Nd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Mt(this.auth.app))return Promise.reject(Si(this.auth));let e=yield this.getIdToken();return yield Ua(this,gj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=t.photoURL)!==null&&s!==void 0?s:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,P=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,B=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:U,emailVerified:W,isAnonymous:de,providerData:K,stsTokenManager:T}=t;G(U&&T,e,"internal-error");let _=Ba.fromJSON(this.name,T);G(typeof U=="string",e,"internal-error"),Er(f,e.name),Er(g,e.name),G(typeof W=="boolean",e,"internal-error"),G(typeof de=="boolean",e,"internal-error"),Er(m,e.name),Er(w,e.name),Er(R,e.name),Er(P,e.name),Er(O,e.name),Er(B,e.name);let E=new n({uid:U,auth:e,email:g,emailVerified:W,displayName:f,isAnonymous:de,photoURL:w,phoneNumber:m,tenantId:R,stsTokenManager:_,createdAt:O,lastLoginAt:B});return K&&Array.isArray(K)&&(E.providerData=K.map(D=>Object.assign({},D))),P&&(E._redirectEventId=P),E}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Ba;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Nd(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];G(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?ES(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ba;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $a(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var iS=new Map;function Bn(n){Un(n instanceof Function,"Expected a class definition");let e=iS.get(n);return e?(Un(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iS.set(n,e),e)}var Ij=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),uy=Ij;function Td(n,e,t){return`firebase:${n}:${e}:${t}`}var Rd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Td(this.userKey,i.apiKey,o),this.fullPersistenceKey=Td("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ad(this.auth,{idToken:e}).catch(()=>{});return t?wr._fromGetAccountInfoResponse(this.auth,t,e):null}return wr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Bn(uy),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Bn(uy),s=Td(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(s);if(d){let f;if(typeof d=="string"){let g=yield Ad(e,{idToken:d}).catch(()=>{});if(!g)break;f=yield wr._fromGetAccountInfoResponse(e,g,d)}else f=wr._fromJSON(e,d);l!==o&&(a=f),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function oS(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SS(e))return"Blackberry";if(AS(e))return"Webos";if(TS(e))return"Safari";if((e.includes("chrome/")||DS(e))&&!e.includes("edge/"))return"Chrome";if(CS(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function wS(n=Oe()){return/firefox\//i.test(n)}function TS(n=Oe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DS(n=Oe()){return/crios\//i.test(n)}function bS(n=Oe()){return/iemobile/i.test(n)}function CS(n=Oe()){return/android/i.test(n)}function SS(n=Oe()){return/blackberry/i.test(n)}function AS(n=Oe()){return/webos/i.test(n)}function Sy(n=Oe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ej(n=Oe()){var e;return Sy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wj(){return oC()&&document.documentMode===10}function NS(n=Oe()){return Sy(n)||CS(n)||AS(n)||SS(n)||/windows phone/i.test(n)||bS(n)}function RS(n,e=[]){let t;switch(n){case"Browser":t=oS(Oe());break;case"Worker":t=`${oS(Oe())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mr}/${r}`}var ly=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Tj(t){return v(this,arguments,function*(n,e={}){return Ho(n,"GET","/v2/passwordPolicy",Ty(n,e))})}var Dj=6,dy=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Dj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var hy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pd(this),this.idTokenSubscription=new Pd(this),this.beforeStateQueue=new ly(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bn(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Rd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield Ad(this,{idToken:e}),r=yield wr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(Mt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Nd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=lj()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Mt(this.app))return Promise.reject(Si(this));let t=e?ge(e):null;return t&&G(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Mt(this.app)?Promise.reject(Si(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Mt(this.app)?Promise.reject(Si(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Bn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield Tj(this),t=new dy(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield _j(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Bn(e)||this._popupRedirectResolver;G(t,this,"argument-error"),this.redirectPersistenceManager=yield Rd.create(this,[Bn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&sj(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function jd(n){return ge(n)}var Pd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=cC(t=>this.observer=t)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ay={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bj(n){Ay=n}function Cj(n){return Ay.loadJS(n)}function Sj(){return Ay.gapiScript}function PS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Ny(n,e){let t=gr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(bt(o,e??{}))return i;mn(i,"already-initialized")}return t.initialize({options:e})}function Aj(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Bn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ry(n,e,t){let r=jd(n);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=MS(e),{host:s,port:a}=Nj(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(bt(l,r.config.emulator)&&bt(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,On(s)?(Ma(`${o}//${s}${c}`),cd("Auth",!0)):i||Rj()}function MS(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Nj(n){let e=MS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:sS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:sS(s)}}}function sS(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Rj(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ha=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,t){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}};function $o(n,e){return v(this,null,function*(){return pj(n,"POST","/v1/accounts:signInWithIdp",Ty(n,e))})}var Pj="http://localhost",Md=class n extends Ha{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Ou(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,$o(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){let e={requestUri:Pj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vo(t)}return e}};var qa=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var kd=class extends qa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Mj=(()=>{class n extends kd{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Md._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var za=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield wr._fromIdTokenResponse(e,r,i),s=aS(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=aS(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function aS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var fy=class n extends Pt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function kS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?fy._fromErrorAndOperation(n,o,e,r):o})}function kj(n,e,t=!1){return v(this,null,function*(){let r=yield Ua(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return za._forOperation(n,"link",r)})}function xj(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(Mt(r.app))return Promise.reject(Si(r));let i="reauthenticate";try{let o=yield Ua(n,kS(r,i,e,n),t);G(o.idToken,r,"internal-error");let s=by(o.idToken);G(s,r,"internal-error");let{sub:a}=s;return G(n.uid===a,r,"user-mismatch"),za._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&mn(r,"user-mismatch"),o}})}function Oj(n,e,t=!1){return v(this,null,function*(){if(Mt(n.app))return Promise.reject(Si(n));let r="signIn",i=yield kS(n,r,e),o=yield za._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Py(n,e,t,r){return ge(n).onIdTokenChanged(e,t,r)}function My(n,e,t){return ge(n).beforeAuthStateChanged(e,t)}function ky(n,e,t,r){return ge(n).onAuthStateChanged(e,t,r)}function xy(n){return ge(n).signOut()}var xd="__sak";var Od=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xd,"1"),this.storage.removeItem(xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Fj=1e3,Lj=10,Vj=(()=>{class n extends Od{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);wj()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Lj):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Fj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield on(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield on(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield on(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),xS=Vj;var jj=(()=>{class n extends Od{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Oy=jj;function Bj(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var Uj=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>v(this,null,function*(){return d(r.origin,s)})),l=yield Bj(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Fy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var py=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=Fy("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function gn(){return window}function $j(n){gn().location.href=n}function OS(){return typeof gn().WorkerGlobalScope<"u"&&typeof gn().importScripts=="function"}function Hj(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function qj(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function zj(){return OS()?self:null}var FS="firebaseLocalStorageDb",Wj=1,Fd="firebaseLocalStorage",LS="fbase_key",Ni=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Bd(n,e){return n.transaction([Fd],e?"readwrite":"readonly").objectStore(Fd)}function Gj(){let n=indexedDB.deleteDatabase(FS);return new Ni(n).toPromise()}function gy(){let n=indexedDB.open(FS,Wj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Fd,{keyPath:LS})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Fd)?e(r):(r.close(),yield Gj(),e(yield gy()))}))})}function cS(n,e,t){return v(this,null,function*(){let r=Bd(n,!0).put({[LS]:e,value:t});return new Ni(r).toPromise()})}function Kj(n,e){return v(this,null,function*(){let t=Bd(n,!1).get(e),r=yield new Ni(t).toPromise();return r===void 0?null:r.value})}function uS(n,e){let t=Bd(n,!0).delete(e);return new Ni(t).toPromise()}var Qj=800,Yj=3,Zj=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield gy(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Yj)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return OS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=Uj._getInstance(zj()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield Hj(),!this.activeServiceWorker)return;this.sender=new py(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||qj()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield gy();return yield cS(t,xd,"1"),yield uS(t,xd),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>cS(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>Kj(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>uS(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Bd(o,!1).getAll();return new Ni(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),Qj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),VS=Zj;var L7=PS("rcb"),V7=new Ai(3e4,6e4);function jS(n,e){return e?Bn(e):(G(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Wa=class extends Ha{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Jj(n){return Oj(n.auth,new Wa(n),n.bypassAuthState)}function Xj(n){let{auth:e,user:t}=n;return G(t,e,"internal-error"),xj(t,new Wa(n),n.bypassAuthState)}function eB(n){return v(this,null,function*(){let{auth:e,user:t}=n;return G(t,e,"internal-error"),kj(t,new Wa(n),n.bypassAuthState)})}var Ld=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jj;case"linkViaPopup":case"linkViaRedirect":return eB;case"reauthViaPopup":case"reauthViaRedirect":return Xj;default:mn(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var tB=new Ai(2e3,1e4);function Ly(n,e,t){return v(this,null,function*(){if(Mt(n.app))return Promise.reject(Xt(n,"operation-not-supported-in-this-environment"));let r=jd(n);aj(n,e,qa);let i=jS(r,t);return new nB(r,"signInViaPopup",e,i).executeNotNull()})}var nB=(()=>{class n extends Ld{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return v(this,null,function*(){let t=yield this.execute();return G(t,this.auth,"internal-error"),t})}onExecution(){return v(this,null,function*(){Un(this.filter.length===1,"Popup operations only handle one event");let t=Fy();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,tB.get())};t()}}n.currentPopupAction=null;return n})(),rB="pendingRedirect",Dd=new Map,my=class n extends Ld{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=Dd.get(this.auth._key());if(!e){try{let r=(yield iB(this.resolver,this.auth))?yield on(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Dd.set(this.auth._key(),e)}return this.bypassAuthState||Dd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return on(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,on(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function iB(n,e){return v(this,null,function*(){let t=aB(e),r=sB(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function oB(n,e){Dd.set(n._key(),e)}function sB(n){return Bn(n._redirectPersistence)}function aB(n){return Td(rB,n.config.apiKey,n.name)}function cB(n,e,t=!1){return v(this,null,function*(){if(Mt(n.app))return Promise.reject(Si(n));let r=jd(n),i=jS(r,e),s=yield new my(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var uB=10*60*1e3,yy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lB(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!BS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Xt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uB&&this.cachedEventUids.clear(),this.cachedEventUids.has(lS(e))}saveEventToCache(e){this.cachedEventUids.add(lS(e)),this.lastProcessedEventTime=Date.now()}};function lS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function lB(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BS(n);default:return!1}}function dB(t){return v(this,arguments,function*(n,e={}){return Ho(n,"GET","/v1/projects",e)})}var hB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fB=/^https?/;function pB(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield dB(n);for(let t of e)try{if(gB(t))return}catch{}mn(n,"unauthorized-domain")})}function gB(n){let e=sy(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!fB.test(t))return!1;if(hB.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var mB=new Ai(3e4,6e4);function dS(){let n=gn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yB(n){return new Promise((e,t)=>{var r,i,o;function s(){dS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dS(),t(Xt(n,"network-request-failed"))},timeout:mB.get()})}if(!((i=(r=gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=gn().gapi)===null||o===void 0)&&o.load)s();else{let a=PS("iframefcb");return gn()[a]=()=>{gapi.load?s():t(Xt(n,"network-request-failed"))},Cj(`${Sj()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw bd=null,e})}var bd=null;function vB(n){return bd=bd||yB(n),bd}var _B=new Ai(5e3,15e3),IB="__/auth/iframe",EB="emulator/auth/iframe",wB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DB(n){let e=n.config;G(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?wy(e,EB):`https://${n.config.authDomain}/${IB}`,r={apiKey:e.apiKey,appName:n.name,v:mr},i=TB.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Vo(r).slice(1)}`}function bB(n){return v(this,null,function*(){let e=yield vB(n),t=gn().gapi;return G(t,n,"internal-error"),e.open({where:document.body,url:DB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wB,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Xt(n,"network-request-failed"),a=gn().setTimeout(()=>{o(s)},_B.get());function c(){gn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var CB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SB=500,AB=600,NB="_blank",RB="http://localhost",Vd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function PB(n,e,t,r=SB,i=AB){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},CB),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Oe().toLowerCase();t&&(a=DS(l)?NB:t),wS(l)&&(e=e||RB,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[m,w])=>`${g}${m}=${w},`,"");if(Ej(l)&&a!=="_self")return MB(e||"",a),new Vd(null);let f=window.open(e||"",a,d);G(f,n,"popup-blocked");try{f.focus()}catch{}return new Vd(f)}function MB(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var kB="__/auth/handler",xB="emulator/auth/handler",OB=encodeURIComponent("fac");function hS(n,e,t,r,i,o){return v(this,null,function*(){G(n.config.authDomain,n,"auth-domain-config-required"),G(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:mr,eventId:i};if(e instanceof qa){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",aC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof kd){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${OB}=${encodeURIComponent(c)}`:"";return`${FB(n)}?${Vo(a).slice(1)}${l}`})}function FB({config:n}){return n.emulator?wy(n,xB):`https://${n.authDomain}/${kB}`}var oy="webStorageSupport",vy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oy,this._completeRedirectFn=cB,this._overrideRedirectResult=oB}_openPopup(e,t,r,i){return v(this,null,function*(){var o;Un((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield hS(e,t,r,sy(),i);return PB(e,s,Fy())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield hS(e,t,r,sy(),i);return $j(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Un(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield bB(e),r=new yy(e);return t.register("authEvent",i=>(G(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(oy,{type:oy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[oy];s!==void 0&&t(!!s),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pB(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NS()||TS()||Sy()}},US=vy;var fS="@firebase/auth",pS="1.10.8";var _y=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function LB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VB(n){Zt(new mt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;G(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RS(n)},l=new hy(r,i,o,c);return Aj(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zt(new mt("auth-internal",e=>{let t=jd(e.getProvider("auth").getImmediate());return(r=>new _y(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(fS,pS,LB(n)),Ne(fS,pS,"esm2017")}var jB=5*60,BB=Cm("authIdTokenMaxAge")||jB,gS=null,UB=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>BB)return;let i=t?.token;gS!==i&&(gS=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Vy(n=yr()){let e=gr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ny(n,{popupRedirectResolver:US,persistence:[VS,xS,Oy]}),r=Cm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=UB(o.toString());My(t,s,()=>s(t.currentUser)),Py(t,a=>s(a))}}let i=Dm("auth");return i&&Ry(t,`http://${i}`),t}function $B(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}bj({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Xt("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",$B().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VB("Browser");var $S="auth",Ga=class{constructor(e){return e}},Ka=class{constructor(){return bi($S)}};var jy=new oe("angularfire2.auth-instances");function MU(n,e){let t=Oa($S,n,e);return t&&new Ga(t)}function kU(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ga(r)}}var xU={provide:Ka,deps:[[new Rt,jy]]},OU={provide:Ga,useFactory:MU,deps:[[new Rt,jy],Vn]};function bK(n,...e){return Ne("angularfire",Ln.full,"auth"),Po([OU,xU,{provide:jy,useFactory:kU(n),multi:!0,deps:[xe,wt,vr,Ci,[new Rt,Uo],...e]}])}var CK=j(Vy,!0);var SK=j(ky,!0);var AK=j(Ly,!0,2);var NK=j(xy,!0,2);var HS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qS={};var $n,By;(function(){var n;function e(T,_){function E(){}E.prototype=_.prototype,T.D=_.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(D,b,A){for(var I=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)I[Sn-2]=arguments[Sn];return _.prototype[b].apply(D,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,_,E){E||(E=0);var D=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)D[b]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(b=0;16>b;++b)D[b]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=T.g[0],E=T.g[1],b=T.g[2];var A=T.g[3],I=_+(A^E&(b^A))+D[0]+3614090360&4294967295;_=E+(I<<7&4294967295|I>>>25),I=A+(b^_&(E^b))+D[1]+3905402710&4294967295,A=_+(I<<12&4294967295|I>>>20),I=b+(E^A&(_^E))+D[2]+606105819&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(_^b&(A^_))+D[3]+3250441966&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(A^E&(b^A))+D[4]+4118548399&4294967295,_=E+(I<<7&4294967295|I>>>25),I=A+(b^_&(E^b))+D[5]+1200080426&4294967295,A=_+(I<<12&4294967295|I>>>20),I=b+(E^A&(_^E))+D[6]+2821735955&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(_^b&(A^_))+D[7]+4249261313&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(A^E&(b^A))+D[8]+1770035416&4294967295,_=E+(I<<7&4294967295|I>>>25),I=A+(b^_&(E^b))+D[9]+2336552879&4294967295,A=_+(I<<12&4294967295|I>>>20),I=b+(E^A&(_^E))+D[10]+4294925233&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(_^b&(A^_))+D[11]+2304563134&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(A^E&(b^A))+D[12]+1804603682&4294967295,_=E+(I<<7&4294967295|I>>>25),I=A+(b^_&(E^b))+D[13]+4254626195&4294967295,A=_+(I<<12&4294967295|I>>>20),I=b+(E^A&(_^E))+D[14]+2792965006&4294967295,b=A+(I<<17&4294967295|I>>>15),I=E+(_^b&(A^_))+D[15]+1236535329&4294967295,E=b+(I<<22&4294967295|I>>>10),I=_+(b^A&(E^b))+D[1]+4129170786&4294967295,_=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(_^E))+D[6]+3225465664&4294967295,A=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(A^_))+D[11]+643717713&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^_&(b^A))+D[0]+3921069994&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(b^A&(E^b))+D[5]+3593408605&4294967295,_=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(_^E))+D[10]+38016083&4294967295,A=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(A^_))+D[15]+3634488961&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^_&(b^A))+D[4]+3889429448&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(b^A&(E^b))+D[9]+568446438&4294967295,_=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(_^E))+D[14]+3275163606&4294967295,A=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(A^_))+D[3]+4107603335&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^_&(b^A))+D[8]+1163531501&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(b^A&(E^b))+D[13]+2850285829&4294967295,_=E+(I<<5&4294967295|I>>>27),I=A+(E^b&(_^E))+D[2]+4243563512&4294967295,A=_+(I<<9&4294967295|I>>>23),I=b+(_^E&(A^_))+D[7]+1735328473&4294967295,b=A+(I<<14&4294967295|I>>>18),I=E+(A^_&(b^A))+D[12]+2368359562&4294967295,E=b+(I<<20&4294967295|I>>>12),I=_+(E^b^A)+D[5]+4294588738&4294967295,_=E+(I<<4&4294967295|I>>>28),I=A+(_^E^b)+D[8]+2272392833&4294967295,A=_+(I<<11&4294967295|I>>>21),I=b+(A^_^E)+D[11]+1839030562&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^_)+D[14]+4259657740&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(E^b^A)+D[1]+2763975236&4294967295,_=E+(I<<4&4294967295|I>>>28),I=A+(_^E^b)+D[4]+1272893353&4294967295,A=_+(I<<11&4294967295|I>>>21),I=b+(A^_^E)+D[7]+4139469664&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^_)+D[10]+3200236656&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(E^b^A)+D[13]+681279174&4294967295,_=E+(I<<4&4294967295|I>>>28),I=A+(_^E^b)+D[0]+3936430074&4294967295,A=_+(I<<11&4294967295|I>>>21),I=b+(A^_^E)+D[3]+3572445317&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^_)+D[6]+76029189&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(E^b^A)+D[9]+3654602809&4294967295,_=E+(I<<4&4294967295|I>>>28),I=A+(_^E^b)+D[12]+3873151461&4294967295,A=_+(I<<11&4294967295|I>>>21),I=b+(A^_^E)+D[15]+530742520&4294967295,b=A+(I<<16&4294967295|I>>>16),I=E+(b^A^_)+D[2]+3299628645&4294967295,E=b+(I<<23&4294967295|I>>>9),I=_+(b^(E|~A))+D[0]+4096336452&4294967295,_=E+(I<<6&4294967295|I>>>26),I=A+(E^(_|~b))+D[7]+1126891415&4294967295,A=_+(I<<10&4294967295|I>>>22),I=b+(_^(A|~E))+D[14]+2878612391&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~_))+D[5]+4237533241&4294967295,E=b+(I<<21&4294967295|I>>>11),I=_+(b^(E|~A))+D[12]+1700485571&4294967295,_=E+(I<<6&4294967295|I>>>26),I=A+(E^(_|~b))+D[3]+2399980690&4294967295,A=_+(I<<10&4294967295|I>>>22),I=b+(_^(A|~E))+D[10]+4293915773&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~_))+D[1]+2240044497&4294967295,E=b+(I<<21&4294967295|I>>>11),I=_+(b^(E|~A))+D[8]+1873313359&4294967295,_=E+(I<<6&4294967295|I>>>26),I=A+(E^(_|~b))+D[15]+4264355552&4294967295,A=_+(I<<10&4294967295|I>>>22),I=b+(_^(A|~E))+D[6]+2734768916&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~_))+D[13]+1309151649&4294967295,E=b+(I<<21&4294967295|I>>>11),I=_+(b^(E|~A))+D[4]+4149444226&4294967295,_=E+(I<<6&4294967295|I>>>26),I=A+(E^(_|~b))+D[11]+3174756917&4294967295,A=_+(I<<10&4294967295|I>>>22),I=b+(_^(A|~E))+D[2]+718787259&4294967295,b=A+(I<<15&4294967295|I>>>17),I=E+(A^(b|~_))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+A&4294967295}r.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var E=_-this.blockSize,D=this.B,b=this.h,A=0;A<_;){if(b==0)for(;A<=E;)i(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(D[b++]=T.charCodeAt(A++),b==this.blockSize){i(this,D),b=0;break}}else for(;A<_;)if(D[b++]=T[A++],b==this.blockSize){i(this,D),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var E=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=E&255,E/=256;for(this.u(T),T=Array(16),_=E=0;4>_;++_)for(var D=0;32>D;D+=8)T[E++]=this.g[_]>>>D&255;return T};function o(T,_){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=_(T)}function s(T,_){this.h=_;for(var E=[],D=!0,b=T.length-1;0<=b;b--){var A=T[b]|0;D&&A==_||(E[b]=A,D=!1)}this.g=E}var a={};function c(T){return-128<=T&&128>T?o(T,function(_){return new s([_|0],0>_?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return P(l(-T));for(var _=[],E=1,D=0;T>=E;D++)_[D]=T/E|0,E*=4294967296;return new s(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return P(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(_,8)),D=f,b=0;b<T.length;b+=8){var A=Math.min(8,T.length-b),I=parseInt(T.substring(b,b+A),_);8>A?(A=l(Math.pow(_,A)),D=D.j(A).add(l(I))):(D=D.j(E),D=D.add(l(I)))}return D}var f=c(0),g=c(1),m=c(16777216);n=s.prototype,n.m=function(){if(R(this))return-P(this).m();for(var T=0,_=1,E=0;E<this.g.length;E++){var D=this.i(E);T+=(0<=D?D:4294967296+D)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(w(this))return"0";if(R(this))return"-"+P(this).toString(T);for(var _=l(Math.pow(T,6)),E=this,D="";;){var b=W(E,_).g;E=O(E,b.j(_));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=b,w(E))return A+D;for(;6>A.length;)A="0"+A;D=A+D}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function w(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function R(T){return T.h==-1}n.l=function(T){return T=O(this,T),R(T)?-1:w(T)?0:1};function P(T){for(var _=T.g.length,E=[],D=0;D<_;D++)E[D]=~T.g[D];return new s(E,~T.h).add(g)}n.abs=function(){return R(this)?P(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],D=0,b=0;b<=_;b++){var A=D+(this.i(b)&65535)+(T.i(b)&65535),I=(A>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);D=I>>>16,A&=65535,I&=65535,E[b]=I<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function O(T,_){return T.add(P(_))}n.j=function(T){if(w(this)||w(T))return f;if(R(this))return R(T)?P(this).j(P(T)):P(P(this).j(T));if(R(T))return P(this.j(P(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var _=this.g.length+T.g.length,E=[],D=0;D<2*_;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(var b=0;b<T.g.length;b++){var A=this.i(D)>>>16,I=this.i(D)&65535,Sn=T.i(b)>>>16,Vs=T.i(b)&65535;E[2*D+2*b]+=I*Vs,B(E,2*D+2*b),E[2*D+2*b+1]+=A*Vs,B(E,2*D+2*b+1),E[2*D+2*b+1]+=I*Sn,B(E,2*D+2*b+1),E[2*D+2*b+2]+=A*Sn,B(E,2*D+2*b+2)}for(D=0;D<_;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=_;D<2*_;D++)E[D]=0;return new s(E,0)};function B(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function U(T,_){this.g=T,this.h=_}function W(T,_){if(w(_))throw Error("division by zero");if(w(T))return new U(f,f);if(R(T))return _=W(P(T),_),new U(P(_.g),P(_.h));if(R(_))return _=W(T,P(_)),new U(P(_.g),_.h);if(30<T.g.length){if(R(T)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var E=g,D=_;0>=D.l(T);)E=de(E),D=de(D);var b=K(E,1),A=K(D,1);for(D=K(D,2),E=K(E,2);!w(D);){var I=A.add(D);0>=I.l(T)&&(b=b.add(E),A=I),D=K(D,1),E=K(E,1)}return _=O(T,b.j(_)),new U(b,_)}for(b=f;0<=T.l(_);){for(E=Math.max(1,Math.floor(T.m()/_.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),A=l(E),I=A.j(_);R(I)||0<I.l(T);)E-=D,A=l(E),I=A.j(_);w(A)&&(A=g),b=b.add(A),T=O(T,I)}return new U(b,T)}n.A=function(T){return W(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],D=0;D<_;D++)E[D]=this.i(D)&T.i(D);return new s(E,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],D=0;D<_;D++)E[D]=this.i(D)|T.i(D);return new s(E,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),E=[],D=0;D<_;D++)E[D]=this.i(D)^T.i(D);return new s(E,this.h^T.h)};function de(T){for(var _=T.g.length+1,E=[],D=0;D<_;D++)E[D]=T.i(D)<<1|T.i(D-1)>>>31;return new s(E,T.h)}function K(T,_){var E=_>>5;_%=32;for(var D=T.g.length-E,b=[],A=0;A<D;A++)b[A]=0<_?T.i(A+E)>>>_|T.i(A+E+1)<<32-_:T.i(A+E);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,By=qS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,$n=qS.Integer=s}).apply(typeof HS<"u"?HS:typeof self<"u"?self:typeof window<"u"?window:{});var Ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hn={};var Uy,FU,qo,$y,Qa,$d,Hy,qy,zy;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ud=="object"&&Ud];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var C=u[y];if(!(C in p))break e;p=p[C]}u=u[u.length-1],y=p[u],h=h(y),h!=y&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function o(u,h){u instanceof String&&(u+="");var p=0,y=!1,C={next:function(){if(!y&&p<u.length){var M=p++;return{value:h(M,u[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),u.apply(h,C)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function w(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,C,M){for(var L=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)L[Ie-2]=arguments[Ie];return h.prototype[C].apply(y,L)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=u[y];return p}return[]}function P(u,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let C=u.length||0,M=y.length||0;u.length=C+M;for(let L=0;L<M;L++)u[C+L]=y[L]}else u.push(y)}}class O{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function B(u){return/^[\s\xa0]*$/.test(u)}function U(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function W(u){return W[" "](u),u}W[" "]=function(){};var de=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function K(u,h,p){for(let y in u)h.call(p,u[y],y,u)}function T(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function _(u){let h={};for(let p in u)h[p]=u[p];return h}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,h){let p,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(p in y)u[p]=y[p];for(let M=0;M<E.length;M++)p=E[M],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function I(){var u=Nf;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Sn{constructor(){this.h=this.g=null}add(h,p){let y=Vs.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var Vs=new O(()=>new TP,u=>u.reset());class TP{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let js,Bs=!1,Nf=new Sn,rE=()=>{let u=a.Promise.resolve(void 0);js=()=>{u.then(DP)}};var DP=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(p){A(p)}var h=Vs;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Bs=!1};function tr(){this.s=this.s,this.C=this.C}tr.prototype.s=!1,tr.prototype.ma=function(){this.s||(this.s=!0,this.N())},tr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var bP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Us(u,h){if(et.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(de){e:{try{W(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:CP[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Us.aa.h.call(this)}}w(Us,et);var CP={2:"touch",3:"pen",4:"mouse"};Us.prototype.h=function(){Us.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $s="closure_listenable_"+(1e6*Math.random()|0),SP=0;function AP(u,h,p,y,C){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=C,this.key=++SP,this.da=this.fa=!1}function Jc(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Xc(u){this.src=u,this.g={},this.h=0}Xc.prototype.add=function(u,h,p,y,C){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var L=Pf(u,h,y,C);return-1<L?(h=u[L],p||(h.fa=!1)):(h=new AP(h,this.src,M,!!y,C),h.fa=p,u.push(h)),h};function Rf(u,h){var p=h.type;if(p in u.g){var y=u.g[p],C=Array.prototype.indexOf.call(y,h,void 0),M;(M=0<=C)&&Array.prototype.splice.call(y,C,1),M&&(Jc(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Pf(u,h,p,y){for(var C=0;C<u.length;++C){var M=u[C];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==y)return C}return-1}var Mf="closure_lm_"+(1e6*Math.random()|0),kf={};function iE(u,h,p,y,C){if(y&&y.once)return sE(u,h,p,y,C);if(Array.isArray(h)){for(var M=0;M<h.length;M++)iE(u,h[M],p,y,C);return null}return p=Lf(p),u&&u[$s]?u.K(h,p,l(y)?!!y.capture:!!y,C):oE(u,h,p,!1,y,C)}function oE(u,h,p,y,C,M){if(!h)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Ie=Of(u);if(Ie||(u[Mf]=Ie=new Xc(u)),p=Ie.add(h,p,y,L,M),p.proxy)return p;if(y=NP(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)bP||(C=L),C===void 0&&(C=!1),u.addEventListener(h.toString(),y,C);else if(u.attachEvent)u.attachEvent(cE(h.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function NP(){function u(p){return h.call(u.src,u.listener,p)}let h=RP;return u}function sE(u,h,p,y,C){if(Array.isArray(h)){for(var M=0;M<h.length;M++)sE(u,h[M],p,y,C);return null}return p=Lf(p),u&&u[$s]?u.L(h,p,l(y)?!!y.capture:!!y,C):oE(u,h,p,!0,y,C)}function aE(u,h,p,y,C){if(Array.isArray(h))for(var M=0;M<h.length;M++)aE(u,h[M],p,y,C);else y=l(y)?!!y.capture:!!y,p=Lf(p),u&&u[$s]?(u=u.i,h=String(h).toString(),h in u.g&&(M=u.g[h],p=Pf(M,p,y,C),-1<p&&(Jc(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete u.g[h],u.h--)))):u&&(u=Of(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Pf(h,p,y,C)),(p=-1<u?h[u]:null)&&xf(p))}function xf(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[$s])Rf(h.i,u);else{var p=u.type,y=u.proxy;h.removeEventListener?h.removeEventListener(p,y,u.capture):h.detachEvent?h.detachEvent(cE(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=Of(h))?(Rf(p,u),p.h==0&&(p.src=null,h[Mf]=null)):Jc(u)}}}function cE(u){return u in kf?kf[u]:kf[u]="on"+u}function RP(u,h){if(u.da)u=!0;else{h=new Us(h,this);var p=u.listener,y=u.ha||u.src;u.fa&&xf(u),u=p.call(y,h)}return u}function Of(u){return u=u[Mf],u instanceof Xc?u:null}var Ff="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lf(u){return typeof u=="function"?u:(u[Ff]||(u[Ff]=function(h){return u.handleEvent(h)}),u[Ff])}function tt(){tr.call(this),this.i=new Xc(this),this.M=this,this.F=null}w(tt,tr),tt.prototype[$s]=!0,tt.prototype.removeEventListener=function(u,h,p,y){aE(this,u,h,p,y)};function ct(u,h){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=h.type||h,typeof h=="string")h=new et(h,u);else if(h instanceof et)h.target=h.target||u;else{var C=h;h=new et(y,u),D(h,C)}if(C=!0,p)for(var M=p.length-1;0<=M;M--){var L=h.g=p[M];C=eu(L,y,!0,h)&&C}if(L=h.g=u,C=eu(L,y,!0,h)&&C,C=eu(L,y,!1,h)&&C,p)for(M=0;M<p.length;M++)L=h.g=p[M],C=eu(L,y,!1,h)&&C}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],y=0;y<p.length;y++)Jc(p[y]);delete u.g[h],u.h--}}this.F=null},tt.prototype.K=function(u,h,p,y){return this.i.add(String(u),h,!1,p,y)},tt.prototype.L=function(u,h,p,y){return this.i.add(String(u),h,!0,p,y)};function eu(u,h,p,y){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,M=0;M<h.length;++M){var L=h[M];if(L&&!L.da&&L.capture==p){var Ie=L.listener,Ze=L.ha||L.src;L.fa&&Rf(u.i,L),C=Ie.call(Ze,y)!==!1&&C}}return C&&!y.defaultPrevented}function uE(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function lE(u){u.g=uE(()=>{u.g=null,u.i&&(u.i=!1,lE(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class PP extends tr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:lE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hs(u){tr.call(this),this.h=u,this.g={}}w(Hs,tr);var dE=[];function hE(u){K(u.g,function(h,p){this.g.hasOwnProperty(p)&&xf(h)},u),u.g={}}Hs.prototype.N=function(){Hs.aa.N.call(this),hE(this)},Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vf=a.JSON.stringify,MP=a.JSON.parse,kP=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function jf(){}jf.prototype.h=null;function fE(u){return u.h||(u.h=u.i())}function pE(){}var qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bf(){et.call(this,"d")}w(Bf,et);function Uf(){et.call(this,"c")}w(Uf,et);var Qr={},gE=null;function tu(){return gE=gE||new tt}Qr.La="serverreachability";function mE(u){et.call(this,Qr.La,u)}w(mE,et);function zs(u){let h=tu();ct(h,new mE(h))}Qr.STAT_EVENT="statevent";function yE(u,h){et.call(this,Qr.STAT_EVENT,u),this.stat=h}w(yE,et);function ut(u){let h=tu();ct(h,new yE(h,u))}Qr.Ma="timingevent";function vE(u,h){et.call(this,Qr.Ma,u),this.size=h}w(vE,et);function Ws(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Gs(){this.g=!0}Gs.prototype.xa=function(){this.g=!1};function xP(u,h,p,y,C,M){u.info(function(){if(u.g)if(M)for(var L="",Ie=M.split("&"),Ze=0;Ze<Ie.length;Ze++){var pe=Ie[Ze].split("=");if(1<pe.length){var nt=pe[0];pe=pe[1];var rt=nt.split("_");L=2<=rt.length&&rt[1]=="type"?L+(nt+"="+pe+"&"):L+(nt+"=redacted&")}}else L=null;else L=M;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+h+`
`+p+`
`+L})}function OP(u,h,p,y,C,M,L){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+h+`
`+p+`
`+M+" "+L})}function ro(u,h,p,y){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+LP(u,p)+(y?" "+y:"")})}function FP(u,h){u.info(function(){return"TIMEOUT: "+h})}Gs.prototype.info=function(){};function LP(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var M=C[0];if(M!="noop"&&M!="stop"&&M!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Vf(p)}catch{return h}}var nu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_E={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$f;function ru(){}w(ru,jf),ru.prototype.g=function(){return new XMLHttpRequest},ru.prototype.i=function(){return{}},$f=new ru;function nr(u,h,p,y){this.j=u,this.i=h,this.l=p,this.R=y||1,this.U=new Hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new IE}function IE(){this.i=null,this.g="",this.h=!1}var EE={},Hf={};function qf(u,h,p){u.L=1,u.v=au(An(h)),u.m=p,u.P=!0,wE(u,null)}function wE(u,h){u.F=Date.now(),iu(u),u.A=An(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),FE(p.i,"t",y),u.C=0,p=u.j.J,u.h=new IE,u.g=ew(u.j,p?h:null,!u.m),0<u.O&&(u.M=new PP(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,y=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(dE[0]=C.toString()),C=dE);for(var M=0;M<C.length;M++){var L=iE(p,C[M],y||h.handleEvent,!1,h.h||h);if(!L)break;h.g[L.key]=L}h=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),zs(),xP(u.i,u.u,u.A,u.l,u.R,u.m)}nr.prototype.ca=function(u){u=u.target;let h=this.M;h&&Nn(u)==3?h.j():this.Y(u)},nr.prototype.Y=function(u){try{if(u==this.g)e:{let rt=Nn(this.g);var h=this.g.Ba();let so=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||HE(this.g)))){this.J||rt!=4||h==7||(h==8||0>=so?zs(3):zs(2)),zf(this);var p=this.g.Z();this.X=p;t:if(TE(this)){var y=HE(this.g);u="";var C=y.length,M=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),Ks(this);var L="";break t}this.h.i=new a.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,u+=this.h.i.decode(y[h],{stream:!(M&&h==C-1)});y.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=p==200,OP(this.i,this.u,this.A,this.l,this.R,rt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,Ze=this.g;if((Ie=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ie)){var pe=Ie;break t}}pe=null}if(p=pe)ro(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wf(this,p);else{this.o=!1,this.s=3,ut(12),Yr(this),Ks(this);break e}}if(this.P){p=!0;let zt;for(;!this.J&&this.C<L.length;)if(zt=VP(this,L),zt==Hf){rt==4&&(this.s=4,ut(14),p=!1),ro(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==EE){this.s=4,ut(15),ro(this.i,this.l,L,"[Invalid Chunk]"),p=!1;break}else ro(this.i,this.l,zt,null),Wf(this,zt);if(TE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||L.length!=0||this.h.h||(this.s=1,ut(16),p=!1),this.o=this.o&&p,!p)ro(this.i,this.l,L,"[Invalid Chunked Response]"),Yr(this),Ks(this);else if(0<L.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Jf(nt),nt.M=!0,ut(11))}}else ro(this.i,this.l,L,null),Wf(this,L);rt==4&&Yr(this),this.o&&!this.J&&(rt==4?YE(this.j,this):(this.o=!1,iu(this)))}else tM(this.g),p==400&&0<L.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Yr(this),Ks(this)}}}catch{}finally{}};function TE(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function VP(u,h){var p=u.C,y=h.indexOf(`
`,p);return y==-1?Hf:(p=Number(h.substring(p,y)),isNaN(p)?EE:(y+=1,y+p>h.length?Hf:(h=h.slice(y,y+p),u.C=y+p,h)))}nr.prototype.cancel=function(){this.J=!0,Yr(this)};function iu(u){u.S=Date.now()+u.I,DE(u,u.I)}function DE(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ws(g(u.ba,u),h)}function zf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}nr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(FP(this.i,this.A),this.L!=2&&(zs(),ut(17)),Yr(this),this.s=2,Ks(this)):DE(this,this.S-u)};function Ks(u){u.j.G==0||u.J||YE(u.j,u)}function Yr(u){zf(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,hE(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Wf(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Gf(p.h,u))){if(!u.K&&Gf(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)hu(p),lu(p);else break e;Zf(p),ut(18)}}else p.za=C[1],0<p.za-p.T&&37500>C[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ws(g(p.Za,p),6e3));if(1>=SE(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Jr(p,11)}else if((u.K||p.g==u)&&hu(p),!B(h))for(C=p.Da.g.parse(h),h=0;h<C.length;h++){let pe=C[h];if(p.T=pe[0],pe=pe[1],p.G==2)if(pe[0]=="c"){p.K=pe[1],p.ia=pe[2];let nt=pe[3];nt!=null&&(p.la=nt,p.j.info("VER="+p.la));let rt=pe[4];rt!=null&&(p.Aa=rt,p.j.info("SVER="+p.Aa));let so=pe[5];so!=null&&typeof so=="number"&&0<so&&(y=1.5*so,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let zt=u.g;if(zt){let pu=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pu){var M=y.h;M.g||pu.indexOf("spdy")==-1&&pu.indexOf("quic")==-1&&pu.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Kf(M,M.h),M.h=null))}if(y.D){let Xf=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xf&&(y.ya=Xf,Te(y.I,y.D,Xf))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var L=u;if(y.qa=XE(y,y.J?y.ia:null,y.W),L.K){AE(y.h,L);var Ie=L,Ze=y.L;Ze&&(Ie.I=Ze),Ie.B&&(zf(Ie),iu(Ie)),y.g=L}else KE(y);0<p.i.length&&du(p)}else pe[0]!="stop"&&pe[0]!="close"||Jr(p,7);else p.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Jr(p,7):Yf(p):pe[0]!="noop"&&p.l&&p.l.ta(pe),p.v=0)}}zs(4)}catch{}}var jP=class{constructor(u,h){this.g=u,this.map=h}};function bE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function CE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function SE(u){return u.h?1:u.g?u.g.size:0}function Gf(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Kf(u,h){u.g?u.g.add(h):u.h=h}function AE(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}bE.prototype.cancel=function(){if(this.i=NE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function NE(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function BP(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,y=0;y<p;y++)h.push(u[y]);return h}h=[],p=0;for(y in u)h[p++]=u[y];return h}function UP(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let y in u)h[p++]=y;return h}}}function RE(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=UP(u),y=BP(u),C=y.length,M=0;M<C;M++)h.call(void 0,y[M],p&&p[M],u)}var PE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $P(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),C=null;if(0<=y){var M=u[p].substring(0,y);C=u[p].substring(y+1)}else M=u[p];h(M,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Zr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Zr){this.h=u.h,ou(this,u.j),this.o=u.o,this.g=u.g,su(this,u.s),this.l=u.l;var h=u.i,p=new Zs;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),ME(this,p),this.m=u.m}else u&&(h=String(u).match(PE))?(this.h=!1,ou(this,h[1]||"",!0),this.o=Qs(h[2]||""),this.g=Qs(h[3]||"",!0),su(this,h[4]),this.l=Qs(h[5]||"",!0),ME(this,h[6]||"",!0),this.m=Qs(h[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}Zr.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Ys(h,kE,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Ys(h,kE,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Ys(p,p.charAt(0)=="/"?zP:qP,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Ys(p,GP)),u.join("")};function An(u){return new Zr(u)}function ou(u,h,p){u.j=p?Qs(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function su(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function ME(u,h,p){h instanceof Zs?(u.i=h,KP(u.i,u.h)):(p||(h=Ys(h,WP)),u.i=new Zs(h,u.h))}function Te(u,h,p){u.i.set(h,p)}function au(u){return Te(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Qs(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ys(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,HP),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function HP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var kE=/[#\/\?@]/g,qP=/[#\?:]/g,zP=/[#\?]/g,WP=/[#\?@]/g,GP=/#/g;function Zs(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function rr(u){u.g||(u.g=new Map,u.h=0,u.i&&$P(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Zs.prototype,n.add=function(u,h){rr(this),this.i=null,u=io(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function xE(u,h){rr(u),h=io(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function OE(u,h){return rr(u),h=io(u,h),u.g.has(h)}n.forEach=function(u,h){rr(this),this.g.forEach(function(p,y){p.forEach(function(C){u.call(h,C,y,this)},this)},this)},n.na=function(){rr(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let C=u[y];for(let M=0;M<C.length;M++)p.push(h[y])}return p},n.V=function(u){rr(this);let h=[];if(typeof u=="string")OE(this,u)&&(h=h.concat(this.g.get(io(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return rr(this),this.i=null,u=io(this,u),OE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function FE(u,h,p){xE(u,h),0<p.length&&(u.i=null,u.g.set(io(u,h),R(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let M=encodeURIComponent(String(y)),L=this.V(y);for(y=0;y<L.length;y++){var C=M;L[y]!==""&&(C+="="+encodeURIComponent(String(L[y]))),u.push(C)}}return this.i=u.join("&")};function io(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function KP(u,h){h&&!u.j&&(rr(u),u.i=null,u.g.forEach(function(p,y){var C=y.toLowerCase();y!=C&&(xE(this,y),FE(this,C,p))},u)),u.j=h}function QP(u,h){let p=new Gs;if(a.Image){let y=new Image;y.onload=m(ir,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(ir,p,"TestLoadImage: error",!1,h,y),y.onabort=m(ir,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(ir,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else h(!1)}function YP(u,h){let p=new Gs,y=new AbortController,C=setTimeout(()=>{y.abort(),ir(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:y.signal}).then(M=>{clearTimeout(C),M.ok?ir(p,"TestPingServer: ok",!0,h):ir(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),ir(p,"TestPingServer: error",!1,h)})}function ir(u,h,p,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(p)}catch{}}function ZP(){this.g=new kP}function JP(u,h,p){let y=p||"";try{RE(u,function(C,M){let L=C;l(C)&&(L=Vf(C)),h.push(y+M+"="+encodeURIComponent(L))})}catch(C){throw h.push(y+"type="+encodeURIComponent("_badmap")),C}}function Js(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Js,jf),Js.prototype.g=function(){return new cu(this.l,this.j)},Js.prototype.i=function(u){return function(){return u}}({});function cu(u,h){tt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(cu,tt),n=cu.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,ea(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xs(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;LE(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function LE(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Xs(this):ea(this),this.readyState==3&&LE(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Xs(this))},n.Qa=function(u){this.g&&(this.response=u,Xs(this))},n.ga=function(){this.g&&Xs(this)};function Xs(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ea(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function ea(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function VE(u){let h="";return K(u,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function Qf(u,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=VE(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Te(u,h,p))}function Pe(u){tt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Pe,tt);var XP=/^https?$/i,eM=["POST","PUT"];n=Pe.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$f.g(),this.v=this.o?fE(this.o):fE($f),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(M){jE(this,M);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)p.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let M of y.keys())p.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eM,h,void 0))||y||C||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,L]of p)this.g.setRequestHeader(M,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$E(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){jE(this,M)}};function jE(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,BE(u),uu(u)}function BE(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ct(this,"complete"),ct(this,"abort"),uu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uu(this,!0)),Pe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?UE(this):this.bb())},n.bb=function(){UE(this)};function UE(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Nn(u)!=4||u.Z()!=2)){if(u.u&&Nn(u)==4)uE(u.Ea,0,u);else if(ct(u,"readystatechange"),Nn(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=L===0){var C=String(u.D).match(PE)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),y=!XP.test(C?C.toLowerCase():"")}p=y}if(p)ct(u,"complete"),ct(u,"success");else{u.m=6;try{var M=2<Nn(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",BE(u)}}finally{uu(u)}}}}function uu(u,h){if(u.g){$E(u);let p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||ct(u,"ready");try{p.onreadystatechange=y}catch{}}}function $E(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Nn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),MP(h)}};function HE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function tM(u){let h={};u=(u.g&&2<=Nn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(B(u[y]))continue;var p=b(u[y]);let C=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[C]||[];h[C]=M,M.push(p)}T(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function qE(u){this.Aa=0,this.i=[],this.j=new Gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ta("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ta("baseRetryDelayMs",5e3,u),this.cb=ta("retryDelaySeedMs",1e4,u),this.Wa=ta("forwardChannelMaxRetries",2,u),this.wa=ta("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new bE(u&&u.concurrentRequestLimit),this.Da=new ZP,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qE.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,y){ut(0),this.W=u,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=XE(this,null,this.W),du(this)};function Yf(u){if(zE(u),u.G==3){var h=u.U++,p=An(u.I);if(Te(p,"SID",u.K),Te(p,"RID",h),Te(p,"TYPE","terminate"),na(u,p),h=new nr(u,u.j,h),h.L=2,h.v=au(An(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=ew(h.j,null),h.g.ea(h.v)),h.F=Date.now(),iu(h)}JE(u)}function lu(u){u.g&&(Jf(u),u.g.cancel(),u.g=null)}function zE(u){lu(u),u.u&&(a.clearTimeout(u.u),u.u=null),hu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function du(u){if(!CE(u.h)&&!u.s){u.s=!0;var h=u.Ga;js||rE(),Bs||(js(),Bs=!0),Nf.add(h,u),u.B=0}}function nM(u,h){return SE(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ws(g(u.Ga,u,h),ZE(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new nr(this,this.j,u),M=this.o;if(this.S&&(M?(M=_(M),D(M,this.S)):M=this.S),this.m!==null||this.O||(C.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=GE(this,C,h),p=An(this.I),Te(p,"RID",u),Te(p,"CVER",22),this.D&&Te(p,"X-HTTP-Session-Id",this.D),na(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(VE(M)))+"&"+h:this.m&&Qf(p,this.m,M)),Kf(this.h,C),this.Ua&&Te(p,"TYPE","init"),this.P?(Te(p,"$req",h),Te(p,"SID","null"),C.T=!0,qf(C,p,null)):qf(C,p,h),this.G=2}}else this.G==3&&(u?WE(this,u):this.i.length==0||CE(this.h)||WE(this))};function WE(u,h){var p;h?p=h.l:p=u.U++;let y=An(u.I);Te(y,"SID",u.K),Te(y,"RID",p),Te(y,"AID",u.T),na(u,y),u.m&&u.o&&Qf(y,u.m,u.o),p=new nr(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=GE(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Kf(u.h,p),qf(p,y,h)}function na(u,h){u.H&&K(u.H,function(p,y){Te(h,y,p)}),u.l&&RE({},function(p,y){Te(h,y,p)})}function GE(u,h,p){p=Math.min(u.i.length,p);var y=u.l?g(u.l.Na,u.l,u):null;e:{var C=u.i;let M=-1;for(;;){let L=["count="+p];M==-1?0<p?(M=C[0].g,L.push("ofs="+M)):M=0:L.push("ofs="+M);let Ie=!0;for(let Ze=0;Ze<p;Ze++){let pe=C[Ze].g,nt=C[Ze].map;if(pe-=M,0>pe)M=Math.max(0,C[Ze].g-100),Ie=!1;else try{JP(nt,L,"req"+pe+"_")}catch{y&&y(nt)}}if(Ie){y=L.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,y}function KE(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;js||rE(),Bs||(js(),Bs=!0),Nf.add(h,u),u.v=0}}function Zf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ws(g(u.Fa,u),ZE(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,QE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ws(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),lu(this),QE(this))};function Jf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function QE(u){u.g=new nr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=An(u.qa);Te(h,"RID","rpc"),Te(h,"SID",u.K),Te(h,"AID",u.T),Te(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Te(h,"TO",u.ja),Te(h,"TYPE","xmlhttp"),na(u,h),u.m&&u.o&&Qf(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=au(An(h)),p.m=null,p.P=!0,wE(p,u)}n.Za=function(){this.C!=null&&(this.C=null,lu(this),Zf(this),ut(19))};function hu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function YE(u,h){var p=null;if(u.g==h){hu(u),Jf(u),u.g=null;var y=2}else if(Gf(u.h,h))p=h.D,AE(u.h,h),y=1;else return;if(u.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var C=u.B;y=tu(),ct(y,new vE(y,p)),du(u)}else KE(u);else if(C=h.s,C==3||C==0&&0<h.X||!(y==1&&nM(u,h)||y==2&&Zf(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),C){case 1:Jr(u,5);break;case 4:Jr(u,10);break;case 3:Jr(u,6);break;default:Jr(u,2)}}}function ZE(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function Jr(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),y=u.Xa;let C=!y;y=new Zr(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ou(y,"https"),au(y),C?QP(y.toString(),p):YP(y.toString(),p)}else ut(2);u.G=0,u.l&&u.l.sa(h),JE(u),zE(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function JE(u){if(u.G=0,u.ka=[],u.l){let h=NE(u.h);(h.length!=0||u.i.length!=0)&&(P(u.ka,h),P(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function XE(u,h,p){var y=p instanceof Zr?An(p):new Zr(p);if(y.g!="")h&&(y.g=h+"."+y.g),su(y,y.s);else{var C=a.location;y=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var M=new Zr(null);y&&ou(M,y),h&&(M.g=h),C&&su(M,C),p&&(M.l=p),y=M}return p=u.D,h=u.ya,p&&h&&Te(y,p,h),Te(y,"VER",u.la),na(u,y),y}function ew(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Pe(new Js({eb:p})):new Pe(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function tw(){}n=tw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fu(){}fu.prototype.g=function(u,h){return new At(u,h)};function At(u,h){tt.call(this),this.g=new qE(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!B(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!B(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new oo(this)}w(At,tt),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Yf(this.g)},At.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Vf(u),u=p);h.i.push(new jP(h.Ya++,u)),h.G==3&&du(h)},At.prototype.N=function(){this.g.l=null,delete this.j,Yf(this.g),delete this.g,At.aa.N.call(this)};function nw(u){Bf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}w(nw,Bf);function rw(){Uf.call(this),this.status=1}w(rw,Uf);function oo(u){this.g=u}w(oo,tw),oo.prototype.ua=function(){ct(this.g,"a")},oo.prototype.ta=function(u){ct(this.g,new nw(u))},oo.prototype.sa=function(u){ct(this.g,new rw)},oo.prototype.ra=function(){ct(this.g,"b")},fu.prototype.createWebChannel=fu.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,zy=Hn.createWebChannelTransport=function(){return new fu},qy=Hn.getStatEventTarget=function(){return tu()},Hy=Hn.Event=Qr,$d=Hn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nu.NO_ERROR=0,nu.TIMEOUT=8,nu.HTTP_ERROR=6,Qa=Hn.ErrorCode=nu,_E.COMPLETE="complete",$y=Hn.EventType=_E,pE.EventType=qs,qs.OPEN="a",qs.CLOSE="b",qs.ERROR="c",qs.MESSAGE="d",tt.prototype.listen=tt.prototype.K,qo=Hn.WebChannel=pE,FU=Hn.FetchXmlHttpFactory=Js,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,Uy=Hn.XhrIo=Pe}).apply(typeof Ud<"u"?Ud:typeof self<"u"?self:typeof window<"u"?window:{});var zS="@firebase/firestore",WS="4.8.0";var $e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");var Rs="11.10.0";var Mr=new hn("@firebase/firestore");function Zo(){return Mr.logLevel}function uA(n){Mr.setLogLevel(n)}function x(n,...e){if(Mr.logLevel<=se.DEBUG){let t=e.map(cI);Mr.debug(`Firestore (${Rs}): ${n}`,...t)}}function Fe(n,...e){if(Mr.logLevel<=se.ERROR){let t=e.map(cI);Mr.error(`Firestore (${Rs}): ${n}`,...t)}}function yt(n,...e){if(Mr.logLevel<=se.WARN){let t=e.map(cI);Mr.warn(`Firestore (${Rs}): ${n}`,...t)}}function cI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function $(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,lA(n,r,t)}function lA(n,e,t){let r=`FIRESTORE (${Rs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Fe(r),new Error(r)}function H(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||lA(e,i,r)}function $K(n,e){n||$(57014,e)}function F(n,e){return n}var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends Pt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qe=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var rh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Xy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($e.UNAUTHENTICATED))}shutdown(){}},ev=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},tv=class{constructor(e){this.t=e,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){H(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new qe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>v(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qe)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(H(typeof r.accessToken=="string",31837,{l:r}),new rh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return H(e===null||typeof e=="string",2055,{h:e}),new $e(e)}},nv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},rv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new nv(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t($e.FIRST_PARTY))}shutdown(){}invalidateToken(){}},lc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},iv=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){H(this.o===void 0,3512);let r=o=>{o.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,x("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lc(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(H(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new lc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}},GS=class{getToken(){return Promise.resolve(new lc(""))}invalidateToken(){}start(e,t){}shutdown(){}};function LU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function uI(){return new TextEncoder}var dc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=LU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function z(n,e){return n<e?-1:n>e?1:0}function ov(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return z(r,i);{let o=uI(),s=VU(o.encode(KS(n,t)),o.encode(KS(e,t)));return s!==0?s:z(r,i)}}t+=r>65535?2:1}return z(n.length,e.length)}function KS(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function VU(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return z(n[t],e[t]);return z(n.length,e.length)}function ss(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function dA(n){return n+"\0"}var sv="__name__",ih=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&$(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&$(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return z(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):ov(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $n.fromString(e.substring(4,e.length-2))}},ue=class n extends ih{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},jU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ze=class n extends ih{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return jU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sv}static keyField(){return new n([sv])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var V=class n{constructor(e){this.path=e}static fromPath(e){return new n(ue.fromString(e))}static fromName(e){return new n(ue.fromString(e).popFirst(5))}static empty(){return new n(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ue(e.slice()))}};function lI(n,e,t){if(!t)throw new k(S.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BU(n,e,t,r){if(e===!0&&r===!0)throw new k(S.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QS(n){if(!V.isDocumentKey(n))throw new k(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function YS(n){if(V.isDocumentKey(n))throw new k(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$(12329,{type:typeof n})}function ae(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=sf(n);throw new k(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function fA(n,e){if(e<=0)throw new k(S.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function He(n,e){let t={typeString:n};return e&&(t.value=e),t}function Xi(n,e){if(!hA(n))throw new k(S.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new k(S.INVALID_ARGUMENT,t);return!0}var ZS=-62135596800,JS=1e6,Ae=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*JS);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ZS)throw new k(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JS}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xi(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-ZS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:He("string",Ae._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};var q=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ae(0,0))}static max(){return new n(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var as=-1,kr=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function av(n){return n.fields.find(e=>e.kind===2)}function Pi(n){return n.fields.filter(e=>e.kind!==2)}function UU(n,e){let t=z(n.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let r=0;r<Math.min(n.fields.length,e.fields.length);++r)if(t=$U(n.fields[r],e.fields[r]),t!==0)return t;return z(n.fields.length,e.fields.length)}kr.UNKNOWN_ID=-1;var zn=class{constructor(e,t){this.fieldPath=e,this.kind=t}};function $U(n,e){let t=ze.comparator(n.fieldPath,e.fieldPath);return t!==0?t:z(n.kind,e.kind)}var cs=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,qt.min())}};function pA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new Ae(t+1,0):new Ae(t,r));return new qt(i,V.empty(),e)}function gA(n){return new qt(n.readTime,n.key,as)}var qt=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(q.min(),V.empty(),as)}static max(){return new n(q.max(),V.empty(),as)}};function dI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=V.comparator(n.documentKey,e.documentKey),t!==0?t:z(n.largestBatchId,e.largestBatchId))}var mA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",oh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Hr(n){return v(this,null,function*(){if(n.code!==S.FAILED_PRECONDITION||n.message!==mA)throw n;x("LocalStore","Unexpectedly lost primary lease")})}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var kt="SimpleDb",sh=class n{static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ji(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new qe,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ji(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{let i=hI(r.target.error);this.S.reject(new ji(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(x(kt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new uv(t)}},xr=class n{static delete(e){return x(kt,"Removing database:",e),ki(sd().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Lo())return!1;if(n.F())return!0;let e=Oe(),t=n.M(e),r=0<t&&t<10,i=yA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,n.M(Oe())===12.2&&Fe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}k(e){return v(this,null,function*(){return this.db||(x(kt,"Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ji(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(S.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ji(e,s))},i.onupgradeneeded=o=>{x(kt,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${s.version}`);this.B.q(s,i.transaction,o.oldVersion,this.version).next(()=>{x(kt,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{let r=t.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",t=>{var r;t.newVersion===null&&(yt('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db})}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}runTransaction(e,t,r,i){return v(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.k(e);let a=sh.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.v(),l)).catch(l=>(a.abort(l),N.reject(l))).toPromise();return c.catch(()=>{}),yield a.D,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(x(kt,"Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function yA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var cv=class{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return ki(this.$.delete())}},ji=class extends k{constructor(e,t){super(S.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function qr(n){return n.name==="IndexedDbTransactionError"}var uv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(x(kt,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(x(kt,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ki(r)}add(e){return x(kt,"ADD",this.store.name,e,e),ki(this.store.add(e))}get(e){return ki(this.store.get(e)).next(t=>(t===void 0&&(t=null),x(kt,"GET",this.store.name,e,t),t))}delete(e){return x(kt,"DELETE",this.store.name,e),ki(this.store.delete(e))}count(){return x(kt,"COUNT",this.store.name),ki(this.store.count())}j(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new N((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.J(o,(a,c)=>{s.push(c)}).next(()=>s)}}H(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new N((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}Y(e,t){x(kt,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Z=!1;let i=this.cursor(r);return this.J(i,(o,s,a)=>a.delete())}X(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.J(i,t)}ee(e){let t=this.cursor({});return new N((r,i)=>{t.onerror=o=>{let s=hI(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}J(e,t){let r=[];return new N((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new cv(a),l=t(a.primaryKey,a.value,c);if(l instanceof N){let d=l.catch(f=>(c.done(),N.reject(f)));r.push(d)}c.isDone?i():c.W===null?a.continue():a.continue(c.W)}}).next(()=>N.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ki(n){return new N((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=hI(r.target.error);t(i)}})}var XS=!1;function hI(n){let e=xr.M(Oe());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XS||(XS=!0,setTimeout(()=>{throw r},0)),r}}return n}var nc="IndexBackfiller",lv=class{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){x(nc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>v(this,null,function*(){this.task=null;try{let t=yield this.te.re();x(nc,`Documents written: ${t}`)}catch(t){qr(t)?x(nc,"Ignoring IndexedDB error during index backfill: ",t):yield Hr(t)}yield this.ne(6e4)}))}},dv=class{constructor(e,t){this.localStore=e,this.persistence=t}re(e=50){return v(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))})}ie(e,t){let r=new Set,i=t,o=!0;return N.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return x(nc,`Processing collection: ${s}`),this.se(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.oe(i,o)).next(a=>(x(nc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}oe(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=gA(o);dI(s,r)>0&&(r=s)}),new qt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var xt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Rr=-1;function Hc(n){return n==null}function hc(n){return n===0&&1/n==-1/0}function vA(n){return typeof n=="number"&&Number.isInteger(n)&&!hc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var ah="";function st(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=e0(e)),e=HU(n.get(t),e);return e0(e)}function HU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case ah:t+="";break;default:t+=o}}return t}function e0(n){return n+ah+""}function vn(n){let e=n.length;if(H(e>=2,64408,{path:n}),e===2)return H(n.charAt(0)===ah&&n.charAt(1)==="",56145,{path:n}),ue.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf(ah,o);switch((s<0||s>t)&&$(50515,{path:n}),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:$(61167,{path:n})}o=s+2}return new ue(r)}var Mi="remoteDocuments",qc="owner",zo="owner",fc="mutationQueues",qU="userId",en="mutations",t0="batchId",Li="userMutationsIndex",n0=["userId","batchId"];function Qd(n,e){return[n,st(e)]}function _A(n,e,t){return[n,st(e),t]}var zU={},us="documentMutations",ch="remoteDocumentsV14",WU=["prefixPath","collectionGroup","readTime","documentId"],Yd="documentKeyIndex",GU=["prefixPath","collectionGroup","documentId"],IA="collectionGroupIndex",KU=["collectionGroup","readTime","prefixPath","documentId"],pc="remoteDocumentGlobal",hv="remoteDocumentGlobalKey",ls="targets",EA="queryTargetsIndex",QU=["canonicalId","targetId"],ds="targetDocuments",YU=["targetId","path"],fI="documentTargetsIndex",ZU=["path","targetId"],uh="targetGlobalKey",Bi="targetGlobal",gc="collectionParents",JU=["collectionId","parent"],hs="clientMetadata",XU="clientId",af="bundles",e$="bundleId",cf="namedQueries",t$="name",pI="indexConfiguration",n$="indexId",fv="collectionGroupIndex",r$="collectionGroup",rc="indexState",i$=["indexId","uid"],wA="sequenceNumberIndex",o$=["uid","sequenceNumber"],ic="indexEntries",s$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TA="documentKeyIndex",a$=["indexId","uid","orderedDocumentKey"],uf="documentOverlays",c$=["userId","collectionPath","documentId"],pv="collectionPathOverlayIndex",u$=["userId","collectionPath","largestBatchId"],DA="collectionGroupOverlayIndex",l$=["userId","collectionGroup","largestBatchId"],gI="globals",d$="name",bA=[fc,en,us,Mi,ls,qc,Bi,ds,hs,pc,gc,af,cf],h$=[...bA,uf],CA=[fc,en,us,ch,ls,qc,Bi,ds,hs,pc,gc,af,cf,uf],SA=CA,mI=[...SA,pI,rc,ic],f$=mI,AA=[...mI,gI],p$=AA;var mc=class extends oh{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}};function Qe(n,e){let t=F(n);return xr.N(t.ce,e)}function r0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NA(n,e){let t=[];for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function RA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ce=class n{constructor(e,t){this.comparator=e,this.root=t||En.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ts(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ts(this.root,e,this.comparator,!1)}getReverseIterator(){return new ts(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ts(this.root,e,this.comparator,!0)}},ts=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},En=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new En(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _e=class n{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lh(this.data.getIterator())}getIteratorFrom(e){return new lh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},lh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Wo(n){return n.hasNext()?n.getNext():void 0}var Ot=class n{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new n([])}unionWith(e){let t=new _e(ze.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ss(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var dh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function qK(){return typeof atob<"u"}var Ve=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ve.EMPTY_BYTE_STRING=new Ve("");var g$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kn(n){if(H(!!n,39018),typeof n=="string"){let e=0,t=g$.exec(n);if(H(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(n.seconds),nanos:Se(n.nanos)}}function Se(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qn(n){return typeof n=="string"?Ve.fromBase64String(n):Ve.fromUint8Array(n)}var PA="server_timestamp",MA="__type__",kA="__previous_value__",xA="__local_write_time__";function lf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[MA])===null||t===void 0?void 0:t.stringValue)===PA}function df(n){let e=n.mapValue.fields[kA];return lf(e)?df(e):e}function yc(n){let e=Kn(n.mapValue.fields[xA].timestampValue);return new Ae(e.seconds,e.nanos)}var gv=class{constructor(e,t,r,i,o,s,a,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=d}},vc="(default)",fs=class n{constructor(e,t){this.projectId=e,this.database=t||vc}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===vc}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var yI="__type__",OA="__max__",Ar={mapValue:{fields:{__type__:{stringValue:OA}}}},vI="__vector__",ps="value",Zd={nullValue:"NULL_VALUE"};function Or(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lf(n)?4:FA(n)?9007199254740991:hf(n)?10:11:$(28295,{value:n})}function Dn(n,e){if(n===e)return!0;let t=Or(n);if(t!==Or(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yc(n).isEqual(yc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Kn(i.timestampValue),a=Kn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Qn(i.bytesValue).isEqual(Qn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Se(i.geoPointValue.latitude)===Se(o.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Se(i.integerValue)===Se(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Se(i.doubleValue),a=Se(o.doubleValue);return s===a?hc(s)===hc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ss(n.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(r0(s)!==r0(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Dn(s[c],a[c])))return!1;return!0}(n,e);default:return $(52216,{left:n})}}function _c(n,e){return(n.values||[]).find(t=>Dn(t,e))!==void 0}function Fr(n,e){if(n===e)return 0;let t=Or(n),r=Or(e);if(t!==r)return z(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return z(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Se(o.integerValue||o.doubleValue),c=Se(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return i0(n.timestampValue,e.timestampValue);case 4:return i0(yc(n),yc(e));case 5:return ov(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Qn(o),c=Qn(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=z(a[l],c[l]);if(d!==0)return d}return z(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=z(Se(o.latitude),Se(s.latitude));return a!==0?a:z(Se(o.longitude),Se(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return o0(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,d;let f=o.fields||{},g=s.fields||{},m=(a=f[ps])===null||a===void 0?void 0:a.arrayValue,w=(c=g[ps])===null||c===void 0?void 0:c.arrayValue,R=z(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:o0(m,w)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ar.mapValue&&s===Ar.mapValue)return 0;if(o===Ar.mapValue)return 1;if(s===Ar.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=ov(c[f],d[f]);if(g!==0)return g;let m=Fr(a[c[f]],l[d[f]]);if(m!==0)return m}return z(c.length,d.length)}(n.mapValue,e.mapValue);default:throw $(23264,{le:t})}}function i0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return z(n,e);let t=Kn(n),r=Kn(e),i=z(t.seconds,r.seconds);return i!==0?i:z(t.nanos,r.nanos)}function o0(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Fr(t[i],r[i]);if(o)return o}return z(t.length,r.length)}function gs(n){return mv(n)}function mv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Kn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Qn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return V.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=mv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${mv(t.fields[s])}`;return i+"}"}(n.mapValue):$(61005,{value:n})}function Jd(n){switch(Or(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=df(n);return e?16+Jd(e):16;case 5:return 2*n.stringValue.length;case 6:return Qn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Jd(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return zr(r.fields,(o,s)=>{i+=o.length+Jd(s)}),i}(n.mapValue);default:throw $(13486,{value:n})}}function Ui(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yv(n){return!!n&&"integerValue"in n}function Ic(n){return!!n&&"arrayValue"in n}function s0(n){return!!n&&"nullValue"in n}function a0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xd(n){return!!n&&"mapValue"in n}function hf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[yI])===null||t===void 0?void 0:t.stringValue)===vI}function oc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return zr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=oc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OA}var LA={mapValue:{fields:{[yI]:{stringValue:vI},[ps]:{arrayValue:{}}}}};function m$(n){return"nullValue"in n?Zd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ui(fs.empty(),V.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?hf(n)?LA:{mapValue:{}}:$(35942,{value:n})}function y$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ui(fs.empty(),V.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?LA:"mapValue"in n?hf(n)?{mapValue:{}}:Ar:$(61959,{value:n})}function c0(n,e){let t=Fr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function u0(n,e){let t=Fr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var ot=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(t)}setAll(e){let t=ze.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=oc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(oc(this.value))}};function VA(n){let e=[];return zr(n.fields,(t,r)=>{let i=new ze([t]);if(Xd(r)){let o=VA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ot(e)}var We=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,q.min(),q.min(),q.min(),ot.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,q.min(),q.min(),ot.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,q.min(),q.min(),ot.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var bn=class{constructor(e,t){this.position=e,this.inclusive=t}};function l0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=V.comparator(V.fromName(s.referenceValue),t.key):r=Fr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function d0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Dn(n.position[t],e.position[t]))return!1;return!0}var $i=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function v$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var hh=class{},le=class n extends hh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Iv(e,t,r):t==="array-contains"?new Tv(e,r):t==="in"?new fh(e,r):t==="not-in"?new Dv(e,r):t==="array-contains-any"?new bv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ev(e,r):new wv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fr(t,this.value)):t!==null&&Or(this.value)===Or(t)&&this.matchesComparison(Fr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ye=class n extends hh{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return ms(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function ms(n){return n.op==="and"}function vv(n){return n.op==="or"}function _I(n){return jA(n)&&ms(n)}function jA(n){for(let e of n.filters)if(e instanceof ye)return!1;return!0}function _v(n){if(n instanceof le)return n.field.canonicalString()+n.op.toString()+gs(n.value);if(_I(n))return n.filters.map(e=>_v(e)).join(",");{let e=n.filters.map(t=>_v(t)).join(",");return`${n.op}(${e})`}}function BA(n,e){return n instanceof le?function(r,i){return i instanceof le&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(n,e):n instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&BA(s,i.filters[a]),!0):!1}(n,e):void $(19439)}function UA(n,e){let t=n.filters.concat(e);return ye.create(t,n.op)}function $A(n){return n instanceof le?function(t){return`${t.field.canonicalString()} ${t.op} ${gs(t.value)}`}(n):n instanceof ye?function(t){return t.op.toString()+" {"+t.getFilters().map($A).join(" ,")+"}"}(n):"Filter"}var Iv=class extends le{constructor(e,t,r){super(e,t,r),this.key=V.fromName(r.referenceValue)}matches(e){let t=V.comparator(e.key,this.key);return this.matchesComparison(t)}},Ev=class extends le{constructor(e,t){super(e,"in",t),this.keys=HA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wv=class extends le{constructor(e,t){super(e,"not-in",t),this.keys=HA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function HA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>V.fromName(r.referenceValue))}var Tv=class extends le{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ic(t)&&_c(t.arrayValue,this.value)}},fh=class extends le{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&_c(this.value.arrayValue,t)}},Dv=class extends le{constructor(e,t){super(e,"not-in",t)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_c(this.value.arrayValue,t)}},bv=class extends le{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ic(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_c(this.value.arrayValue,r))}};var Cv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function Sv(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Cv(n,e,t,r,i,o,s)}function Hi(n){let e=F(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_v(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Hc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gs(r)).join(",")),e.Pe=t}return e.Pe}function zc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!v$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!d0(n.startAt,e.startAt)&&d0(n.endAt,e.endAt)}function ph(n){return V.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function gh(n,e){return n.filters.filter(t=>t instanceof le&&t.field.isEqual(e))}function h0(n,e,t){let r=Zd,i=!0;for(let o of gh(n,e)){let s=Zd,a=!0;switch(o.op){case"<":case"<=":s=m$(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Zd}c0({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];c0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function f0(n,e,t){let r=Ar,i=!0;for(let o of gh(n,e)){let s=Ar,a=!0;switch(o.op){case">=":case">":s=y$(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ar}u0({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];u0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var tn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function qA(n,e,t,r,i,o,s,a){return new tn(n,e,t,r,i,o,s,a)}function Ps(n){return new tn(n)}function p0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function II(n){return n.collectionGroup!==null}function ns(n){let e=F(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new _e(ze.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new $i(o,r))}),t.has(ze.keyField().canonicalString())||e.Te.push(new $i(ze.keyField(),r))}return e.Te}function at(n){let e=F(n);return e.Ie||(e.Ie=WA(e,ns(n))),e.Ie}function zA(n){let e=F(n);return e.de||(e.de=WA(e,n.explicitOrderBy)),e.de}function WA(n,e){if(n.limitType==="F")return Sv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new $i(i.field,o)});let t=n.endAt?new bn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bn(n.startAt.position,n.startAt.inclusive):null;return Sv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Av(n,e){let t=n.filters.concat([e]);return new tn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function mh(n,e,t){return new tn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wc(n,e){return zc(at(n),at(e))&&n.limitType===e.limitType}function GA(n){return`${Hi(at(n))}|lt:${n.limitType}`}function Jo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$A(i)).join(", ")}]`),Hc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>gs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>gs(i)).join(",")),`Target(${r})`}(at(n))}; limitType=${n.limitType})`}function Gc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):V.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ns(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=l0(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,ns(r),i)||r.endAt&&!function(s,a,c){let l=l0(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,ns(r),i))}(n,e)}function KA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QA(n){return(e,t)=>{let r=!1;for(let i of ns(n)){let o=_$(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _$(n,e,t){let r=n.field.isKeyField()?V.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Fr(c,l):$(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:n.dir})}}var nn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return RA(this.inner)}size(){return this.innerSize}};var I$=new Ce(V.comparator);function St(){return I$}var YA=new Ce(V.comparator);function ec(...n){let e=YA;for(let t of n)e=e.insert(t.key,t);return e}function ZA(n){let e=YA;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function _n(){return sc()}function JA(){return sc()}function sc(){return new nn(n=>n.toString(),(n,e)=>n.isEqual(e))}var E$=new Ce(V.comparator),w$=new _e(V.comparator);function X(...n){let e=w$;for(let t of n)e=e.add(t);return e}var T$=new _e(z);function EI(){return T$}function wI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function XA(n){return{integerValue:""+n}}function eN(n,e){return vA(e)?XA(e):wI(n,e)}var ys=class{constructor(){this._=void 0}};function D$(n,e,t){return n instanceof Lr?function(i,o){let s={fields:{[MA]:{stringValue:PA},[xA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lf(o)&&(o=df(o)),o&&(s.fields[kA]=o),{mapValue:s}}(t,e):n instanceof Yn?nN(n,e):n instanceof Zn?rN(n,e):function(i,o){let s=tN(i,o),a=g0(s)+g0(i.Ee);return yv(s)&&yv(i.Ee)?XA(a):wI(i.serializer,a)}(n,e)}function b$(n,e,t){return n instanceof Yn?nN(n,e):n instanceof Zn?rN(n,e):t}function tN(n,e){return n instanceof Vr?function(r){return yv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Lr=class extends ys{},Yn=class extends ys{constructor(e){super(),this.elements=e}};function nN(n,e){let t=iN(e);for(let r of n.elements)t.some(i=>Dn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Zn=class extends ys{constructor(e){super(),this.elements=e}};function rN(n,e){let t=iN(e);for(let r of n.elements)t=t.filter(i=>!Dn(i,r));return{arrayValue:{values:t}}}var Vr=class extends ys{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function g0(n){return Se(n.integerValue||n.doubleValue)}function iN(n){return Ic(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var qi=class{constructor(e,t){this.field=e,this.transform=t}};function C$(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Yn&&i instanceof Yn||r instanceof Zn&&i instanceof Zn?ss(r.elements,i.elements,Dn):r instanceof Vr&&i instanceof Vr?Dn(r.Ee,i.Ee):r instanceof Lr&&i instanceof Lr}(n.transform,e.transform)}var Nv=class{constructor(e,t){this.version=e,this.transformResults=t}},ke=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function eh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vs=class{};function oN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Br(n.key,ke.none()):new jr(n.key,n.data,ke.none());{let t=n.data,r=ot.empty(),i=new _e(ze.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new rn(n.key,r,new Ot(i.toArray()),ke.none())}}function S$(n,e,t){n instanceof jr?function(i,o,s){let a=i.value.clone(),c=y0(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof rn?function(i,o,s){if(!eh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=y0(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(sN(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ac(n,e,t,r){return n instanceof jr?function(o,s,a,c){if(!eh(o.precondition,s))return a;let l=o.value.clone(),d=v0(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof rn?function(o,s,a,c){if(!eh(o.precondition,s))return a;let l=v0(o.fieldTransforms,c,s),d=s.data;return d.setAll(sN(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return eh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function A$(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=tN(r.transform,i||null);o!=null&&(t===null&&(t=ot.empty()),t.set(r.field,o))}return t||null}function m0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ss(r,i,(o,s)=>C$(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var jr=class extends vs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rn=class extends vs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function sN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function y0(n,e,t){let r=new Map;H(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,b$(s,a,t[i]))}return r}function v0(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,D$(o,s,e))}return r}var Br=class extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ec=class extends vs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&S$(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=JA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=oN(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),X())}isEqual(e){return this.batchId===e.batchId&&ss(this.mutations,e.mutations,(t,r)=>m0(t,r))&&ss(this.baseMutations,e.baseMutations,(t,r)=>m0(t,r))}},Rv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){H(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return E$}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Tc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yh=class{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}};var Pv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Be,fe;function aN(n){switch(n){case S.OK:return $(64938);case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return $(15467,{code:n})}}function cN(n){if(n===void 0)return Fe("GRPC error has no .code"),S.UNKNOWN;switch(n){case Be.OK:return S.OK;case Be.CANCELLED:return S.CANCELLED;case Be.UNKNOWN:return S.UNKNOWN;case Be.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Be.INTERNAL:return S.INTERNAL;case Be.UNAVAILABLE:return S.UNAVAILABLE;case Be.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Be.NOT_FOUND:return S.NOT_FOUND;case Be.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Be.ABORTED:return S.ABORTED;case Be.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Be.DATA_LOSS:return S.DATA_LOSS;default:return $(39323,{code:n})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var vh=null;var N$=new $n([4294967295,4294967295],0);function _0(n){let e=uI().encode(n),t=new By;return t.update(e),new Uint8Array(t.digest())}function I0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $n([t,r],0),new $n([i,o],0)]}var Mv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vi(`Invalid padding: ${t}`);if(r<0)throw new Vi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vi(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=$n.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply($n.fromNumber(r)));return i.compare(N$)===1&&(i=new $n([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=_0(e),[r,i]=I0(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=_0(e),[r,i]=I0(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Vi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Dc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(q.min(),i,new Ce(z),St(),X())}},bc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,X(),X(),X())}};var rs=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},_h=class{constructor(e,t){this.targetId=e,this.De=t}},Ih=class{constructor(e,t,r=Ve.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Eh=class{constructor(){this.ve=0,this.Ce=E0(),this.Fe=Ve.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=X(),t=X(),r=X();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new bc(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=E0()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,H(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},kv=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=St(),this.je=Hd(),this.Je=Hd(),this.He=new Ce(z)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(ph(o))if(r===0){let s=new V(o.path);this.Xe(t,s,We.newNoDocument(s,q.min()))}else H(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}vh?.ct(function(d,f,g,m,w){var R,P,O,B,U,W;let de={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},K=f.unchangedNames;return K&&(de.bloomFilter={applied:w===0,hashCount:(R=K?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(B=(O=(P=K?.bits)===null||P===void 0?void 0:P.bitmap)===null||O===void 0?void 0:O.length)!==null&&B!==void 0?B:0,padding:(W=(U=K?.bits)===null||U===void 0?void 0:U.padding)!==null&&W!==void 0?W:0,mightContain:T=>{var _;return(_=m?.mightContain(T))!==null&&_!==void 0&&_}}),de}(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Qn(r).toUint8Array()}catch(c){if(c instanceof dh)return yt("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Mv(s,i,o)}catch(c){return yt(c instanceof Vi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&ph(a.target)){let c=new V(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,We.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=X();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.st(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Dc(e,t,this.He,this.ze,r);return this.ze=St(),this.je=Hd(),this.Je=Hd(),this.He=new Ce(z),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Eh,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new _e(z),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new _e(z),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||x("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Eh),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Hd(){return new Ce(V.comparator)}function E0(){return new Ce(V.comparator)}var R$={asc:"ASCENDING",desc:"DESCENDING"},P$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M$={and:"AND",or:"OR"},xv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ov(n,e){return n.useProto3Json||Hc(e)?e:{value:e}}function _s(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function k$(n,e){return _s(n,e.toTimestamp())}function Le(n){return H(!!n,49232),q.fromTimestamp(function(t){let r=Kn(t);return new Ae(r.seconds,r.nanos)}(n))}function TI(n,e){return Fv(n,e).canonicalString()}function Fv(n,e){let t=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function lN(n){let e=ue.fromString(n);return H(_N(e),10190,{key:e.toString()}),e}function Cc(n,e){return TI(n.databaseId,e.path)}function wn(n,e){let t=lN(e);if(t.get(1)!==n.databaseId.projectId)throw new k(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new V(fN(t))}function dN(n,e){return TI(n.databaseId,e)}function hN(n){let e=lN(n);return e.length===4?ue.emptyPath():fN(e)}function Lv(n){return new ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fN(n){return H(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function w0(n,e,t){return{name:Cc(n,e),fields:t.value.mapValue.fields}}function ff(n,e,t){let r=wn(n,e.name),i=Le(e.updateTime),o=e.createTime?Le(e.createTime):q.min(),s=new ot({mapValue:{fields:e.fields}}),a=We.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function x$(n,e){return"found"in e?function(r,i){H(!!i.found,43571),i.found.name,i.found.updateTime;let o=wn(r,i.found.name),s=Le(i.found.updateTime),a=i.found.createTime?Le(i.found.createTime):q.min(),c=new ot({mapValue:{fields:i.found.fields}});return We.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){H(!!i.missing,3894),H(!!i.readTime,22933);let o=wn(r,i.missing),s=Le(i.readTime);return We.newNoDocument(o,s)}(n,e):$(7234,{result:e})}function O$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(H(d===void 0||typeof d=="string",58123),Ve.fromBase64String(d||"")):(H(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ve.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?S.UNKNOWN:cN(l.code);return new k(d,l.message||"")}(s);t=new Ih(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=wn(n,r.document.name),o=Le(r.document.updateTime),s=r.document.createTime?Le(r.document.createTime):q.min(),a=new ot({mapValue:{fields:r.document.fields}}),c=We.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new rs(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=wn(n,r.document),o=r.readTime?Le(r.readTime):q.min(),s=We.newNoDocument(i,o),a=r.removedTargetIds||[];t=new rs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=wn(n,r.document),o=r.removedTargetIds||[];t=new rs([],o,i,null)}else{if(!("filter"in e))return $(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Pv(i,o),a=r.targetId;t=new _h(a,s)}}return t}function Sc(n,e){let t;if(e instanceof jr)t={update:w0(n,e.key,e.value)};else if(e instanceof Br)t={delete:Cc(n,e.key)};else if(e instanceof rn)t={update:w0(n,e.key,e.data),updateMask:U$(e.fieldMask)};else{if(!(e instanceof Ec))return $(16599,{Rt:e.type});t={verify:Cc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Lr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vr)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw $(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:k$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)}(n,e.precondition)),t}function Vv(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?ke.updateTime(Le(o.updateTime)):o.exists!==void 0?ke.exists(o.exists):ke.none()}(e.currentDocument):ke.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)H(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),c=new Lr;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Yn(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Zn(d)}else"increment"in a?c=new Vr(s,a.increment):$(16584,{proto:a});let l=ze.fromServerFormat(a.fieldPath);return new qi(l,c)}(n,i)):[];if(e.update){e.update.name;let i=wn(n,e.update.name),o=new ot({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Ot(l.map(d=>ze.fromServerFormat(d)))}(e.updateMask);return new rn(i,o,s,t,r)}return new jr(i,o,t,r)}if(e.delete){let i=wn(n,e.delete);return new Br(i,t)}if(e.verify){let i=wn(n,e.verify);return new Ec(i,t)}return $(1463,{proto:e})}function F$(n,e){return n&&n.length>0?(H(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Le(i.updateTime):Le(o);return s.isEqual(q.min())&&(s=Le(o)),new Nv(s,i.transformResults||[])}(t,e))):[]}function pN(n,e){return{documents:[dN(n,e.path)]}}function pf(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dN(n,i);let o=function(l){if(l.length!==0)return vN(ye.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Cr(g.field),direction:V$(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Ov(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function gN(n,e,t,r){let{Vt:i,parent:o}=pf(n,e),s={},a=[],c=0;return t.forEach(l=>{let d=r?l.alias:"aggregate_"+c++;s[d]=l.alias,l.aggregateType==="count"?a.push({alias:d,count:{}}):l.aggregateType==="avg"?a.push({alias:d,avg:{field:Cr(l.fieldPath)}}):l.aggregateType==="sum"&&a.push({alias:d,sum:{field:Cr(l.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ft:s,parent:o}}function mN(n){let e=hN(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){H(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=yN(f);return g instanceof ye&&_I(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(w){return new $i(Xo(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Hc(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new bn(m,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,m=f.values||[];return new bn(m,g)}(t.endAt)),qA(e,i,s,o,a,"F",c,l)}function L$(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Xo(t.unaryFilter.field);return le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xo(t.unaryFilter.field);return le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Xo(t.unaryFilter.field);return le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Xo(t.unaryFilter.field);return le.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(n):n.fieldFilter!==void 0?function(t){return le.create(Xo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ye.create(t.compositeFilter.filters.map(r=>yN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(t.compositeFilter.op))}(n):$(30097,{filter:n})}function V$(n){return R$[n]}function j$(n){return P$[n]}function B$(n){return M$[n]}function Cr(n){return{fieldPath:n.canonicalString()}}function Xo(n){return ze.fromServerFormat(n.fieldPath)}function vN(n){return n instanceof le?function(t){if(t.op==="=="){if(a0(t.value))return{unaryFilter:{field:Cr(t.field),op:"IS_NAN"}};if(s0(t.value))return{unaryFilter:{field:Cr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(a0(t.value))return{unaryFilter:{field:Cr(t.field),op:"IS_NOT_NAN"}};if(s0(t.value))return{unaryFilter:{field:Cr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cr(t.field),op:j$(t.op),value:t.value}}}(n):n instanceof ye?function(t){let r=t.getFilters().map(i=>vN(i));return r.length===1?r[0]:{compositeFilter:{op:B$(t.op),filters:r}}}(n):$(54877,{filter:n})}function U$(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _N(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Is=class n{constructor(e,t,r,i,o=q.min(),s=q.min(),a=Ve.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var wh=class{constructor(e){this.gt=e}};function $$(n,e){let t;if(e.document)t=ff(n.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=V.fromSegments(e.noDocument.path),i=Wi(e.noDocument.readTime);t=We.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $(56709);{let r=V.fromSegments(e.unknownDocument.path),i=Wi(e.unknownDocument.version);t=We.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ae(i[0],i[1]);return q.fromTimestamp(o)}(e.readTime)),t}function T0(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Th(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Cc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:_s(o,s.version.toTimestamp()),createTime:_s(o,s.createTime.toTimestamp())}}(n.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:zi(e.version)};else{if(!e.isUnknownDocument())return $(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:zi(e.version)}}return r}function Th(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function zi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wi(n){let e=new Ae(n.seconds,n.nanoseconds);return q.fromTimestamp(e)}function xi(n,e){let t=(e.baseMutations||[]).map(o=>Vv(n.gt,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Vv(n.gt,o)),i=Ae.fromMillis(e.localWriteTimeMs);return new wc(e.batchId,i,t,r)}function tc(n){let e=Wi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Wi(n.lastLimboFreeSnapshotVersion):q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){let s=o.documents.length;return H(s===1,1966,{count:s}),at(Ps(hN(o.documents[0])))}(n.query):function(o){return at(mN(o))}(n.query),new Is(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ve.fromBase64String(n.resumeToken))}function IN(n,e){let t=zi(e.snapshotVersion),r=zi(e.lastLimboFreeSnapshotVersion),i;i=ph(e.target)?pN(n.gt,e.target):pf(n.gt,e.target).Vt;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function gf(n){let e=mN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mh(e,e.limit,"L"):e}function Wy(n,e){return new Tc(e.largestBatchId,Vv(n.gt,e.overlayMutation))}function D0(n,e){let t=e.path.lastSegment();return[n,st(e.path.popLast()),t]}function b0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:zi(r.readTime),documentKey:st(r.documentKey.path),largestBatchId:r.largestBatchId}}var jv=class{getBundleMetadata(e,t){return C0(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Wi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return C0(e).put(function(i){return{bundleId:i.id,createTime:zi(Le(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return S0(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:gf(o.bundledQuery),readTime:Wi(o.readTime)}}(r)})}saveNamedQuery(e,t){return S0(e).put(function(i){return{name:i.name,readTime:zi(Le(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function C0(n){return Qe(n,af)}function S0(n){return Qe(n,cf)}var Dh=class n{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Ya(e).get(D0(this.userId,t)).next(r=>r?Wy(this.serializer,r):null)}getOverlays(e,t){let r=_n();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Tc(t,s);i.push(this.wt(e,a))}),N.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(st(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ya(e).Y(pv,a))}),N.waitFor(o)}getOverlaysForCollection(e,t,r){let i=_n(),o=st(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ya(e).j(pv,s).next(a=>{for(let c of a){let l=Wy(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=_n(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ya(e).X({index:DA,range:a},(c,l,d)=>{let f=Wy(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}wt(e,t){return Ya(e).put(function(i,o,s){let[a,c,l]=D0(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Sc(i.gt,s.mutation)}}(this.serializer,this.userId,t))}};function Ya(n){return Qe(n,uf)}var Bv=class{St(e){return Qe(e,gI)}getSessionToken(e){return this.St(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ve.fromUint8Array(r):Ve.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}};var qn=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Se(e.integerValue));else if("doubleValue"in e){let r=Se(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),hc(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Kn(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Qn(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?FA(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):hf(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):$(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ps,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Se(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),V.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};qn.Ut=new qn;var Go=255;function H$(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function A0(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=H$(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Uv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{let i=t.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{let i=t.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){let t=this.Xt(e),r=A0(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}tn(e){let t=this.Xt(e),r=A0(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}nn(){this.rn(Go),this.rn(255)}sn(){this._n(Go),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Wt(e){let t=255&e;t===0?(this.rn(0),this.rn(255)):t===Go?(this.rn(Go),this.rn(0)):this.rn(t)}jt(e){let t=255&e;t===0?(this._n(0),this._n(255)):t===Go?(this._n(Go),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},$v=class{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}},Hv=class{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}},Oi=class{constructor(){this.un=new Uv,this.cn=new $v(this.un),this.ln=new Hv(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}};var Fi=class n{constructor(e,t,r,i){this.Pn=e,this.Tn=t,this.In=r,this.dn=i}En(){let e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:th(this.In),directionalValue:th(this.dn),orderedDocumentKey:th(t),documentKey:r.path.toArray()}}Rn(e,t,r){let i=this.An(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}};function Tr(n,e){let t=n.Pn-e.Pn;return t!==0?t:(t=N0(n.In,e.In),t!==0?t:(t=N0(n.dn,e.dn),t!==0?t:V.comparator(n.Tn,e.Tn)))}function N0(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function th(n){return Am()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function R0(n){return typeof n!="string"?n:function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}var bh=class{constructor(e){this.Vn=new _e((t,r)=>ze.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(H(e.collectionGroup===this.collectionId,49279),this.gn)return!1;let t=av(e);if(t!==void 0&&!this.yn(t))return!1;let r=Pi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.yn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){let a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.wn(a,c)||!this.Sn(this.mn[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.mn.length||!this.Sn(this.mn[s++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new _e(ze.comparator),t=[];for(let r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new zn(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new zn(r.field,0))}for(let r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new zn(r.field,r.dir==="asc"?0:1)));return new kr(kr.UNKNOWN_ID,this.collectionId,t,cs.empty())}yn(e){for(let t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function EN(n){var e,t;if(H(n instanceof le||n instanceof ye,20012),n instanceof le){if(n instanceof fh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>le.create(n.field,"==",o)))||[];return ye.create(i,"or")}return n}let r=n.filters.map(i=>EN(i));return ye.create(r,n.op)}function q$(n){if(n.getFilters().length===0)return[];let e=Wv(EN(n));return H(wN(e),7391),qv(e)||zv(e)?[e]:e.getFilters()}function qv(n){return n instanceof le}function zv(n){return n instanceof ye&&_I(n)}function wN(n){return qv(n)||zv(n)||function(t){if(t instanceof ye&&vv(t)){for(let r of t.getFilters())if(!qv(r)&&!zv(r))return!1;return!0}return!1}(n)}function Wv(n){if(H(n instanceof le||n instanceof ye,34018),n instanceof le)return n;if(n.filters.length===1)return Wv(n.filters[0]);let e=n.filters.map(r=>Wv(r)),t=ye.create(e,n.op);return t=Ch(t),wN(t)?t:(H(t instanceof ye,64498),H(ms(t),40251),H(t.filters.length>1,57927),t.filters.reduce((r,i)=>DI(r,i)))}function DI(n,e){let t;return H(n instanceof le||n instanceof ye,38388),H(e instanceof le||e instanceof ye,25473),t=n instanceof le?e instanceof le?function(i,o){return ye.create([i,o],"and")}(n,e):P0(n,e):e instanceof le?P0(e,n):function(i,o){if(H(i.filters.length>0&&o.filters.length>0,48005),ms(i)&&ms(o))return UA(i,o.getFilters());let s=vv(i)?i:o,a=vv(i)?o:i,c=s.filters.map(l=>DI(l,a));return ye.create(c,"or")}(n,e),Ch(t)}function P0(n,e){if(ms(e))return UA(e,n.getFilters());{let t=e.filters.map(r=>DI(n,r));return ye.create(t,"or")}}function Ch(n){if(H(n instanceof le||n instanceof ye,11850),n instanceof le)return n;let e=n.getFilters();if(e.length===1)return Ch(e[0]);if(jA(n))return n;let t=e.map(i=>Ch(i)),r=[];return t.forEach(i=>{i instanceof le?r.push(i):i instanceof ye&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ye.create(r,n.op)}var Gv=class{constructor(){this.Dn=new Ac}addToCollectionParentIndex(e,t){return this.Dn.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(qt.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(qt.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},Ac=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _e(ue.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _e(ue.comparator)).toArray()}};var M0="IndexedDbIndexManager",qd=new Uint8Array(0),Kv=class{constructor(e,t){this.databaseId=t,this.vn=new Ac,this.Cn=new nn(r=>Hi(r),(r,i)=>zc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});let o={collectionId:r,parent:st(i)};return k0(e).put(o)}return N.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[dA(t),""],!1,!0);return k0(e).j(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(vn(s.parent))}return r})}addFieldIndex(e,t){let r=Za(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Qo(e);return o.next(a=>{s.put(b0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Za(e),i=Qo(e),o=Ko(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Za(e),r=Ko(e),i=Qo(e);return t.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,t){return N.forEach(this.Fn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new bh(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Ko(e),i=!0,o=new Map;return N.forEach(this.Fn(t),s=>this.Mn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=X(),a=[];return N.forEach(o,(c,l)=>{x(M0,`Using index ${function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`}(c)} to execute ${Hi(t)}`);let d=function(U,W){let de=av(W);if(de===void 0)return null;for(let K of gh(U,de.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(l,c),f=function(U,W){let de=new Map;for(let K of Pi(W))for(let T of gh(U,K.fieldPath))switch(T.op){case"==":case"in":de.set(K.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return de.set(K.fieldPath.canonicalString(),T.value),Array.from(de.values())}return null}(l,c),g=function(U,W){let de=[],K=!0;for(let T of Pi(W)){let _=T.kind===0?h0(U,T.fieldPath,U.startAt):f0(U,T.fieldPath,U.startAt);de.push(_.value),K&&(K=_.inclusive)}return new bn(de,K)}(l,c),m=function(U,W){let de=[],K=!0;for(let T of Pi(W)){let _=T.kind===0?f0(U,T.fieldPath,U.endAt):h0(U,T.fieldPath,U.endAt);de.push(_.value),K&&(K=_.inclusive)}return new bn(de,K)}(l,c),w=this.xn(c,l,g),R=this.xn(c,l,m),P=this.On(c,l,f),O=this.Nn(c.indexId,d,w,g.inclusive,R,m.inclusive,P);return N.forEach(O,B=>r.H(B,t.limit).next(U=>{U.forEach(W=>{let de=V.fromSegments(W.documentKey);s.has(de)||(s=s.add(de),a.push(de))})}))}).next(()=>a)}return N.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=q$(ye.create(e.filters,"and")).map(r=>Sv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.Bn(t[f/l]):qd,m=this.Ln(e,g,r[f%l],i),w=this.kn(e,g,o[f%l],s),R=a.map(P=>this.Ln(e,g,P,!0));d.push(...this.createRange(m,w,R))}return d}Ln(e,t,r,i){let o=new Fi(e,V.empty(),t,r);return i?o:o.En()}kn(e,t,r,i){let o=new Fi(e,V.empty(),t,r);return i?o.En():o}Mn(e,t){let r=new bh(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.pn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.Fn(t);return N.forEach(i,o=>this.Mn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new _e(ze.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}qn(e,t){let r=new Oi;for(let i of Pi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.hn(i.kind);qn.Ut.bt(o,s)}return r.an()}Bn(e){let t=new Oi;return qn.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){let r=new Oi;return qn.Ut.bt(Ui(this.databaseId,t),r.hn(function(o){let s=Pi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.an()}On(e,t,r){if(r===null)return[];let i=[];i.push(new Oi);let o=0;for(let s of Pi(e)){let a=r[o++];for(let c of i)if(this.$n(t,s.fieldPath)&&Ic(a))i=this.Un(i,s,a);else{let l=c.hn(s.kind);qn.Ut.bt(a,l)}}return this.Kn(i)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Oi;c.seed(a.an()),qn.Ut.bt(s,c.hn(t.kind)),o.push(c)}return o}$n(e,t){return!!e.filters.find(r=>r instanceof le&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Za(e),i=Qo(e);return(t?r.j(fv,IDBKeyRange.bound(t,t)):r.j()).next(o=>{let s=[];return N.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(d,f){let g=f?new cs(f.sequenceNumber,new qt(Wi(f.readTime),new V(vn(f.documentKey)),f.largestBatchId)):cs.empty(),m=d.fields.map(([w,R])=>new zn(ze.fromServerFormat(w),R));return new kr(d.indexId,d.collectionGroup,m,g)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:z(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Za(e),o=Qo(e);return this.Wn(e).next(s=>i.j(fv,IDBKeyRange.bound(t,t)).next(a=>N.forEach(a,c=>o.put(b0(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return N.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?N.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),N.forEach(a,c=>this.Gn(e,i,c).next(l=>{let d=this.zn(o,c);return l.isEqual(d)?N.resolve():this.jn(e,o,c,l,d)}))))})}Jn(e,t,r,i){return Ko(e).put(i.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,i){return Ko(e).delete(i.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){let i=Ko(e),o=new _e(Tr);return i.X({index:TA,range:IDBKeyRange.only([r.indexId,this.uid,th(this.Qn(r,t))])},(s,a)=>{o=o.add(new Fi(r.indexId,t,R0(a.arrayValue),R0(a.directionalValue)))}).next(()=>o)}zn(e,t){let r=new _e(Tr),i=this.qn(t,e);if(i==null)return r;let o=av(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Ic(s))for(let a of s.arrayValue.values||[])r=r.add(new Fi(t.indexId,e.key,this.Bn(a),i))}else r=r.add(new Fi(t.indexId,e.key,qd,i));return r}jn(e,t,r,i,o){x(M0,"Updating index entries for document '%s'",t.key);let s=[];return function(c,l,d,f,g){let m=c.getIterator(),w=l.getIterator(),R=Wo(m),P=Wo(w);for(;R||P;){let O=!1,B=!1;if(R&&P){let U=d(R,P);U<0?B=!0:U>0&&(O=!0)}else R!=null?B=!0:O=!0;O?(f(P),P=Wo(w)):B?(g(R),R=Wo(m)):(R=Wo(m),P=Wo(w))}}(i,o,Tr,a=>{s.push(this.Jn(e,t,r,a))},a=>{s.push(this.Hn(e,t,r,a))}),N.waitFor(s)}Wn(e){let t=1;return Qo(e).X({index:wA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Tr(s,a)).filter((s,a,c)=>!a||Tr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Tr(s,e),c=Tr(s,t);if(a===0)i[0]=e.En();else if(a>0&&c<0)i.push(s),i.push(s.En());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Yn(i[s],i[s+1]))return[];let a=i[s].Rn(this.uid,qd,V.empty()),c=i[s+1].Rn(this.uid,qd,V.empty());o.push(IDBKeyRange.bound(a,c))}return o}Yn(e,t){return Tr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(x0)}getMinOffset(e,t){return N.mapArray(this.Fn(t),r=>this.Mn(e,r).next(i=>i||$(44426))).next(x0)}};function k0(n){return Qe(n,gc)}function Ko(n){return Qe(n,ic)}function Za(n){return Qe(n,pI)}function Qo(n){return Qe(n,rc)}function x0(n){H(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;dI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qt(e.readTime,e.documentKey,t)}var O0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TN=41943040,Ct=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};function DN(n,e,t){let r=n.store(en),i=n.store(us),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.X({range:s},(d,f,g)=>(a++,g.delete()));o.push(c.next(()=>{H(a===1,47070,{batchId:t.batchId})}));let l=[];for(let d of t.mutations){let f=_A(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return N.waitFor(o).next(()=>l)}function Sh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $(14731);e=n.noDocument}return JSON.stringify(e).length}Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(TN,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);var Ah=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,t,r,i){H(e.uid!=="",64387);let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dr(e).X({index:Li,range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=es(e),s=Dr(e);return s.add({}).next(a=>{H(typeof a=="number",49019);let c=new wc(a,t,r,i),l=function(m,w,R){let P=R.baseMutations.map(B=>Sc(m.gt,B)),O=R.mutations.map(B=>Sc(m.gt,B));return{userId:w,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:P,mutations:O}}(this.serializer,this.userId,c),d=[],f=new _e((g,m)=>z(g.canonicalString(),m.canonicalString()));for(let g of i){let m=_A(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(m,zU))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Zn[a]=c.keys()}),N.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return Dr(e).get(t).next(r=>r?(H(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),xi(this.serializer,r)):null)}Xn(e,t){return this.Zn[t]?N.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Dr(e).X({index:Li,range:i},(s,a,c)=>{a.userId===this.userId&&(H(a.batchId>=r,47524,{er:r}),o=xi(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Rr;return Dr(e).X({index:Li,range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Rr],[this.userId,Number.POSITIVE_INFINITY]);return Dr(e).j(Li,t).next(r=>r.map(i=>xi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Qd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return es(e).X({range:i},(s,a,c)=>{let[l,d,f]=s,g=vn(d);if(l===this.userId&&t.path.isEqual(g))return Dr(e).get(f).next(m=>{if(!m)throw $(61480,{tr:s,batchId:f});H(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:f}),o.push(xi(this.serializer,m))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _e(z),i=[];return t.forEach(o=>{let s=Qd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=es(e).X({range:a},(l,d,f)=>{let[g,m,w]=l,R=vn(m);g===this.userId&&o.path.isEqual(R)?r=r.add(w):f.done()});i.push(c)}),N.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Qd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new _e(z);return es(e).X({range:s},(c,l,d)=>{let[f,g,m]=c,w=vn(g);f===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(m)):d.done()}).next(()=>this.nr(e,a))}nr(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Dr(e).get(o).next(s=>{if(s===null)throw $(35274,{batchId:o});H(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(xi(this.serializer,s))}))}),N.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return DN(e.ce,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),N.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return N.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return es(e).X({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=vn(o[1]);i.push(c)}else a.done()}).next(()=>{H(i.length===0,56720,{ir:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return bN(e,this.userId,t)}sr(e){return CN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Rr,lastStreamToken:""})}};function bN(n,e,t){let r=Qd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return es(n).X({range:o,Z:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Dr(n){return Qe(n,en)}function es(n){return Qe(n,us)}function CN(n){return Qe(n,fc)}var Es=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Qv=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{let r=new Es(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(t=>q.fromTimestamp(new Ae(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.lr(e,i)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yo(e).delete(t.targetId)).next(()=>this.cr(e)).next(r=>(H(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Yo(e).X((s,a)=>{let c=tc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>N.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Yo(e).X((r,i)=>{let o=tc(i);t(o)})}cr(e){return F0(e).get(uh).next(t=>(H(t!==null,2888),t))}lr(e,t){return F0(e).put(uh,t)}hr(e,t){return Yo(e).put(IN(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Hi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Yo(e).X({range:i,index:EA},(s,a,c)=>{let l=tc(a);zc(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Sr(e);return t.forEach(s=>{let a=st(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),N.waitFor(i)}removeMatchingKeys(e,t,r){let i=Sr(e);return N.forEach(t,o=>{let s=st(o.path);return N.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Sr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sr(e),o=X();return i.X({range:r,Z:!0},(s,a,c)=>{let l=vn(s[1]),d=new V(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=st(t.path),i=IDBKeyRange.bound([r],[dA(r)],!1,!0),o=0;return Sr(e).X({index:fI,Z:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}Et(e,t){return Yo(e).get(t).next(r=>r?tc(r):null)}};function Yo(n){return Qe(n,ls)}function F0(n){return Qe(n,Bi)}function Sr(n){return Qe(n,ds)}var L0="LruGarbageCollector",SN=1048576;function V0([n,e],[t,r]){let i=z(n,t);return i===0?z(e,r):i}var Yv=class{constructor(e){this.Tr=e,this.buffer=new _e(V0),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();V0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Nh=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){x(L0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){qr(t)?x(L0,"Ignoring IndexedDB error during garbage collection: ",t):yield Hr(t)}yield this.Rr(3e5)}))}},Zv=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return N.resolve(xt.ue);let r=new Yv(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(O0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O0):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Zo()<=se.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function AN(n,e){return new Zv(n,e)}var Jv=class{constructor(e,t){this.db=e,this.garbageCollector=AN(this,t)}mr(e){let t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(r,i)=>t(i))}addReference(e,t,r){return zd(e,r)}removeReference(e,t,r){return zd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return zd(e,t)}Sr(e,t){return function(i,o){let s=!1;return CN(i).ee(a=>bN(i,a,o).next(c=>(c&&(s=!0),N.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.wr(e,(s,a)=>{if(a<=t){let c=this.Sr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,q.min()),Sr(e).delete(function(f){return[0,st(f.path)]}(s))))});i.push(c)}}).next(()=>N.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return zd(e,t)}wr(e,t){let r=Sr(e),i,o=xt.ue;return r.X({index:fI},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==xt.ue&&t(new V(vn(i)),o),o=l,i=c):o=xt.ue}).next(()=>{o!==xt.ue&&t(new V(vn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function zd(n,e){return Sr(n).put(function(r,i){return{targetId:0,path:st(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Rh=class{constructor(){this.changes=new nn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,We.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ri(e).put(r)}removeEntry(e,t,r){return Ri(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Th(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=We.newInvalidDocument(t);return Ri(e).X({index:Yd,range:IDBKeyRange.only(Ja(t))},(i,o)=>{r=this.Dr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:We.newInvalidDocument(t)};return Ri(e).X({index:Yd,range:IDBKeyRange.only(Ja(t))},(i,o)=>{r={document:this.Dr(t,o),size:Sh(o)}}).next(()=>r)}getEntries(e,t){let r=St();return this.Cr(e,t,(i,o)=>{let s=this.Dr(i,o);r=r.insert(i,s)}).next(()=>r)}Fr(e,t){let r=St(),i=new Ce(V.comparator);return this.Cr(e,t,(o,s)=>{let a=this.Dr(o,s);r=r.insert(o,a),i=i.insert(o,Sh(s))}).next(()=>({documents:r,Mr:i}))}Cr(e,t,r){if(t.isEmpty())return N.resolve();let i=new _e(U0);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Ja(i.first()),Ja(i.last())),s=i.getIterator(),a=s.getNext();return Ri(e).X({index:Yd,range:o},(c,l,d)=>{let f=V.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&U0(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.G(Ja(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Th(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ri(e).j(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=St();for(let f of l){let g=this.Dr(V.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Gc(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=St(),s=B0(t,r),a=B0(t,qt.max());return Ri(e).X({index:IA,range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let f=this.Dr(V.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new e_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return j0(e).get(hv).next(t=>(H(!!t,20021),t))}br(e,t){return j0(e).put(hv,t)}Dr(e,t){if(t){let r=$$(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(q.min())))return r}return We.newInvalidDocument(e)}};function NN(n){return new Xv(n)}var e_=class extends Rh{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new nn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new _e((o,s)=>z(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.Nr.get(o);if(t.push(this.Or.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=T0(this.Or.serializer,s);i=i.add(o.path.popLast());let l=Sh(c);r+=l-a.size,t.push(this.Or.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=T0(this.Or.serializer,s.convertToNoDocument(q.min()));t.push(this.Or.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Or.updateMetadata(e,r)),N.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:r,Mr:i})=>(i.forEach((o,s)=>{this.Nr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function j0(n){return Qe(n,pc)}function Ri(n){return Qe(n,ch)}function Ja(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function B0(n,e){let t=e.documentKey.path.toArray();return[n,Th(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function U0(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=z(t[o],r[o]),i)return i;return i=z(t.length,r.length),i||(i=z(t[t.length-2],r[r.length-2]),i||z(t[t.length-1],r[r.length-1]))}var t_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ph=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ac(r.mutation,i,Ot.empty(),Ae.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,X()).next(()=>r))}getLocalViewOfDocuments(e,t,r=X()){let i=_n();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ec();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=_n();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,X()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=St(),s=sc(),a=function(){return sc()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof rn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),ac(d.mutation,l,d.mutation.getFieldMask(),Ae.now())):s.set(l.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new t_(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=sc(),i=new Ce((s,a)=>s-a),o=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Ot.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||X()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=JA();d.forEach(g=>{if(!o.has(g)){let m=oN(t.get(g),r.get(g));m!==null&&f.set(g,m),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return V.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):II(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):N.resolve(_n()),a=as,c=o;return s.next(l=>N.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?N.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,X())).next(d=>({batchId:a,changes:ZA(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new V(t)).next(r=>{let i=ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ec();return this.indexManager.getCollectionParents(e,o).next(a=>N.forEach(a,c=>{let l=function(f,g){return new tn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,We.newInvalidDocument(d)))});let a=ec();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&ac(d.mutation,l,Ot.empty(),Ae.now()),Gc(t,l)&&(a=a.insert(c,l))}),a})}};var n_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return N.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Le(i.createTime)}}(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:gf(i.bundledQuery),readTime:Le(i.readTime)}}(t)),N.resolve()}};var r_=class{constructor(){this.overlays=new Ce(V.comparator),this.kr=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=_n();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=_n(),o=t.length+1,s=new V(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ce((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=_n(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=_n(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return N.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Tc(t,r));let o=this.kr.get(t);o===void 0&&(o=X(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var i_=class{constructor(){this.sessionToken=Ve.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var Nc=class{constructor(){this.qr=new _e(Ue.Qr),this.$r=new _e(Ue.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ue(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ue(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new V(new ue([])),r=new Ue(t,e),i=new Ue(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new V(new ue([])),r=new Ue(t,e),i=new Ue(t,e+1),o=X();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ue(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return V.comparator(e.key,t.key)||z(e.Hr,t.Hr)}static Ur(e,t){return z(e.Hr,t.Hr)||V.comparator(e.key,t.key)}};var o_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new _e(Ue.Qr)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new wc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ue(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,t){return N.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?Rr:this.er-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ue(t,0),i=new Ue(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _e(z);return t.forEach(i=>{let o=new Ue(i,0),s=new Ue(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),N.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;V.isDocumentKey(o)||(o=o.child(""));let s=new Ue(new V(o),0),a=new _e(z);return this.Yr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Hr)),!0)},s),N.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){H(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return N.forEach(t.mutations,i=>{let o=new Ue(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ue(t,0),i=this.Yr.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var s_=class{constructor(e){this.ni=e,this.docs=function(){return new Ce(V.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():We.newInvalidDocument(t))}getEntries(e,t){let r=St();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():We.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=St(),s=t.path,a=new V(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||dI(gA(d),r)<=0||(i.has(d.key)||Gc(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,t,r,i){$(9500)}ri(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new a_(this)}getSize(e){return N.resolve(this.size)}},a_=class extends Rh{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var c_=class{constructor(e){this.persistence=e,this.ii=new nn(t=>Hi(t),zc),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.si=0,this.oi=new Nc,this.targetCount=0,this._i=Es.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),N.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Es(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.hr(t),N.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this.oi.containsKey(t))}};var Rc=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new xt(0),this.ci=!1,this.ci=!0,this.li=new i_,this.referenceDelegate=e(this),this.hi=new c_(this),this.indexManager=new Gv,this.remoteDocumentCache=function(i){return new s_(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new wh(t),this.Ti=new n_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new o_(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){x("MemoryPersistence","Starting transaction:",e);let i=new u_(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return N.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},u_=class extends oh{constructor(e){super(),this.currentSequenceNumber=e}},Mh=class n{constructor(e){this.persistence=e,this.Ai=new Nc,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw $(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),N.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.mi,r=>{let i=V.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,q.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return N.or([()=>N.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},kh=class n{constructor(e,t){this.persistence=e,this.gi=new nn(r=>st(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=AN(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return N.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return N.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?N.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,q.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),N.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),N.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jd(e.data.value)),t}Sr(e,t,r){return N.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var l_=class{constructor(e){this.serializer=e}q(e,t,r,i){let o=new sh("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore(qc)}(e),function(c){c.createObjectStore(fc,{keyPath:qU}),c.createObjectStore(en,{keyPath:t0,autoIncrement:!0}).createIndex(Li,n0,{unique:!0}),c.createObjectStore(us)}(e),$0(e),function(c){c.createObjectStore(Mi)}(e));let s=N.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(ds),c.deleteObjectStore(ls),c.deleteObjectStore(Bi)}(e),$0(e)),s=s.next(()=>function(c){let l=c.store(Bi),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:q.min().toTimestamp(),targetCount:0};return l.put(uh,d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store(en).j().next(f=>{c.deleteObjectStore(en),c.createObjectStore(en,{keyPath:t0,autoIncrement:!0}).createIndex(Li,n0,{unique:!0});let g=l.store(en),m=f.map(w=>g.put(w));return N.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore(hs,{keyPath:XU})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.pi(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore(pc)}(e),this.yi(o)))),r<7&&i>=7&&(s=s.next(()=>this.wi(o))),r<8&&i>=8&&(s=s.next(()=>this.Si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.bi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore(af,{keyPath:e$})})(e),function(c){c.createObjectStore(cf,{keyPath:t$})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore(uf,{keyPath:c$});l.createIndex(pv,u$,{unique:!1}),l.createIndex(DA,l$,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore(ch,{keyPath:WU});l.createIndex(Yd,GU),l.createIndex(IA,KU)}(e)).next(()=>this.Di(e,o)).next(()=>e.deleteObjectStore(Mi))),r<14&&i>=14&&(s=s.next(()=>this.Ci(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore(pI,{keyPath:n$,autoIncrement:!0}).createIndex(fv,r$,{unique:!1}),c.createObjectStore(rc,{keyPath:i$}).createIndex(wA,o$,{unique:!1}),c.createObjectStore(ic,{keyPath:s$}).createIndex(TA,a$,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(rc).clear()}).next(()=>{t.objectStore(ic).clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore(gI,{keyPath:d$})})(e)})),r<18&&i>=18&&Am()&&(s=s.next(()=>{t.objectStore(rc).clear()}).next(()=>{t.objectStore(ic).clear()})),s}yi(e){let t=0;return e.store(Mi).X((r,i)=>{t+=Sh(i)}).next(()=>{let r={byteSize:t};return e.store(pc).put(hv,r)})}pi(e){let t=e.store(fc),r=e.store(en);return t.j().next(i=>N.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,Rr],[o.userId,o.lastAcknowledgedBatchId]);return r.j(Li,s).next(a=>N.forEach(a,c=>{H(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});let l=xi(this.serializer,c);return DN(e,o.userId,l).next(()=>{})}))}))}wi(e){let t=e.store(ds),r=e.store(Mi);return e.store(Bi).get(uh).next(i=>{let o=[];return r.X((s,a)=>{let c=new ue(s),l=function(f){return[0,st(f)]}(c);o.push(t.get(l).next(d=>d?N.resolve():(f=>t.put({targetId:0,path:st(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>N.waitFor(o))})}Si(e,t){e.createObjectStore(gc,{keyPath:JU});let r=t.store(gc),i=new Ac,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:st(c)})}};return t.store(Mi).X({Z:!0},(s,a)=>{let c=new ue(s);return o(c.popLast())}).next(()=>t.store(us).X({Z:!0},([s,a,c],l)=>{let d=vn(a);return o(d.popLast())}))}bi(e){let t=e.store(ls);return t.X((r,i)=>{let o=tc(i),s=IN(this.serializer,o);return t.put(s)})}Di(e,t){let r=t.store(Mi),i=[];return r.X((o,s)=>{let a=t.store(ch),c=function(f){return f.document?new V(ue.fromString(f.document.name).popFirst(5)):f.noDocument?V.fromSegments(f.noDocument.path):f.unknownDocument?V.fromSegments(f.unknownDocument.path):$(36783)}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>N.waitFor(i))}Ci(e,t){let r=t.store(en),i=NN(this.serializer),o=new Rc(Mh.Vi,this.serializer.gt);return r.j().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:X();xi(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),N.forEach(a,(c,l)=>{let d=new $e(l),f=Dh.yt(this.serializer,d),g=o.getIndexManager(d),m=Ah.yt(d,this.serializer,g,o.referenceDelegate);return new Ph(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new mc(t,xt.ue),c).next()})})}};function $0(n){n.createObjectStore(ds,{keyPath:YU}).createIndex(fI,ZU,{unique:!0}),n.createObjectStore(ls,{keyPath:"targetId"}).createIndex(EA,QU,{unique:!0}),n.createObjectStore(Bi)}var br="IndexedDbPersistence",Gy=18e5,Ky=5e3,Qy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",RN="main",d_=class n{constructor(e,t,r,i,o,s,a,c,l,d,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=o,this.window=s,this.document=a,this.Mi=l,this.xi=d,this.Oi=f,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=g=>Promise.resolve(),!n.C())throw new k(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jv(this,i),this.Qi=t+RN,this.serializer=new wh(c),this.$i=new xr(this.Qi,this.Oi,new l_(this.serializer)),this.li=new Bv,this.hi=new Qv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NN(this.serializer),this.Ti=new jv,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,d===!1&&Fe(br,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(S.FAILED_PRECONDITION,Qy);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new xt(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=t=>v(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(()=>v(this,null,function*(){this.started&&(yield this.Ki())})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(qr(e))return x(br,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return x(br,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return Xa(e).get(zo).next(t=>N.resolve(this.Xi(t)))}es(e){return Wd(e).delete(this.clientId)}ts(){return v(this,null,function*(){if(this.isPrimary&&!this.ns(this.ki,Gy)){this.ki=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Qe(t,hs);return r.j().next(i=>{let o=this.rs(i,Gy),s=i.filter(a=>o.indexOf(a)===-1);return N.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.ss(t.clientId))}})}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?N.resolve(!0):Xa(e).get(zo).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Ky)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new k(S.FAILED_PRECONDITION,Qy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wd(e).j().next(r=>this.rs(r,Ky).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&x(br,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return v(this,null,function*(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),yield this.$i.runTransaction("shutdown","readwrite",[qc,hs],e=>{let t=new mc(e,xt.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()})}rs(e,t){return e.filter(r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>Wd(e).j().next(t=>this.rs(t,Gy).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return Ah.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Kv(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Dh.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){x(br,"Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===18?p$:c===17?AA:c===16?f$:c===15?mI:c===14?SA:c===13?CA:c===12?h$:c===11?bA:void $(60245)}(this.Oi),s;return this.$i.runTransaction(e,i,o,a=>(s=new mc(a,this.ui?this.ui.next():xt.ue),t==="readwrite-primary"?this.Ji(s).next(c=>!!c||this.Hi(s)).next(c=>{if(!c)throw Fe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new k(S.FAILED_PRECONDITION,mA);return r(s)}).next(c=>this.Zi(s).next(()=>c)):this.Ts(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ts(e){return Xa(e).get(zo).next(t=>{if(t!==null&&this.ns(t.leaseTimestampMs,Ky)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(S.FAILED_PRECONDITION,Qy)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xa(e).put(zo,t)}static C(){return xr.C()}Yi(e){let t=Xa(e);return t.get(zo).next(r=>this.Xi(r)?(x(br,"Releasing primary lease."),t.delete(zo)):N.resolve())}ns(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Fe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();let t=/(?:Version|Mobile)\/1[456]/;Sm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{let r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return x(br,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fe(br,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Fe("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Xa(n){return Qe(n,qc)}function Wd(n){return Qe(n,hs)}function bI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var h_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=X(),i=X();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var f_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xh=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Sm()?8:yA(Oe())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new f_;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Zo()<=se.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",Jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),N.resolve()):(Zo()<=se.DEBUG&&x("QueryEngine","Query:",Jo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Zo()<=se.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",Jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,at(t))):N.resolve())}ps(e,t){if(p0(t))return N.resolve(null);let r=at(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=mh(t,null,"F"),r=at(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=X(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.bs(t,a);return this.Ds(t,l,s,c.readTime)?this.ps(e,mh(t,null,"F")):this.vs(e,l,t,c)}))})))}ys(e,t,r,i){return p0(t)||i.isEqual(q.min())?N.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?N.resolve(null):(Zo()<=se.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jo(t)),this.vs(e,s,t,pA(i,as)).next(a=>a))})}bs(e,t){let r=new _e(QA(e));return t.forEach((i,o)=>{Gc(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Zo()<=se.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.gs.getDocumentsMatchingQuery(e,t,qt.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var CI="LocalStore",z$=3e8,p_=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ce(z),this.Ms=new nn(o=>Hi(o),zc),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ph(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function PN(n,e,t,r){return new p_(n,e,t,r)}function MN(n,e){return v(this,null,function*(){let t=F(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=X();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function W$(n,e){let t=F(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),m=N.resolve();return g.forEach(w=>{m=m.next(()=>d.getEntry(c,w)).next(R=>{let P=l.docVersions.get(w);H(P!==null,48541),R.version.compareTo(P)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=X();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kN(n){let e=F(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function G$(n,e){let t=F(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.hi.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.hi.addMatchingKeys(o,d.addedDocuments,f)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Ve.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(R,P,O){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=z$?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,m,d)&&a.push(t.hi.updateTargetData(o,m))});let c=St(),l=X();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(xN(o,s,e.documentUpdates).next(d=>{c=d.Ls,l=d.ks})),!r.isEqual(q.min())){let d=t.hi.getLastRemoteSnapshotVersion(o).next(f=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return N.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Fs=i,o))}function xN(n,e,t){let r=X(),i=X();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=St();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(q.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):x(CI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function K$(n,e){let t=F(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Rr),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ws(n,e){let t=F(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Is(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Ts(n,e,t){return v(this,null,function*(){let r=F(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!qr(s))throw s;x(CI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Oh(n,e,t){let r=F(n),i=q.min(),o=X();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let f=F(c),g=f.Ms.get(d);return g!==void 0?N.resolve(f.Fs.get(g)):f.hi.getTargetData(l,d)}(r,s,at(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:q.min(),t?o:X())).next(a=>(LN(r,KA(e),a),{documents:a,qs:o})))}function ON(n,e){let t=F(n),r=F(t.hi),i=t.Fs.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(s=>s?s.target:null))}function FN(n,e){let t=F(n),r=t.xs.get(e)||q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Os.getAllFromCollectionGroup(i,e,pA(r,as),Number.MAX_SAFE_INTEGER)).then(i=>(LN(t,e,i),i))}function LN(n,e,t){let r=n.xs.get(e)||q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}function Q$(n,e,t,r){return v(this,null,function*(){let i=F(n),o=X(),s=St();for(let l of t){let d=e.Qs(l.metadata.name);l.document&&(o=o.add(d));let f=e.$s(l);f.setReadTime(e.Us(l.metadata.readTime)),s=s.insert(d,f)}let a=i.Os.newChangeBuffer({trackRemovals:!0}),c=yield ws(i,function(d){return at(Ps(ue.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>xN(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.hi.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.hi.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ls,d.ks)).next(()=>d.Ls)))})}function Y$(r,i){return v(this,arguments,function*(n,e,t=X()){let o=yield ws(n,at(gf(e.bundledQuery))),s=F(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Le(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Ti.saveNamedQuery(a,e);let l=o.withResumeToken(Ve.EMPTY_BYTE_STRING,c);return s.Fs=s.Fs.insert(l.targetId,l),s.hi.updateTargetData(a,l).next(()=>s.hi.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.hi.addMatchingKeys(a,t,o.targetId)).next(()=>s.Ti.saveNamedQuery(a,e))})})}var VN="firestore_clients";function H0(n,e){return`${VN}_${n}_${e}`}var jN="firestore_mutations";function q0(n,e,t){let r=`${jN}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}var BN="firestore_targets";function Yy(n,e){return`${BN}_${n}_${e}`}var yn="SharedClientState",Fh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ks(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Fe(yn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},cc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(Fe(yn,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Lh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=EI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=vA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Fe(yn,`Failed to parse client data for instance '${e}': ${t}`),null)}},g_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Fe(yn,`Failed to parse online state: ${e}`),null)}},Pc=class{constructor(){this.activeTargetIds=EI()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},uc=class{constructor(e,t,r,i,o){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new Ce(z),this.started=!1,this.Zs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Xs=H0(this.persistenceKey,this.js),this.eo=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new Pc),this.no=new RegExp(`^${VN}_${s}_([^_]*)$`),this.ro=new RegExp(`^${jN}_${s}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${BN}_${s}_(\\d+)$`),this.so=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.oo=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}start(){return v(this,null,function*(){let e=yield this.syncEngine.Ps();for(let r of e){if(r===this.js)continue;let i=this.getItem(H0(this.persistenceKey,r));if(i){let o=Lh.Ks(r,i);o&&(this.Ys=this.Ys.insert(o.clientId,o))}}this._o();let t=this.storage.getItem(this.so);if(t){let r=this.ao(t);r&&this.uo(r)}for(let r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Yy(this.persistenceKey,e));if(i){let o=cc.Ks(e,i);o&&(r=o.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yy(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return x(yn,"READ",e,t),t}setItem(e,t){x(yn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){x(yn,"REMOVE",e),this.storage.removeItem(e)}Hs(e){let t=e;if(t.storageArea===this.storage){if(x(yn,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Fe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(()=>v(this,null,function*(){if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){let r=this.Ao(t.key);return this.Ro(r,null)}{let r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){let r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){let r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){let r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){let r=function(o){let s=xt.ue;if(o!=null)try{let a=JSON.parse(o);H(typeof a=="number",30636,{wo:o}),s=a}catch(a){Fe(yn,"Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==xt.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){let r=this.So(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){let i=new Fh(this.currentUser,e,t,r),o=q0(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Ws())}ho(e){let t=q0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){let t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){let i=Yy(this.persistenceKey,e),o=new cc(e,t,r);this.setItem(i,o.Ws())}Eo(e){let t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){let t=this.no.exec(e);return t?t[1]:null}Vo(e,t){let r=this.Ao(e);return Lh.Ks(r,t)}mo(e,t){let r=this.ro.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Fh.Ks(new $e(o),i,t)}po(e,t){let r=this.io.exec(e),i=Number(r[1]);return cc.Ks(i,t)}ao(e){return g_.Ks(e)}So(e){return JSON.parse(e)}fo(e){return v(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);x(yn,`Ignoring mutation for non-active user ${e.user.uid}`)})}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Ys.insert(e,t):this.Ys.remove(e),i=this.co(this.Ys),o=this.co(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.Co(s,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=EI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Vh=class{constructor(){this.Fo=new Pc,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Pc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var m_=class{xo(e){}shutdown(){}};var z0="ConnectivityMonitor",jh=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){x(z0,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){x(z0,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Gd=null;function y_(){return Gd===null?Gd=function(){return 268435456+Math.round(2147483648*Math.random())}():Gd++,"0x"+Gd.toString(16)}var Zy="RestConnection",Z$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},v_=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===vc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=y_(),a=this.Go(e,t.toUriEncodedString());x(Zy,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:l}=new URL(a),d=On(l);return this.jo(e,a,c,r,d).then(f=>(x(Zy,`Received RPC '${e}' ${s}: `,f),f),f=>{throw yt(Zy,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=Z$[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var __=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var it="WebChannelConnection",I_=class extends v_{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=y_();return new Promise((a,c)=>{let l=new Uy;l.setWithCredentials(!0),l.listenOnce($y.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qa.NO_ERROR:let f=l.getResponseJson();x(it,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Qa.TIMEOUT:x(it,`RPC '${e}' ${s} timed out`),c(new k(S.DEADLINE_EXCEEDED,"Request time out"));break;case Qa.HTTP_ERROR:let g=l.getStatus();if(x(it,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);let w=m?.error;if(w&&w.status&&w.message){let R=function(O){let B=O.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(B)>=0?B:S.UNKNOWN}(w.status);c(new k(R,w.message))}else c(new k(S.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new k(S.UNAVAILABLE,"Connection failed."));break;default:$(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{x(it,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);x(it,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}P_(e,t,r){let i=y_(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=zy(),a=qy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");x(it,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c);this.T_(f);let g=!1,m=!1,w=new __({Ho:P=>{m?x(it,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(g||(x(it,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),x(it,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},Yo:()=>f.close()}),R=(P,O,B)=>{P.listen(O,U=>{try{B(U)}catch(W){setTimeout(()=>{throw W},0)}})};return R(f,qo.EventType.OPEN,()=>{m||(x(it,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),R(f,qo.EventType.CLOSE,()=>{m||(m=!0,x(it,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(f))}),R(f,qo.EventType.ERROR,P=>{m||(m=!0,yt(it,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),w.__(new k(S.UNAVAILABLE,"The operation could not be completed")))}),R(f,qo.EventType.MESSAGE,P=>{var O;if(!m){let B=P.data[0];H(!!B,16349);let U=B,W=U?.error||((O=U[0])===null||O===void 0?void 0:O.error);if(W){x(it,`RPC '${e}' stream ${i} received error:`,W);let de=W.status,K=function(E){let D=Be[E];if(D!==void 0)return cN(D)}(de),T=W.message;K===void 0&&(K=S.INTERNAL,T="Unknown error status: "+de+" with message "+W.message),m=!0,w.__(new k(K,T)),f.close()}else x(it,`RPC '${e}' stream ${i} received:`,B),w.a_(B)}}),R(a,Hy.STAT_EVENT,P=>{P.stat===$d.PROXY?x(it,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===$d.NOPROXY&&x(it,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function UN(){return typeof window<"u"?window:null}function nh(){return typeof document<"u"?document:null}function eo(n){return new xv(n,!0)}var Mc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var W0="PersistentStream",Bh=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Mc(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(Fe(t.toString()),Fe("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new k(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return x(W0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(x(W0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},E_=class extends Bh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=O$(this.serializer,e),r=function(o){if(!("targetChange"in o))return q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?q.min():s.readTime?Le(s.readTime):q.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Lv(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=ph(c)?{documents:pN(o,c)}:{query:pf(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=uN(o,s.resumeToken);let l=Ov(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(q.min())>0){a.readTime=_s(o,s.snapshotVersion.toTimestamp());let l=Ov(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=L$(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Lv(this.serializer),t.removeTarget=e,this.k_(t)}},w_=class extends Bh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return H(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,H(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){H(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=F$(e.writeResults,e.commitTime),r=Le(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Lv(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Sc(this.serializer,r))};this.k_(t)}};var T_=class{},D_=class extends T_{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new k(S.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Fv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(S.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,Fv(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(S.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},b_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Fe(t),this._a=!1):x("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Gi="RemoteStore",C_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){Wr(this)&&(x(Gi,"Restarting streams for network reachability change."),yield function(c){return v(this,null,function*(){let l=F(c);l.Ia.add(4),yield Ms(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Kc(l)})}(this))}))}),this.Aa=new b_(r,i)}};function Kc(n){return v(this,null,function*(){if(Wr(n))for(let e of n.da)yield e(!0)})}function Ms(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function mf(n,e){let t=F(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),NI(t)?AI(t):xs(t).x_()&&SI(t,e))}function Ds(n,e){let t=F(n),r=xs(t);t.Ta.delete(e),r.x_()&&$N(t,e),t.Ta.size===0&&(r.x_()?r.B_():Wr(t)&&t.Aa.set("Unknown"))}function SI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xs(n).H_(e)}function $N(n,e){n.Ra.$e(e),xs(n).Y_(e)}function AI(n){n.Ra=new kv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),xs(n).start(),n.Aa.aa()}function NI(n){return Wr(n)&&!xs(n).M_()&&n.Ta.size>0}function Wr(n){return F(n).Ia.size===0}function HN(n){n.Ra=void 0}function J$(n){return v(this,null,function*(){n.Aa.set("Online")})}function X$(n){return v(this,null,function*(){n.Ta.forEach((e,t)=>{SI(n,e)})})}function eH(n,e){return v(this,null,function*(){HN(n),NI(n)?(n.Aa.la(e),AI(n)):n.Aa.set("Unknown")})}function tH(n,e,t){return v(this,null,function*(){if(n.Aa.set("Online"),e instanceof Ih&&e.state===2&&e.cause)try{yield function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})}(n,e)}catch(r){x(Gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Uh(n,r)}else if(e instanceof rs?n.Ra.Ye(e):e instanceof _h?n.Ra.it(e):n.Ra.et(e),!t.isEqual(q.min()))try{let r=yield kN(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ta.get(l);d&&o.Ta.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.Ta.get(c);if(!d)return;o.Ta.set(c,d.withResumeToken(Ve.EMPTY_BYTE_STRING,d.snapshotVersion)),$N(o,c);let f=new Is(d.target,c,l,d.sequenceNumber);SI(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){x(Gi,"Failed to raise snapshot:",r),yield Uh(n,r)}})}function Uh(n,e,t){return v(this,null,function*(){if(!qr(e))throw e;n.Ia.add(1),yield Ms(n),n.Aa.set("Offline"),t||(t=()=>kN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){x(Gi,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Kc(n)}))})}function qN(n,e){return e().catch(t=>Uh(n,t,e))}function ks(n){return v(this,null,function*(){let e=F(n),t=Ur(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Rr;for(;nH(e);)try{let i=yield K$(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,rH(e,i)}catch(i){yield Uh(e,i)}zN(e)&&WN(e)})}function nH(n){return Wr(n)&&n.Pa.length<10}function rH(n,e){n.Pa.push(e);let t=Ur(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function zN(n){return Wr(n)&&!Ur(n).M_()&&n.Pa.length>0}function WN(n){Ur(n).start()}function iH(n){return v(this,null,function*(){Ur(n).na()})}function oH(n){return v(this,null,function*(){let e=Ur(n);for(let t of n.Pa)e.X_(t.mutations)})}function sH(n,e,t){return v(this,null,function*(){let r=n.Pa.shift(),i=Rv.from(r,e,t);yield qN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ks(n)})}function aH(n,e){return v(this,null,function*(){e&&Ur(n).Z_&&(yield function(r,i){return v(this,null,function*(){if(function(s){return aN(s)&&s!==S.ABORTED}(i.code)){let o=r.Pa.shift();Ur(r).N_(),yield qN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ks(r)}})}(n,e)),zN(n)&&WN(n)})}function G0(n,e){return v(this,null,function*(){let t=F(n);t.asyncQueue.verifyOperationInProgress(),x(Gi,"RemoteStore received new credentials");let r=Wr(t);t.Ia.add(3),yield Ms(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Kc(t)})}function S_(n,e){return v(this,null,function*(){let t=F(n);e?(t.Ia.delete(2),yield Kc(t)):e||(t.Ia.add(2),yield Ms(t),t.Aa.set("Unknown"))})}function xs(n){return n.Va||(n.Va=function(t,r,i){let o=F(t);return o.ia(),new E_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:J$.bind(null,n),e_:X$.bind(null,n),n_:eH.bind(null,n),J_:tH.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.Va.N_(),NI(n)?AI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),HN(n))}))),n.Va}function Ur(n){return n.ma||(n.ma=function(t,r,i){let o=F(t);return o.ia(),new w_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:iH.bind(null,n),n_:aH.bind(null,n),ea:oH.bind(null,n),ta:sH.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.N_(),yield ks(n)):(yield n.ma.stop(),n.Pa.length>0&&(x(Gi,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var A_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Os(n,e){if(Fe("AsyncQueue",`${e}: ${n}`),qr(n))return new k(S.UNAVAILABLE,`${e}: ${n}`);throw n}var kc=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||V.comparator(t.key,r.key):(t,r)=>V.comparator(t.key,r.key),this.keyedMap=ec(),this.sortedSet=new Ce(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var $h=class{constructor(){this.fa=new Ce(V.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):$(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ki=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,kc.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var N_=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},R_=class{constructor(){this.queries=K0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=F(t),o=i.queries;i.queries=K0(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new k(S.ABORTED,"Firestore shutting down"))}};function K0(){return new nn(n=>GA(n),Wc)}function RI(n,e){return v(this,null,function*(){let t=F(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new N_,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Os(s,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&MI(t)})}function PI(n,e){return v(this,null,function*(){let t=F(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function cH(n,e){let t=F(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&MI(t)}function uH(n,e,t){let r=F(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function MI(n){n.Da.forEach(e=>{e.next()})}var P_,Q0;(Q0=P_||(P_={})).Fa="default",Q0.Cache="cache";var xc=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==P_.Cache}};var Hh=class{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}};var qh=class{constructor(e){this.serializer=e}Qs(e){return wn(this.serializer,e)}$s(e){return e.metadata.exists?ff(this.serializer,e.document,!1):We.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Le(e)}},Oc=class{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=GN(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=ue.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){let t=new Map,r=new qh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Qs(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||X()).add(o);t.set(s,a)}}return t}za(e){return v(this,null,function*(){let t=yield Q$(e,new qh(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(let i of this.Ua)yield Y$(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}})}};function GN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var zh=class{constructor(e){this.key=e}},Wh=class{constructor(e){this.key=e}},Gh=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=X(),this.mutatedKeys=X(),this.Xa=QA(e),this.eu=new kc(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new $h,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=Gc(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),R=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),P=!1;g&&m?g.data.isEqual(m.data)?w!==R&&(r.track({type:3,doc:m}),P=!0):this.iu(g,m)||(r.track({type:2,doc:m}),P=!0,(c&&this.Xa(m,c)>0||l&&this.Xa(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),P=!0):g&&!m&&(r.track({type:1,doc:g}),P=!0,(c||l)&&(a=!0)),P&&(m?(s=s.add(m),o=R?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((d,f)=>function(m,w){let R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{At:P})}};return R(m)-R(w)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,l=c!==this.Ya;return this.Ya=c,s.length!==0||l?{snapshot:new Ki(this.query,e.eu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new $h,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=X(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Wh(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new zh(r))}),t}uu(e){this.Ha=e.qs,this.Za=X();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ki.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Gr="SyncEngine",M_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},k_=class{constructor(e){this.key=e,this.lu=!1}},x_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new nn(a=>GA(a),Wc),this.Tu=new Map,this.Iu=new Set,this.du=new Ce(V.comparator),this.Eu=new Map,this.Au=new Nc,this.Ru={},this.Vu=new Map,this.mu=Es.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function lH(n,e,t=!0){return v(this,null,function*(){let r=yf(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield KN(r,e,t,!0),i})}function dH(n,e){return v(this,null,function*(){let t=yf(n);yield KN(t,e,!0,!1)})}function KN(n,e,t,r){return v(this,null,function*(){let i=yield ws(n.localStore,at(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield kI(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&mf(n.remoteStore,i),a})}function kI(n,e,t,r,i){return v(this,null,function*(){n.gu=(f,g,m)=>function(R,P,O,B){return v(this,null,function*(){let U=P.view.nu(O);U.Ds&&(U=yield Oh(R.localStore,P.query,!1).then(({documents:T})=>P.view.nu(T,U)));let W=B&&B.targetChanges.get(P.targetId),de=B&&B.targetMismatches.get(P.targetId)!=null,K=P.view.applyChanges(U,R.isPrimaryClient,W,de);return O_(R,P.targetId,K._u),K.snapshot})}(n,f,g,m);let o=yield Oh(n.localStore,e,!0),s=new Gh(e,o.qs),a=s.nu(o.documents),c=bc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);O_(n,t,l._u);let d=new M_(e,t,s);return n.Pu.set(e,d),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function hH(n,e,t){return v(this,null,function*(){let r=F(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Wc(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ts(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ds(r.remoteStore,i.targetId),bs(r,i.targetId)}).catch(Hr))):(bs(r,i.targetId),yield Ts(r.localStore,i.targetId,!0))})}function fH(n,e){return v(this,null,function*(){let t=F(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ds(t.remoteStore,r.targetId))})}function pH(n,e,t){return v(this,null,function*(){let r=LI(n);try{let i=yield function(s,a){let c=F(s),l=Ae.now(),d=a.reduce((m,w)=>m.add(w.key),X()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=St(),R=X();return c.Os.getEntries(m,d).next(P=>{w=P,w.forEach((O,B)=>{B.isValidDocument()||(R=R.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,w)).next(P=>{f=P;let O=[];for(let B of a){let U=A$(B,f.get(B.key).overlayedDocument);U!=null&&O.push(new rn(B.key,U,VA(U.value.mapValue),ke.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,O,a)}).next(P=>{g=P;let O=P.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(m,P.batchId,O)})}).then(()=>({batchId:g.batchId,changes:ZA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ce(z)),l=l.insert(a,c),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),yield er(r,i.changes),yield ks(r.remoteStore)}catch(i){let o=Os(i,"Failed to persist write");t.reject(o)}})}function QN(n,e){return v(this,null,function*(){let t=F(n);try{let r=yield G$(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(H(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?H(s.lu,14607):i.removedDocuments.size>0&&(H(s.lu,42227),s.lu=!1))}),yield er(t,r,e)}catch(r){yield Hr(r)}})}function Y0(n,e,t){let r=F(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=F(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.wa)g.va(a)&&(l=!0)}),l&&MI(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gH(n,e,t){return v(this,null,function*(){let r=F(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ce(V.comparator);s=s.insert(o,We.newNoDocument(o,q.min()));let a=X().add(o),c=new Dc(q.min(),new Map,new Ce(z),s,a);yield QN(r,c),r.du=r.du.remove(o),r.Eu.delete(e),FI(r)}else yield Ts(r.localStore,e,!1).then(()=>bs(r,e,t)).catch(Hr)})}function mH(n,e){return v(this,null,function*(){let t=F(n),r=e.batch.batchId;try{let i=yield W$(t.localStore,e);OI(t,r,null),xI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield er(t,i)}catch(i){yield Hr(i)}})}function yH(n,e,t){return v(this,null,function*(){let r=F(n);try{let i=yield function(s,a){let c=F(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(H(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);OI(r,e,t),xI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield er(r,i)}catch(i){yield Hr(i)}})}function vH(n,e){return v(this,null,function*(){let t=F(n);Wr(t.remoteStore)||x(Gr,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=F(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===Rr)return void e.resolve();let i=t.Vu.get(r)||[];i.push(e),t.Vu.set(r,i)}catch(r){let i=Os(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function xI(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function OI(n,e,t){let r=F(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function bs(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||YN(n,r)})}function YN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Ds(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),FI(n))}function O_(n,e,t){for(let r of t)r instanceof zh?(n.Au.addReference(r.key,e),_H(n,r)):r instanceof Wh?(x(Gr,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||YN(n,r.key)):$(19791,{yu:r})}function _H(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(x(Gr,"New document in limbo: "+t),n.Iu.add(r),FI(n))}function FI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new V(ue.fromString(e)),r=n.mu.next();n.Eu.set(r,new k_(t)),n.du=n.du.insert(t,r),mf(n.remoteStore,new Is(at(Ps(t.path)),r,"TargetPurposeLimboResolution",xt.ue))}}function er(n,e,t){return v(this,null,function*(){let r=F(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=h_.Es(c.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.hu.J_(i),yield function(c,l){return v(this,null,function*(){let d=F(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>N.forEach(l,g=>N.forEach(g.Is,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>N.forEach(g.ds,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!qr(f))throw f;x(CI,"Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let m=d.Fs.get(g),w=m.snapshotVersion,R=m.withLastLimboFreeSnapshotVersion(w);d.Fs=d.Fs.insert(g,R)}}})}(r.localStore,o))})}function IH(n,e){return v(this,null,function*(){let t=F(n);if(!t.currentUser.isEqual(e)){x(Gr,"User change. New user:",e.toKey());let r=yield MN(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new k(S.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield er(t,r.Bs)}})}function EH(n,e){let t=F(n),r=t.Eu.get(e);if(r&&r.lu)return X().add(r.key);{let i=X(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function wH(n,e){return v(this,null,function*(){let t=F(n),r=yield Oh(t.localStore,e.query,!0),i=e.view.uu(r);return t.isPrimaryClient&&O_(t,e.targetId,i._u),i})}function TH(n,e){return v(this,null,function*(){let t=F(n);return FN(t.localStore,e).then(r=>er(t,r))})}function DH(n,e,t,r){return v(this,null,function*(){let i=F(n),o=yield function(a,c){let l=F(a),d=F(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Xn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):N.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ks(i.remoteStore):t==="acknowledged"||t==="rejected"?(OI(i,e,r||null),xI(i,e),function(a,c){F(F(a).mutationQueue).rr(c)}(i.localStore,e)):$(6720,"Unknown batchState",{wu:t}),yield er(i,o)):x(Gr,"Cannot apply mutation batch with id: "+e)})}function bH(n,e){return v(this,null,function*(){let t=F(n);if(yf(t),LI(t),e===!0&&t.fu!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Z0(t,r.toArray());t.fu=!0,yield S_(t.remoteStore,!0);for(let o of i)mf(t.remoteStore,o)}else if(e===!1&&t.fu!==!1){let r=[],i=Promise.resolve();t.Tu.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(bs(t,s),Ts(t.localStore,s,!0))),Ds(t.remoteStore,s)}),yield i,yield Z0(t,r),function(s){let a=F(s);a.Eu.forEach((c,l)=>{Ds(a.remoteStore,l)}),a.Au.jr(),a.Eu=new Map,a.du=new Ce(V.comparator)}(t),t.fu=!1,yield S_(t.remoteStore,!1)}})}function Z0(n,e,t){return v(this,null,function*(){let r=F(n),i=[],o=[];for(let s of e){let a,c=r.Tu.get(s);if(c&&c.length!==0){a=yield ws(r.localStore,at(c[0]));for(let l of c){let d=r.Pu.get(l),f=yield wH(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield ON(r.localStore,s);a=yield ws(r.localStore,l),yield kI(r,ZN(l),s,!1,a.resumeToken)}i.push(a)}return r.hu.J_(o),i})}function ZN(n){return qA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function CH(n){return function(t){return F(F(t).persistence).Ps()}(F(n).localStore)}function SH(n,e,t,r){return v(this,null,function*(){let i=F(n);if(i.fu)return void x(Gr,"Ignoring unexpected query state notification.");let o=i.Tu.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield FN(i.localStore,KA(o[0])),a=Dc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ve.EMPTY_BYTE_STRING);yield er(i,s,a);break}case"rejected":yield Ts(i.localStore,e,!0),bs(i,e,r);break;default:$(64155,t)}})}function AH(n,e,t){return v(this,null,function*(){let r=yf(n);if(r.fu){for(let i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){x(Gr,"Adding an already active target "+i);continue}let o=yield ON(r.localStore,i),s=yield ws(r.localStore,o);yield kI(r,ZN(o),s.targetId,!1,s.resumeToken),mf(r.remoteStore,s)}for(let i of t)r.Tu.has(i)&&(yield Ts(r.localStore,i,!1).then(()=>{Ds(r.remoteStore,i),bs(r,i)}).catch(Hr))}})}function yf(n){let e=F(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gH.bind(null,e),e.hu.J_=cH.bind(null,e.eventManager),e.hu.pu=uH.bind(null,e.eventManager),e}function LI(n){let e=F(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yH.bind(null,e),e}function NH(n,e,t){let r=F(n);(function(o,s,a){return v(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(m,w){let R=F(m),P=Le(w.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",O=>R.Ti.getBundleMetadata(O,w.id)).then(O=>!!O&&O.createTime.compareTo(P)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(GN(c));let l=new Oc(c,s.serializer),d=yield s.Su();for(;d;){let g=yield l.Wa(d);g&&a._updateProgress(g),d=yield s.Su()}let f=yield l.za(o.localStore);return yield er(o,f.Ja,void 0),yield function(m,w){let R=F(m);return R.persistence.runTransaction("Save bundle","readwrite",P=>R.Ti.saveBundleMetadata(P,w))}(o.localStore,c),a._completeWith(f.progress),Promise.resolve(f.ja)}catch(c){return yt(Gr,`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var vf=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=eo(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return PN(this.persistence,new xh,t.initialUser,this.serializer)}Du(t){return new Rc(Mh.Vi,this.serializer)}bu(t){return new Vh}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),Fc=class extends vf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){H(this.persistence.referenceDelegate instanceof kh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Nh(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new Rc(r=>kh.Vi(r,t),this.serializer)}},Lc=class n extends vf{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return v(this,null,function*(){yield on(n.prototype,this,"initialize").call(this,e),yield this.Mu.initialize(this,e),yield LI(this.Mu.syncEngine),yield ks(this.Mu.remoteStore),yield this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}vu(e){return PN(this.persistence,new xh,e.initialUser,this.serializer)}Cu(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Nh(r,e.asyncQueue,t)}Fu(e,t){let r=new dv(t,this.persistence);return new lv(e.asyncQueue,r)}Du(e){let t=bI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new d_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UN(),nh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Vh}},Kh=class n extends Lc{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return v(this,null,function*(){yield on(n.prototype,this,"initialize").call(this,e);let t=this.Mu.syncEngine;this.sharedClientState instanceof uc&&(this.sharedClientState.syncEngine={Do:DH.bind(null,t),vo:SH.bind(null,t),Co:AH.bind(null,t),Ps:CH.bind(null,t),bo:TH.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.ji(r=>v(this,null,function*(){yield bH(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}bu(e){let t=UN();if(!uc.C(t))throw new k(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=bI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Fs=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Y0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IH.bind(null,this.syncEngine),yield S_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new R_}()}createDatastore(t){let r=eo(t.databaseInfo.databaseId),i=function(s){return new I_(s)}(t.databaseInfo);return function(s,a,c,l){return new D_(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new C_(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Y0(this.syncEngine,r,0),function(){return jh.C()?new jh:new m_}())}createSyncEngine(t,r){return function(o,s,a,c,l,d,f){let g=new x_(o,s,a,c,l,d);return f&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(o){return v(this,null,function*(){let s=F(o);x(Gi,"RemoteStore shutting down."),s.Ia.add(5),yield Ms(s),s.Ea.shutdown(),s.Aa.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function J0(n,e=10240){let t=0;return{read(){return v(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return v(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Cs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Fe("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var F_=class{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new qe,this.buffer=new Uint8Array,this.Bu=function(){return new TextDecoder("utf-8")}(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}getMetadata(){return v(this,null,function*(){return this.metadata.promise})}Su(){return v(this,null,function*(){return yield this.getMetadata(),this.Lu()})}Lu(){return v(this,null,function*(){let e=yield this.ku();if(e===null)return null;let t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);let i=yield this.Qu(r);return new Hh(JSON.parse(i),e.length+r)})}$u(){return this.buffer.findIndex(e=>e===123)}ku(){return v(this,null,function*(){for(;this.$u()<0&&!(yield this.Uu()););if(this.buffer.length===0)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Qu(e){return v(this,null,function*(){for(;this.buffer.length<e;)(yield this.Uu())&&this.qu("Reached the end of bundle when more is expected.");let t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}Uu(){return v(this,null,function*(){let e=yield this.Nu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var L_=class{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Qa())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Ku(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;let e=this.ku(),t=this.Qu(e);return new Hh(JSON.parse(t),e)}Qu(e){if(this.cursor+e>this.bundleData.length)throw new k(S.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}ku(){let e=this.cursor,t=this.cursor;for(;t<this.bundleData.length;){if(this.bundleData[t]==="{"){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}};var V_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return v(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return v(this,null,function*(){let s=F(i),a={documents:o.map(f=>Cc(s.serializer,f))},c=yield s.Jo("BatchGetDocuments",s.serializer.databaseId,ue.emptyPath(),a,o.length),l=new Map;c.forEach(f=>{let g=x$(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());H(!!g,55234,{key:f}),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Br(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return v(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=V.fromPath(r);this.mutations.push(new Ec(i,this.precondition(i)))}),yield function(r,i){return v(this,null,function*(){let o=F(r),s={writes:i.map(a=>Sc(o.serializer,a))};yield o.Wo("Commit",o.serializer.databaseId,ue.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $(50498,{Wu:e.constructor.name});t=q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(S.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(q.min())?ke.exists(!1):ke.updateTime(t):ke.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(q.min()))throw new k(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ke.updateTime(t)}return ke.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var j_=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Gu=r.maxAttempts,this.F_=new Mc(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(()=>v(this,null,function*(){let e=new V_(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})}))}Ju(e){try{let t=this.updateFunction(e);return!Hc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!aN(t)}return!1}};var $r="FirestoreClient",B_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=$e.UNAUTHENTICATED,this.clientId=dc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){x($r,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(x($r,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Os(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Jy(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),x($r,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield MN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{yt("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{x("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{yt("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function X0(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield VI(n);x($r,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>G0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>G0(e.remoteStore,i)),n._onlineComponents=e})}function VI(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x($r,"Using user provided OfflineComponentProvider");try{yield Jy(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===S.FAILED_PRECONDITION||i.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;yt("Error using user provided cache. Falling back to memory cache: "+t),yield Jy(n,new vf)}}else x($r,"Using default OfflineComponentProvider"),yield Jy(n,new Fc(void 0));return n._offlineComponents})}function _f(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(x($r,"Using user provided OnlineComponentProvider"),yield X0(n,n._uninitializedComponentsProvider._online)):(x($r,"Using default OnlineComponentProvider"),yield X0(n,new Fs))),n._onlineComponents})}function JN(n){return VI(n).then(e=>e.persistence)}function Ls(n){return VI(n).then(e=>e.localStore)}function XN(n){return _f(n).then(e=>e.remoteStore)}function jI(n){return _f(n).then(e=>e.syncEngine)}function eR(n){return _f(n).then(e=>e.datastore)}function Ss(n){return v(this,null,function*(){let e=yield _f(n),t=e.eventManager;return t.onListen=lH.bind(null,e.syncEngine),t.onUnlisten=hH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fH.bind(null,e.syncEngine),t})}function RH(n){return n.asyncQueue.enqueue(()=>v(null,null,function*(){let e=yield JN(n),t=yield XN(n);return e.setNetworkEnabled(!0),function(i){let o=F(i);return o.Ia.delete(0),Kc(o)}(t)}))}function PH(n){return n.asyncQueue.enqueue(()=>v(null,null,function*(){let e=yield JN(n),t=yield XN(n);return e.setNetworkEnabled(!1),function(i){return v(this,null,function*(){let o=F(i);o.Ia.add(0),yield Ms(o),o.Aa.set("Offline")})}(t)}))}function MH(n,e){let t=new qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(i,o,s){return v(this,null,function*(){try{let a=yield function(l,d){let f=F(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Os(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Ls(n),e,t)})),t.promise}function tR(n,e,t={}){let r=new qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,c,l){let d=new Cs({next:g=>{d.Ou(),s.enqueueAndForget(()=>PI(o,f));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new k(S.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?l.reject(new k(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new xc(Ps(a.path),d,{includeMetadataChanges:!0,ka:!0});return RI(o,f)}(yield Ss(n),n.asyncQueue,e,t,r)})),r.promise}function kH(n,e){let t=new qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(i,o,s){return v(this,null,function*(){try{let a=yield Oh(i,o,!0),c=new Gh(o,a.qs),l=c.nu(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=Os(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Ls(n),e,t)})),t.promise}function nR(n,e,t={}){let r=new qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(o,s,a,c,l){let d=new Cs({next:g=>{d.Ou(),s.enqueueAndForget(()=>PI(o,f)),g.fromCache&&c.source==="server"?l.reject(new k(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new xc(a,d,{includeMetadataChanges:!0,ka:!0});return RI(o,f)}(yield Ss(n),n.asyncQueue,e,t,r)})),r.promise}function xH(n,e,t){let r=new qe;return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){try{let i=yield eR(n);r.resolve(function(s,a,c){return v(this,null,function*(){var l;let d=F(s),{request:f,ft:g,parent:m}=gN(d.serializer,zA(a),c);d.connection.Qo||delete f.parent;let w=(yield d.Jo("RunAggregationQuery",d.serializer.databaseId,m,f,1)).filter(P=>!!P.result);H(w.length===1,64727);let R=(l=w[0].result)===null||l===void 0?void 0:l.aggregateFields;return Object.keys(R).reduce((P,O)=>(P[g[O]]=R[O],P),{})})}(i,e,t))}catch(i){r.reject(i)}})),r.promise}function OH(n,e){let t=new Cs(e);return n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(i,o){F(i).Da.add(o),o.next()}(yield Ss(n),t)})),()=>{t.Ou(),n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return function(i,o){F(i).Da.delete(o)}(yield Ss(n),t)}))}}function FH(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?uI().encode(s):s,function(d,f){return new F_(d,f)}(function(d,f){if(d instanceof Uint8Array)return J0(d,f);if(d instanceof ArrayBuffer)return J0(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,eo(e));n.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){NH(yield jI(n),i,r)}))}function LH(n,e){return n.asyncQueue.enqueue(()=>v(null,null,function*(){return function(r,i){let o=F(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Ti.getNamedQuery(s,i))}(yield Ls(n),e)}))}function rR(n,e){return function(r,i){return new L_(r,i)}(n,e)}function VH(n,e){return n.asyncQueue.enqueue(()=>v(null,null,function*(){return function(r,i){return v(this,null,function*(){let o=F(r),s=o.indexManager,a=[];return o.persistence.runTransaction("Configure indexes","readwrite",c=>s.getFieldIndexes(c).next(l=>function(f,g,m,w,R){f=[...f],g=[...g],f.sort(m),g.sort(m);let P=f.length,O=g.length,B=0,U=0;for(;B<O&&U<P;){let W=m(f[U],g[B]);W<0?R(f[U++]):W>0?w(g[B++]):(B++,U++)}for(;B<O;)w(g[B++]);for(;U<P;)R(f[U++])}(l,i,UU,d=>{a.push(s.addFieldIndex(c,d))},d=>{a.push(s.deleteFieldIndex(c,d))})).next(()=>N.waitFor(a)))})}(yield Ls(n),e)}))}function jH(n,e){return n.asyncQueue.enqueue(()=>v(null,null,function*(){return function(r,i){F(r).Cs.Rs=i}(yield Ls(n),e)}))}function BH(n){return n.asyncQueue.enqueue(()=>v(null,null,function*(){return function(t){let r=F(t),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",o=>i.deleteAllFieldIndexes(o))}(yield Ls(n))}))}function iR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var eA=new Map;var oR="firestore.googleapis.com",tA=!0,Qh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oR,this.ssl=tA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:tA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SN)throw new k(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Xy;switch(r.type){case"firstParty":return new rv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=eA.get(t);r&&(x("ComponentProvider","Removing Datastore"),eA.delete(t),r.terminate())}(this),Promise.resolve()}};function BI(n,e,t,r={}){var i;n=ae(n,Qi);let o=On(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(Ma(`https://${c}`),cd("Firestore",!0)),s.host!==oR&&s.host!==c&&yt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!bt(l,a)&&(n._setSettings(l),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=$e.MOCK_USER;else{d=Xb(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new k(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new $e(g)}n._authCredentials=new ev(new rh(d,f))}}var Ye=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},be=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Xi(t,n._jsonSchema))return new n(e,r||null,new V(ue.fromString(t.referencePath)))}};be._jsonSchemaVersion="firestore/documentReference/1.0",be._jsonSchema={type:He("string",be._jsonSchemaVersion),referencePath:He("string")};var Tn=class n extends Ye{constructor(e,t,r){super(e,t,Ps(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new be(this.firestore,null,new V(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function sR(n,e,...t){if(n=ge(n),lI("collection","path",e),n instanceof Qi){let r=ue.fromString(e,...t);return YS(r),new Tn(n,null,r)}{if(!(n instanceof be||n instanceof Tn))throw new k(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ue.fromString(e,...t));return YS(r),new Tn(n.firestore,null,r)}}function aR(n,e){if(n=ae(n,Qi),lI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(S.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ye(n,null,function(r){return new tn(ue.emptyPath(),r)}(e))}function UI(n,e,...t){if(n=ge(n),arguments.length===1&&(e=dc.newId()),lI("doc","path",e),n instanceof Qi){let r=ue.fromString(e,...t);return QS(r),new be(n,null,new V(r))}{if(!(n instanceof be||n instanceof Tn))throw new k(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ue.fromString(e,...t));return QS(r),new be(n.firestore,n instanceof Tn?n.converter:null,new V(r))}}function Kr(n,e){return n=ge(n),e=ge(e),(n instanceof be||n instanceof Tn)&&(e instanceof be||e instanceof Tn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function If(n,e){return n=ge(n),e=ge(e),n instanceof Ye&&e instanceof Ye&&n.firestore===e.firestore&&Wc(n._query,e._query)&&n.converter===e.converter}var nA="AsyncQueue",Yh=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Mc(this,"async_queue_retry"),this.oc=()=>{let r=nh();r&&x(nA,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=nh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=nh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new qe;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qr(e))throw e;x(nA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Fe("INTERNAL UNHANDLED ERROR: ",rA(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=A_.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&$(47125,{hc:rA(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function rA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function is(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var U_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var zK=-1,ve=class extends Qi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Yh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Yh(e),this._firestoreClient=void 0,yield e}})}};function cR(n,e,t){t||(t=vc);let r=gr(n,"firestore");if(r.isInitialized(t)){let i=r.getImmediate({identifier:t}),o=r.getOptions(t);if(bt(o,e))return i;throw new k(S.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new k(S.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SN)throw new k(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&On(e.host)&&Ma(e.host),r.initialize({options:e,instanceIdentifier:t})}function uR(n,e){let t=typeof n=="object"?n:yr(),r=typeof n=="string"?n:e||vc,i=gr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Jb("firestore");o&&BI(i,...o)}return i}function Re(n){if(n._terminated)throw new k(S.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lR(n),n._firestoreClient}function lR(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,d){return new gv(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,iR(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new B_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function dR(n,e){yt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return fR(n,Fs.provider,{build:r=>new Lc(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function hR(n){return v(this,null,function*(){yt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();fR(n,Fs.provider,{build:t=>new Kh(t,e.cacheSizeBytes)})})}function fR(n,e,t){if((n=ae(n,ve))._firestoreClient||n._terminated)throw new k(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(S.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},lR(n)}function pR(n){if(n._initialized&&!n._terminated)throw new k(S.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new qe;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>v(null,null,function*(){try{yield function(r){return v(this,null,function*(){if(!xr.C())return Promise.resolve();let i=r+RN;yield xr.delete(i)})}(bI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function gR(n){return function(t){let r=new qe;return t.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return vH(yield jI(t),r)})),r.promise}(Re(n=ae(n,ve)))}function mR(n){return RH(Re(n=ae(n,ve)))}function yR(n){return PH(Re(n=ae(n,ve)))}function vR(n){return EC(n.app,"firestore",n._databaseId.database),n._delete()}function Zh(n,e){let t=Re(n=ae(n,ve)),r=new U_;return FH(t,n._databaseId,e,r),r}function $I(n,e){return LH(Re(n=ae(n,ve)),e).then(t=>t?new Ye(n,null,t.query):null)}var Yi=class{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}},$_=class{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}};var Wn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ve.fromBase64String(e))}catch(t){throw new k(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ve.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xi(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:He("string",Wn._jsonSchemaVersion),bytes:He("string")};var Jn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};function _R(){return new Jn(sv)}var Xn=class{constructor(e){this._methodName=e}};var Pr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Xi(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Pr._jsonSchemaVersion="firestore/geoPoint/1.0",Pr._jsonSchema={type:He("string",Pr._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};var Gn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xi(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new k(S.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Gn._jsonSchemaVersion="firestore/vectorValue/1.0",Gn._jsonSchema={type:He("string",Gn._jsonSchemaVersion),vectorValues:He("object")};var UH=/^__.*__$/,H_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new rn(e,this.data,this.fieldMask,t,this.fieldTransforms):new jr(e,this.data,t,this.fieldTransforms)}},Jh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new rn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function IR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ec:n})}}var Xh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ef(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(IR(this.Ec)&&UH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},q_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||eo(e)}Dc(e,t,r,i=!1){return new Xh({Ec:e,methodName:t,bc:r,path:ze.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function to(n){let e=n._freezeSettings(),t=eo(n._databaseId);return new q_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ef(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);zI("Data must be an object, but it was:",s,r);let a=TR(r,s),c,l;if(o.merge)c=new Ot(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=jc(e,f,t);if(!s.contains(g))throw new k(S.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bR(d,g)||d.push(g)}c=new Ot(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new H_(new ot(a),c,l)}var Vc=class n extends Xn{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function ER(n,e,t){return new Xh({Ec:3,bc:e.settings.bc,methodName:n._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var z_=class n extends Xn{_toFieldTransform(e){return new qi(e.path,new Lr)}isEqual(e){return e instanceof n}},W_=class n extends Xn{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=ER(this,e,!0),r=this.vc.map(o=>no(o,t)),i=new Yn(r);return new qi(e.path,i)}isEqual(e){return e instanceof n&&bt(this.vc,e.vc)}},G_=class n extends Xn{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){let t=ER(this,e,!0),r=this.vc.map(o=>no(o,t)),i=new Zn(r);return new qi(e.path,i)}isEqual(e){return e instanceof n&&bt(this.vc,e.vc)}},K_=class n extends Xn{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new Vr(e.serializer,eN(e.serializer,this.Cc));return new qi(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function HI(n,e,t,r){let i=n.Dc(1,e,t);zI("Data must be an object, but it was:",i,r);let o=[],s=ot.empty();zr(r,(c,l)=>{let d=wf(e,c,t);l=ge(l);let f=i.gc(d);if(l instanceof Vc)o.push(d);else{let g=no(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Ot(o);return new Jh(s,a,i.fieldTransforms)}function qI(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[jc(e,r,t)],c=[i];if(o.length%2!=0)throw new k(S.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(jc(e,o[g])),c.push(o[g+1]);let l=[],d=ot.empty();for(let g=a.length-1;g>=0;--g)if(!bR(l,a[g])){let m=a[g],w=c[g];w=ge(w);let R=s.gc(m);if(w instanceof Vc)l.push(m);else{let P=no(w,R);P!=null&&(l.push(m),d.set(m,P))}}let f=new Ot(l);return new Jh(d,f,s.fieldTransforms)}function wR(n,e,t,r=!1){return no(t,n.Dc(r?4:3,e))}function no(n,e){if(DR(n=ge(n)))return zI("Unsupported field value:",e,n),TR(n,e);if(n instanceof Xn)return function(r,i){if(!IR(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=no(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ae.fromDate(r);return{timestampValue:_s(i.serializer,o)}}if(r instanceof Ae){let o=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_s(i.serializer,o)}}if(r instanceof Pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wn)return{bytesValue:uN(i.serializer,r._byteString)};if(r instanceof be){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:TI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gn)return function(s,a){return{mapValue:{fields:{[yI]:{stringValue:vI},[ps]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return wI(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${sf(r)}`)}(n,e)}function TR(n,e){let t={};return RA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(n,(r,i)=>{let o=no(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function DR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ae||n instanceof Pr||n instanceof Wn||n instanceof be||n instanceof Xn||n instanceof Gn)}function zI(n,e,t){if(!DR(t)||!hA(t)){let r=sf(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function jc(n,e,t){if((e=ge(e))instanceof Jn)return e._internalPath;if(typeof e=="string")return wf(n,e);throw ef("Field path arguments must be of type string or ",n,!1,void 0,t)}var $H=new RegExp("[~\\*/\\[\\]]");function wf(n,e,t){if(e.search($H)>=0)throw ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jn(...e.split("."))._internalPath}catch{throw ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ef(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new k(S.INVALID_ARGUMENT,a+n+c)}function bR(n,e){return n.some(t=>t.isEqual(e))}var Zi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Tf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Q_=class extends Zi{data(){return super.data()}};function Tf(n,e){return typeof e=="string"?wf(n,e):e instanceof Jn?e._internalPath:e._delegate._internalPath}function CR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bc=class{},Ji=class extends Bc{};function SR(n,e,...t){let r=[];e instanceof Bc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof As).length,a=o.filter(c=>c instanceof Uc).length;if(s>1||s>0&&a>0)throw new k(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Uc=class n extends Ji{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return jR(e._query,t),new Ye(e.firestore,e.converter,Av(e._query,t))}_parse(e){let t=to(e.firestore);return function(o,s,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){oA(f,d);let w=[];for(let R of f)w.push(iA(c,o,R));g={arrayValue:{values:w}}}else g=iA(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||oA(f,d),g=wR(a,s,f,d==="in"||d==="not-in");return le.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function AR(n,e,t){let r=e,i=Tf("where",n);return Uc._create(i,r,t)}var As=class n extends Bc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ye.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)jR(s,c),s=Av(s,c)}(e._query,t),new Ye(e.firestore,e.converter,Av(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function NR(...n){return n.forEach(e=>BR("or",e)),As._create("or",n)}function RR(...n){return n.forEach(e=>BR("and",e)),As._create("and",n)}var Y_=class n extends Ji{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $i(o,s)}(e._query,this._field,this._direction);return new Ye(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new tn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function PR(n,e="asc"){let t=e,r=Tf("orderBy",n);return Y_._create(r,t)}var tf=class n extends Ji{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Ye(e.firestore,e.converter,mh(e._query,this._limit,this._limitType))}};function MR(n){return fA("limit",n),tf._create("limit",n,"F")}function kR(n){return fA("limitToLast",n),tf._create("limitToLast",n,"L")}var nf=class n extends Ji{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=VR(e,this.type,this._docOrFields,this._inclusive);return new Ye(e.firestore,e.converter,function(i,o){return new tn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function xR(...n){return nf._create("startAt",n,!0)}function OR(...n){return nf._create("startAfter",n,!1)}var rf=class n extends Ji{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=VR(e,this.type,this._docOrFields,this._inclusive);return new Ye(e.firestore,e.converter,function(i,o){return new tn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function FR(...n){return rf._create("endBefore",n,!1)}function LR(...n){return rf._create("endAt",n,!0)}function VR(n,e,t,r){if(t[0]=ge(t[0]),t[0]instanceof Zi)return function(o,s,a,c,l){if(!c)throw new k(S.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of ns(o))if(f.field.isKeyField())d.push(Ui(s,c.key));else{let g=c.data.field(f.field);if(lf(g))throw new k(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new k(S.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new bn(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=to(n.firestore);return function(s,a,c,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(S.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let w=0;w<d.length;w++){let R=d[w];if(g[w].field.isKeyField()){if(typeof R!="string")throw new k(S.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!II(s)&&R.indexOf("/")!==-1)throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);let P=s.path.child(ue.fromString(R));if(!V.isDocumentKey(P))throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);let O=new V(P);m.push(Ui(a,O))}else{let P=wR(c,l,R);m.push(P)}}return new bn(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function iA(n,e,t){if(typeof(t=ge(t))=="string"){if(t==="")throw new k(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!II(e)&&t.indexOf("/")!==-1)throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ue.fromString(t));if(!V.isDocumentKey(r))throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ui(n,new V(r))}if(t instanceof be)return Ui(n,t._key);throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sf(t)}.`)}function oA(n,e){if(!Array.isArray(n)||n.length===0)throw new k(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jR(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function BR(n,e){if(!(e instanceof Uc||e instanceof As))throw new k(S.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}var of=class{convertValue(e,t="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return zr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ps].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Se(s.doubleValue));return new Gn(o)}convertGeoPoint(e){return new Pr(Se(e.latitude),Se(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=df(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){let t=Kn(e);return new Ae(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ue.fromString(e);H(_N(r),9688,{name:e});let i=new fs(r.get(1),r.get(3)),o=new V(r.popFirst(5));return i.isEqual(t)||Fe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Df(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var $c=class extends of{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new be(this.firestore,null,t)}};function UR(n){return new Yi("sum",jc("sum",n))}function WK(n){return new Yi("avg",jc("average",n))}function HH(){return new Yi("count")}function $R(n,e){var t,r;return n instanceof Yi&&e instanceof Yi&&n.aggregateType===e.aggregateType&&((t=n._internalFieldPath)===null||t===void 0?void 0:t.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function HR(n,e){return If(n.query,e.query)&&bt(n.data(),e.data())}var qR="NOT SUPPORTED",In=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ft=class n extends Zi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new os(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Tf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new k(S.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};function GK(n,e,t){if(Xi(e,Ft._jsonSchema)){if(e.bundle===qR)throw new k(S.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");let r=eo(n._databaseId),i=rR(e.bundle,r),o=i.Ku(),s=new Oc(i.getMetadata(),r);for(let d of o)s.Wa(d);let a=s.documents;if(a.length!==1)throw new k(S.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);let c=ff(r,a[0].document),l=new V(ue.fromString(e.bundleName));return new Ft(n,new $c(n),l,c,new In(!1,!1),t||null)}}Ft._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ft._jsonSchema={type:He("string",Ft._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};var os=class extends Ft{data(e={}){return super.data(e)}},Lt=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new In(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new os(this._firestore,this._userDataWriter,r.key,r,new In(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new os(i._firestore,i._userDataWriter,a.doc.key,a.doc,new In(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new os(i._firestore,i._userDataWriter,a.doc.key,a.doc,new In(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:qH(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new k(S.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function KK(n,e,t){if(Xi(e,Lt._jsonSchema)){if(e.bundle===qR)throw new k(S.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");let r=eo(n._databaseId),i=rR(e.bundle,r),o=i.Ku(),s=new Oc(i.getMetadata(),r);for(let g of o)s.Wa(g);if(s.queries.length!==1)throw new k(S.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${s.queries.length} queries.`);let a=gf(s.queries[0].bundledQuery),c=s.documents,l=new kc;c.map(g=>{let m=ff(r,g.document);l=l.add(m)});let d=Ki.fromInitialDocuments(a,l,X(),!1,!1),f=new Ye(n,t||null,a);return new Lt(n,new $c(n),f,d)}}function qH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:n})}}function zR(n,e){return n instanceof Ft&&e instanceof Ft?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Lt&&e instanceof Lt&&n._firestore===e._firestore&&If(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function WR(n){n=ae(n,be);let e=ae(n.firestore,ve);return tR(Re(e),n._key).then(t=>WI(e,n,t))}Lt._jsonSchemaVersion="firestore/querySnapshot/1.0",Lt._jsonSchema={type:He("string",Lt._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};var Cn=class extends of{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new be(this.firestore,null,t)}};function GR(n){n=ae(n,be);let e=ae(n.firestore,ve),t=Re(e),r=new Cn(e);return MH(t,n._key).then(i=>new Ft(e,r,n._key,i,new In(i!==null&&i.hasLocalMutations,!0),n.converter))}function KR(n){n=ae(n,be);let e=ae(n.firestore,ve);return tR(Re(e),n._key,{source:"server"}).then(t=>WI(e,n,t))}function QR(n){n=ae(n,Ye);let e=ae(n.firestore,ve),t=Re(e),r=new Cn(e);return CR(n._query),nR(t,n._query).then(i=>new Lt(e,r,n,i))}function YR(n){n=ae(n,Ye);let e=ae(n.firestore,ve),t=Re(e),r=new Cn(e);return kH(t,n._query).then(i=>new Lt(e,r,n,i))}function ZR(n){n=ae(n,Ye);let e=ae(n.firestore,ve),t=Re(e),r=new Cn(e);return nR(t,n._query,{source:"server"}).then(i=>new Lt(e,r,n,i))}function JR(n,e,t){n=ae(n,be);let r=ae(n.firestore,ve),i=Df(n.converter,e,t);return Qc(r,[Ef(to(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ke.none())])}function XR(n,e,t,...r){n=ae(n,be);let i=ae(n.firestore,ve),o=to(i),s;return s=typeof(e=ge(e))=="string"||e instanceof Jn?qI(o,"updateDoc",n._key,e,t,r):HI(o,"updateDoc",n._key,e),Qc(i,[s.toMutation(n._key,ke.exists(!0))])}function eP(n){return Qc(ae(n.firestore,ve),[new Br(n._key,ke.none())])}function tP(n,e){let t=ae(n.firestore,ve),r=UI(n),i=Df(n.converter,e);return Qc(t,[Ef(to(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ke.exists(!1))]).then(()=>r)}function Ns(n,...e){var t,r,i;n=ge(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||is(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(is(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof be)l=ae(n.firestore,ve),d=Ps(n._key.path),c={next:f=>{e[s]&&e[s](WI(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=ae(n,Ye);l=ae(f.firestore,ve),d=f._query;let g=new Cn(l);c={next:m=>{e[s]&&e[s](new Lt(l,g,f,m))},error:e[s+1],complete:e[s+2]},CR(n._query)}return function(g,m,w,R){let P=new Cs(R),O=new xc(m,P,w);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return RI(yield Ss(g),O)})),()=>{P.Ou(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return PI(yield Ss(g),O)}))}}(Re(l),d,a,c)}function QK(n,e,...t){let r=ge(n),i=function(c){let l={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(let f of d){if(!(f in c)){l.error=`snapshotJson missing required field: ${f}`;break}let g=c[f];if(typeof g!="string"){l.error=`snapshotJson field '${f}' must be a string.`;break}if(g.length===0){l.error=`snapshotJson field '${f}' cannot be an empty string.`;break}f==="bundle"?l.bundle=g:f==="bundleName"?l.bundleName=g:f==="bundleSource"&&(l.bundleSource=g)}return l}(e);if(i.error)throw new k(S.INVALID_ARGUMENT,i.error);let o,s=0;if(typeof t[s]!="object"||is(t[s])||(o=t[s++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof t[s]=="object"&&is(t[s])){let c=t[s++];a={next:c.next,error:c.error,complete:c.complete}}else a={next:t[s++],error:t[s++],complete:t[s++]};return function(l,d,f,g,m){let w,R=!1;return Zh(l,d.bundle).then(()=>$I(l,d.bundleName)).then(O=>{O&&!R&&(m&&O.withConverter(m),w=Ns(O,f||{},g))}).catch(O=>(g.error&&g.error(O),()=>{})),()=>{R||(R=!0,w&&w())}}(r,i,o,a,t[s])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof t[s]=="object"&&is(t[s])){let c=t[s++];a={next:c.next,error:c.error,complete:c.complete}}else a={next:t[s++],error:t[s++],complete:t[s++]};return function(l,d,f,g,m){let w,R=!1;return Zh(l,d.bundle).then(()=>{if(!R){let O=new be(l,m||null,V.fromPath(d.bundleName));w=Ns(O,f||{},g)}}).catch(O=>(g.error&&g.error(O),()=>{})),()=>{R||(R=!0,w&&w())}}(r,i,o,a,t[s])}throw new k(S.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function nP(n,e){return OH(Re(n=ae(n,ve)),is(e)?e:{next:e})}function Qc(n,e){return function(r,i){let o=new qe;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return pH(yield jI(r),i,o)})),o.promise}(Re(n),e)}function WI(n,e,t){let r=t.docs.get(e._key),i=new Cn(n);return new Ft(n,i,e._key,r,new In(t.hasPendingWrites,t.fromCache),e.converter)}function bf(n){return GI(n,{count:HH()})}function GI(n,e){let t=ae(n.firestore,ve),r=Re(t),i=NA(e,(o,s)=>new yh(s,o.aggregateType,o._internalFieldPath));return xH(r,n._query,i).then(o=>function(a,c,l){let d=new Cn(a);return new $_(c,d,l)}(t,n,o))}var Z_=class{constructor(e){this.kind="memory",this._onlineComponentProvider=Fs.provider,e?.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new Fc(void 0)}}toJSON(){return{kind:this.kind}}},J_=class{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=zH(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}},X_=class{constructor(){this.kind="memoryEager",this._offlineComponentProvider=vf.provider}toJSON(){return{kind:this.kind}}},eI=class{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new Fc(e)}}toJSON(){return{kind:this.kind}}};function YK(){return new X_}function ZK(n){return new eI(n?.cacheSizeBytes)}function JK(n){return new Z_(n)}function XK(n){return new J_(n)}var tI=class{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fs.provider,this._offlineComponentProvider={build:t=>new Lc(t,e?.cacheSizeBytes,this.forceOwnership)}}},nI=class{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fs.provider,this._offlineComponentProvider={build:t=>new Kh(t,e?.cacheSizeBytes)}}};function zH(n){return new tI(n?.forceOwnership)}function eQ(){return new nI}var WH={maxAttempts:5};var rI=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=to(e)}set(e,t,r){this._verifyNotCommitted();let i=Nr(e,this._firestore),o=Df(i.converter,t,r),s=Ef(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ke.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Nr(e,this._firestore),s;return s=typeof(t=ge(t))=="string"||t instanceof Jn?qI(this._dataReader,"WriteBatch.update",o._key,t,r,i):HI(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,ke.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Nr(e,this._firestore);return this._mutations=this._mutations.concat(new Br(t._key,ke.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Nr(n,e){if((n=ge(n)).firestore!==e)throw new k(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var iI=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=to(e)}get(e){let t=Nr(e,this._firestore),r=new $c(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return $(24041);let o=i[0];if(o.isFoundDocument())return new Zi(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Zi(this._firestore,r,t._key,null,t.converter);throw $(18433,{doc:o})})}set(e,t,r){let i=Nr(e,this._firestore),o=Df(i.converter,t,r),s=Ef(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Nr(e,this._firestore),s;return s=typeof(t=ge(t))=="string"||t instanceof Jn?qI(this._dataReader,"Transaction.update",o._key,t,r,i):HI(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Nr(e,this._firestore);return this._transaction.delete(t._key),this}};var oI=class extends iI{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Nr(e,this._firestore),r=new Cn(this._firestore);return super.get(e).then(i=>new Ft(this._firestore,r,t._key,i._document,new In(!1,!1),t.converter))}};function rP(n,e,t){n=ae(n,ve);let r=Object.assign(Object.assign({},WH),t);return function(o){if(o.maxAttempts<1)throw new k(S.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new qe;return o.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){let l=yield eR(o);new j_(o.asyncQueue,l,a,s,c).zu()})),c.promise}(Re(n),i=>e(new oI(n,i)),r)}function iP(){return new Vc("deleteField")}function tQ(){return new z_("serverTimestamp")}function nQ(...n){return new W_("arrayUnion",n)}function rQ(...n){return new G_("arrayRemove",n)}function oP(n){return new K_("increment",n)}function sP(n){return new Gn(n)}function aP(n){return Re(n=ae(n,ve)),new rI(n,e=>Qc(n,e))}function cP(n,e){let t=Re(n=ae(n,ve));if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return yt("Cannot enable indexes when persistence is disabled"),Promise.resolve();let r=function(o){let s=typeof o=="string"?function(l){try{return JSON.parse(l)}catch(d){throw new k(S.INVALID_ARGUMENT,"Failed to parse JSON: "+d?.message)}}(o):o,a=[];if(Array.isArray(s.indexes))for(let c of s.indexes){let l=sA(c,"collectionGroup"),d=[];if(Array.isArray(c.fields))for(let f of c.fields){let g=wf("setIndexConfiguration",sA(f,"fieldPath"));f.arrayConfig==="CONTAINS"?d.push(new zn(g,2)):f.order==="ASCENDING"?d.push(new zn(g,0)):f.order==="DESCENDING"&&d.push(new zn(g,1))}a.push(new kr(kr.UNKNOWN_ID,l,d,cs.empty()))}return a}(e);return VH(t,r)}function sA(n,e){if(typeof n[e]!="string")throw new k(S.INVALID_ARGUMENT,"Missing string value for: "+e);return n[e]}var sI=class{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}};function uP(n){var e;n=ae(n,ve);let t=aA.get(n);if(t)return t;if(((e=Re(n)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;let r=new sI(n);return aA.set(n,r),r}function lP(n){fP(n,!0)}function dP(n){fP(n,!1)}function hP(n){BH(Re(n._firestore)).then(e=>x("deleting all persistent cache indexes succeeded")).catch(e=>yt("deleting all persistent cache indexes failed",e))}function fP(n,e){jH(Re(n._firestore),e).then(t=>x(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(t=>yt(`setting persistent cache index auto creation isEnabled=${e} failed`,t))}var aA=new WeakMap;function iQ(n){var e;let t=(e=Re(ae(n.firestore,ve))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return t===void 0?null:pf(t,at(n._query)).Vt}function oQ(n,e){var t;let r=NA(e,(o,s)=>new yh(s,o.aggregateType,o._internalFieldPath)),i=(t=Re(ae(n.firestore,ve))._onlineComponents)===null||t===void 0?void 0:t.datastore.serializer;return i===void 0?null:gN(i,zA(n._query),r,!0).request}var cA=class{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return aI.instance.onExistenceFilterMismatch(e)}},aI=class n{constructor(){this.Fc=new Map}static get instance(){return Kd||(Kd=new n,function(t){if(vh)throw new Error("a TestingHooksSpi instance is already set");vh=t}(Kd)),Kd}ct(e){this.Fc.forEach(t=>t(e))}onExistenceFilterMismatch(e){let t=Symbol(),r=this.Fc;return r.set(t,e),()=>r.delete(t)}},Kd=null;(function(e,t=!0){(function(i){Rs=i})(mr),Zt(new mt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ve(new tv(r.getProvider("auth-internal")),new iv(s,r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fs(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ne(zS,WS,e),Ne(zS,WS,"esm2017")})();var Cf=function(){return Cf=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Cf.apply(this,arguments)};function YI(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var GH={includeMetadataChanges:!1};function Yc(n,e){return e===void 0&&(e=GH),new ee(function(t){var r=Ns(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function ZI(n){return Yc(n,{includeMetadataChanges:!0})}function pP(n,e){return e===void 0&&(e={}),ZI(n).pipe(dt(function(t){return Sf(t,e)}))}function Sf(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Cf(Cf({},r),(t={},t[e.idField]=n.id,t))}var gP=["added","modified","removed"],KH=function(n){return cr(function(e){for(var t=!1,r=0;r<e.length;r++){var i=e[r];if(n&&n.indexOf(i.type)>=0){t=!0;break}}return t})};function KI(n,e,t){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=n.slice();return o.splice.apply(o,YI([e,t],r,!1)),o}function QH(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&Kr(n[e.newIndex].doc.ref,e.doc.ref)))return KI(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||Kr(n[e.oldIndex].doc.ref,e.doc.ref))if(e.oldIndex!==e.newIndex){var t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return KI(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&Kr(n[e.oldIndex].doc.ref,e.doc.ref))return KI(n,e.oldIndex,1);break}return n}function YH(n,e,t){return t===void 0&&(t=gP),e.forEach(function(r){t.indexOf(r.type)>-1&&(n=QH(n,r))}),n}var mP=function(){return Su(Op(void 0),xp())},QI=function(n,e){return JSON.stringify(n.metadata)===JSON.stringify(e.metadata)},ZH=function(){return Su(mP(),cr(function(n){var e=n[0],t=n[1];return t.length>0||e===void 0}),dt(function(n){var e=n[1];return e}))};function Af(n,e){return e===void 0&&(e={}),Yc(n,{includeMetadataChanges:!0}).pipe(mP(),dt(function(t){var r=t[0],i=t[1],o=i.docChanges();return r&&!QI(r,i)&&i.docs.forEach(function(s,a){var c=o.find(function(d){return Kr(d.doc.ref,s.ref)});if(c){if(QI(c.doc,s))return}else{var l=r?.docs.find(function(d){return Kr(d.ref,s.ref)});if(l&&QI(l,s))return}o.push({oldIndex:a,newIndex:a,type:"modified",doc:s})}),o}),KH(e.events||gP),ZH())}function JI(n){return Yc(n,{includeMetadataChanges:!0}).pipe(dt(function(e){return e.docs}))}function yP(n,e){return e===void 0&&(e={}),Af(n,e).pipe(Zu(function(t,r){return YH(t,r,e.events)},[]),Mp())}function vP(n,e){return e===void 0&&(e={}),Af(n,e).pipe(Zu(function(t,r){return YI(YI([],t,!0),r,!0)},[]))}function _P(n,e){return e===void 0&&(e={}),JI(n).pipe(dt(function(t){return t.map(function(r){return Sf(r,e)})}))}function XI(n){return jt(bf(n))}function IP(n){return XI(n).pipe(dt(function(e){return e.data().count}))}var Zc=class{constructor(e){return e}},tE="firestore",eE=class{constructor(){return bi(tE)}},bQ=Ap(0,300).pipe(Np(()=>jt(bi(tE))),Pp()),nE=new oe("angularfire2.firestore-instances");function JH(n,e){let t=Oa(tE,n,e);return t&&new Zc(t)}function XH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Zc(r)}}var EP={provide:eE,deps:[[new Rt,nE]]},wP={provide:Zc,useFactory:JH,deps:[[new Rt,nE],Vn]},CQ=(()=>{class n{constructor(){Ne("angularfire",Ln.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xl({type:n});static \u0275inj=xl({providers:[wP,EP]})}return n})();function SQ(n,...e){return Ne("angularfire",Ln.full,"fst"),Po([wP,EP,{provide:nE,useFactory:XH(n),multi:!0,deps:[xe,wt,vr,Ci,[new Rt,Ka],[new Rt,Uo],...e]}])}var AQ=j(vP,!0),NQ=j(JI,!0),RQ=j(Af,!0),PQ=j(IP,!0),MQ=j(XI,!0),kQ=j(_P,!0),xQ=j(ZI,!0),OQ=j(pP,!0),FQ=j(Yc,!0),LQ=j(Sf,!0),VQ=j(yP,!0),jQ=j(tP,!0,2),BQ=j($R,!0,2),UQ=j(HR,!0,2),$Q=j(RR,!0,2),HQ=j(pR,!0),qQ=j(sR,!0,2),zQ=j(aR,!0,2),WQ=j(BI,!0),GQ=j(hP,!0),KQ=j(eP,!0,2),QQ=j(iP,!0,2),YQ=j(yR,!0),ZQ=j(dP,!0),JQ=j(UI,!0,2),XQ=j(_R,!0,2),eY=j(dR,!0),tY=j(hR,!0),nY=j(mR,!0),rY=j(lP,!0),iY=j(LR,!0,2),oY=j(FR,!0,2),sY=j(GI,!0),aY=j(bf,!0),cY=j(WR,!0),uY=j(GR,!0),lY=j(KR,!0),dY=j(QR,!0),hY=j(YR,!0),fY=j(ZR,!0),pY=j(uR,!0),gY=j(uP,!0),mY=j(oP,!0,2),yY=j(cR,!0),vY=j(MR,!0,2),_Y=j(kR,!0,2),IY=j(Zh,!0),EY=j($I,!0,2),wY=j(Ns,!0),TY=j(nP,!0),DY=j(NR,!0,2),bY=j(PR,!0,2),CY=j(SR,!0,2),SY=j(If,!0,2),AY=j(Kr,!0,2),NY=j(rP,!0),RY=j(JR,!0,2),PY=j(cP,!0),MY=j(uA,!0),kY=j(zR,!0,2),xY=j(OR,!0,2),OY=j(xR,!0,2),FY=j(UR,!0,2),LY=j(vR,!0),VY=j(XR,!0,2),jY=j(sP,!0,2),BY=j(gR,!0),UY=j(AR,!0,2),$Y=j(aP,!0,2);export{Je as a,Xe as b,v as c,je as d,Su as e,Tp as f,Dp as g,Pn as h,ua as i,da as j,jt as k,RM as l,PM as m,MM as n,ii as o,dt as p,BM as q,oi as r,Qu as s,$M as t,HM as u,Ap as v,cr as w,Fw as x,Np as y,ha as z,Rp as A,WM as B,GM as C,kp as D,KM as E,Zu as F,Op as G,Vw as H,QM as I,YM as J,ie as K,ST as L,De as M,xl as N,K8 as O,oe as P,re as Q,ft as R,Q as S,Po as T,HT as U,an as V,Mo as W,Fk as X,Q8 as Y,Y8 as Z,Z8 as _,wt as $,$l as aa,Na as ba,ur as ca,xe as da,Ao as ea,J8 as fa,nm as ga,Fx as ha,X8 as ia,e5 as ja,Hx as ka,HD as la,t5 as ma,WD as na,Ia as oa,n5 as pa,Cl as qa,Al as ra,wb as sa,Dt as ta,Jl as ua,KO as va,QO as wa,h5 as xa,Xl as ya,ed as za,rF as Aa,pF as Ba,f5 as Ca,ym as Da,_F as Ea,Ta as Fa,kF as Ga,xF as Ha,OF as Ia,Vb as Ja,jb as Ka,zF as La,KF as Ma,QF as Na,p5 as Oa,iL as Pa,g5 as Qa,m5 as Ra,y5 as Sa,aL as Ta,Ub as Ua,cL as Va,uL as Wa,lL as Xa,v5 as Ya,dL as Za,_5 as _a,I5 as $a,E5 as ab,w5 as bb,T5 as cb,D5 as db,kL as eb,b5 as fb,C5 as gb,zb as hb,LL as ib,Wb as jb,pd as kb,gd as lb,u2 as mb,zm as nb,kC as ob,T2 as pb,qC as qb,D2 as rb,C2 as sb,N2 as tb,R2 as ub,P2 as vb,M2 as wb,Zm as xb,SW as yb,AW as zb,NW as Ab,Mj as Bb,Ga as Cb,bK as Db,CK as Eb,SK as Fb,AK as Gb,NK as Hb,yt as Ib,$K as Jb,k as Kb,Xy as Lb,GS as Mb,dc as Nb,ze as Ob,V as Pb,BU as Qb,ae as Rb,Ae as Sb,qK as Tb,Ve as Ub,fs as Vb,Ye as Wb,be as Xb,Tn as Yb,U_ as Zb,zK as _b,cR as $b,Re as ac,Yi as bc,$_ as cc,Wn as dc,Jn as ec,Xn as fc,Pr as gc,Gn as hc,Ji as ic,Uc as jc,As as kc,Y_ as lc,tf as mc,nf as nc,rf as oc,of as pc,WK as qc,HH as rc,In as sc,Ft as tc,GK as uc,os as vc,Lt as wc,KK as xc,QK as yc,Qc as zc,YK as Ac,ZK as Bc,JK as Cc,XK as Dc,zH as Ec,eQ as Fc,rI as Gc,oI as Hc,tQ as Ic,nQ as Jc,rQ as Kc,sI as Lc,iQ as Mc,oQ as Nc,cA as Oc,Zc as Pc,eE as Qc,bQ as Rc,CQ as Sc,SQ as Tc,AQ as Uc,NQ as Vc,RQ as Wc,PQ as Xc,MQ as Yc,kQ as Zc,xQ as _c,OQ as $c,FQ as ad,LQ as bd,VQ as cd,jQ as dd,BQ as ed,UQ as fd,$Q as gd,HQ as hd,qQ as id,zQ as jd,WQ as kd,GQ as ld,KQ as md,QQ as nd,YQ as od,ZQ as pd,JQ as qd,XQ as rd,eY as sd,tY as td,nY as ud,rY as vd,iY as wd,oY as xd,sY as yd,aY as zd,cY as Ad,uY as Bd,lY as Cd,dY as Dd,hY as Ed,fY as Fd,pY as Gd,gY as Hd,mY as Id,yY as Jd,vY as Kd,_Y as Ld,IY as Md,EY as Nd,wY as Od,TY as Pd,DY as Qd,bY as Rd,CY as Sd,SY as Td,AY as Ud,NY as Vd,RY as Wd,PY as Xd,MY as Yd,kY as Zd,xY as _d,OY as $d,FY as ae,LY as be,VY as ce,jY as de,BY as ee,UY as fe,$Y as ge};
